
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Implementation Specifics &#8212; Eclipse Cyclone DDS 0.11.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/basic_mod.css?v=0.7.0-1" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="/_static/css/helpers.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="/_static/js/helpers.js"></script>
    <script src="../_static/js/theme.js"></script>
    <script src="../_static/js/petite-vue.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Configuration File Reference" href="config_file_reference.html" />
    <link rel="prev" title="DDSI Concepts" href="ddsi_concepts.html" /> 
  </head><body>

<div id="top_nav">
    

    <nav>
        <p id="toggle_sidebar">
            <a href="#" title="Toggle sidebar">|||</a>
        </p>
        <h1><a href="../index.html" title="Go to homepage">Eclipse Cyclone DDS 0.11.0 documentation</a></h1>

        <a id="mode_toggle" href="#" @click.prevent="handleClick" :title="mode">
    <template v-if="mode == 'light'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_light"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><circle cx="39.311" cy="39.524" r="15.734" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.212,4.901c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901l-0,9.614c-0,2.705 2.196,4.901 4.9,4.901c2.705,0 4.901,-2.196 4.901,-4.901l0,-9.614Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M67.48,18.073c1.913,-1.912 1.913,-5.018 0,-6.931c-1.912,-1.912 -5.018,-1.912 -6.931,0l-6.798,6.799c-1.912,1.912 -1.912,5.018 0,6.931c1.913,1.912 5.018,1.912 6.931,-0l6.798,-6.799Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.728,61.108c1.912,-1.913 1.912,-5.018 -0,-6.931c-1.913,-1.913 -5.019,-1.913 -6.931,-0l-6.799,6.798c-1.912,1.913 -1.912,5.019 0,6.931c1.913,1.913 5.019,1.913 6.931,0l6.799,-6.798Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.682,54.177c-1.913,-1.913 -5.018,-1.913 -6.931,-0c-1.912,1.913 -1.912,5.018 0,6.931l6.798,6.798c1.913,1.913 5.019,1.913 6.931,0c1.913,-1.912 1.913,-5.018 0,-6.931l-6.798,-6.798Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M4.901,34.623c-2.705,0 -4.901,2.196 -4.901,4.901c0,2.705 2.196,4.901 4.901,4.901l9.614,0c2.705,0 4.901,-2.196 4.901,-4.901c0,-2.705 -2.196,-4.901 -4.901,-4.901l-9.614,0Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.212,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901l-0,9.614c-0,2.705 2.196,4.901 4.9,4.901c2.705,-0 4.901,-2.196 4.901,-4.901l0,-9.614Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M18.929,11.142c-1.912,-1.912 -5.018,-1.912 -6.931,0c-1.912,1.913 -1.912,5.019 0,6.931l6.799,6.799c1.912,1.912 5.018,1.912 6.931,-0c1.912,-1.913 1.912,-5.019 -0,-6.931l-6.799,-6.799Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.108,34.623c-2.705,0 -4.901,2.196 -4.901,4.901c-0,2.705 2.196,4.901 4.901,4.901l9.614,0c2.705,0 4.901,-2.196 4.901,-4.901c-0,-2.705 -2.196,-4.901 -4.901,-4.901l-9.614,0Z" style="fill:#fff;"/></g></g></g></svg>
    </template>

    <template v-if="mode == 'dark'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_dark"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><circle cx="39.311" cy="39.524" r="15.734" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.212,14.515c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,0 -4.901,2.196 -4.901,4.901c0,2.705 2.197,4.901 4.901,4.901c2.705,0 4.901,-2.196 4.901,-4.901Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M60.662,24.892c1.902,-1.902 1.902,-4.99 0,-6.892l-0.04,-0.039c-1.901,-1.902 -4.989,-1.902 -6.891,-0c-1.901,1.901 -1.901,4.989 0,6.891l0.04,0.04c1.902,1.901 4.989,1.901 6.891,-0Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.732,61.103c1.91,-1.91 1.91,-5.011 0,-6.921l-0.009,-0.01c-1.91,-1.91 -5.012,-1.91 -6.921,-0c-1.91,1.91 -1.91,5.011 -0,6.921l0.01,0.01c1.909,1.91 5.011,1.91 6.92,-0Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.672,54.167c-1.907,-1.907 -5.004,-1.907 -6.911,0l-0.02,0.02c-1.907,1.907 -1.907,5.004 0,6.911c1.907,1.907 5.004,1.907 6.911,-0l0.02,-0.02c1.907,-1.907 1.907,-5.004 0,-6.911Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M14.52,34.623c-2.702,0 -4.896,2.194 -4.896,4.896l0,0.01c0,2.702 2.194,4.896 4.896,4.896c2.702,0 4.896,-2.194 4.896,-4.896l-0,-0.01c-0,-2.702 -2.194,-4.896 -4.896,-4.896Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.212,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.901,2.196 -4.901,4.901c0,2.704 2.197,4.9 4.901,4.9c2.705,0 4.901,-2.196 4.901,-4.9Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M25.73,17.943c-1.911,-1.911 -5.015,-1.911 -6.926,0l-0.005,0.005c-1.911,1.911 -1.911,5.015 0,6.926c1.911,1.911 5.015,1.911 6.926,0l0.005,-0.005c1.911,-1.911 1.911,-5.014 -0,-6.926Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.098,34.623c-2.699,0 -4.891,2.192 -4.891,4.892l-0,0.019c-0,2.699 2.192,4.891 4.891,4.891c2.7,0 4.892,-2.192 4.892,-4.891l0,-0.019c0,-2.7 -2.192,-4.892 -4.892,-4.892Z" style="fill:#fff;"/></g></g></g></svg>
    </template>

    <template v-if="mode == 'darkest'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_darkest"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><path d="M39.315,23.791c8.684,-0 15.734,7.05 15.734,15.733c0,8.684 -7.05,15.734 -15.734,15.734c-8.683,0 -15.733,-7.05 -15.733,-15.734c-0,-8.683 7.05,-15.733 15.733,-15.733Zm0,4.737c6.069,0 10.997,4.927 10.997,10.996c-0,6.069 -4.928,10.996 -10.997,10.996c-6.068,0 -10.996,-4.927 -10.996,-10.996c0,-6.069 4.928,-10.996 10.996,-10.996Z" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.216,14.515c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,0 -4.9,2.196 -4.9,4.901c-0,2.705 2.196,4.901 4.9,4.901c2.705,0 4.901,-2.196 4.901,-4.901Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M60.666,24.892c1.902,-1.902 1.902,-4.99 0,-6.892l-0.04,-0.039c-1.901,-1.902 -4.989,-1.902 -6.891,-0c-1.901,1.901 -1.901,4.989 0,6.891l0.04,0.04c1.902,1.901 4.99,1.901 6.891,-0Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.737,61.103c1.909,-1.91 1.909,-5.011 -0,-6.921l-0.01,-0.01c-1.91,-1.91 -5.011,-1.91 -6.921,-0c-1.91,1.91 -1.91,5.011 -0,6.921l0.01,0.01c1.91,1.91 5.011,1.91 6.921,-0Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.676,54.167c-1.907,-1.907 -5.004,-1.907 -6.911,0l-0.02,0.02c-1.907,1.907 -1.907,5.004 0,6.911c1.907,1.907 5.004,1.907 6.911,-0l0.02,-0.02c1.907,-1.907 1.907,-5.004 0,-6.911Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M14.524,34.623c-2.702,0 -4.896,2.194 -4.896,4.896l0,0.01c0,2.702 2.194,4.896 4.896,4.896c2.702,0 4.896,-2.194 4.896,-4.896l0,-0.01c0,-2.702 -2.194,-4.896 -4.896,-4.896Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.216,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901c-0,2.704 2.196,4.9 4.9,4.9c2.705,0 4.901,-2.196 4.901,-4.9Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M25.734,17.943c-1.911,-1.911 -5.015,-1.911 -6.926,0l-0.005,0.005c-1.911,1.911 -1.911,5.015 0,6.926c1.911,1.911 5.015,1.911 6.926,0l0.005,-0.005c1.911,-1.911 1.911,-5.014 0,-6.926Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.103,34.623c-2.7,0 -4.892,2.192 -4.892,4.892l-0,0.019c-0,2.699 2.192,4.891 4.892,4.891c2.699,0 4.891,-2.192 4.891,-4.891l0,-0.019c0,-2.7 -2.192,-4.892 -4.891,-4.892Z" style="fill:#fff;"/></g></g></g></svg>
    </template>
</a>

<script>
(function() {
    const LOCAL_STORAGE_KEY = 'piccoloThemeMode'

    var initialMode = localStorage.getItem(LOCAL_STORAGE_KEY)

    if (initialMode) {
        // Make sure the value in local storage is valid
        if (['light', 'dark', 'darkest'].indexOf(initialMode) == -1) {
            initialMode = 'light'
            localStorage.setItem(LOCAL_STORAGE_KEY, initialMode)
        }
    } else {
        // Check if the client prefers dark mode
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            initialMode = 'dark'
        } else {
            initialMode = 'light'
        }
        localStorage.setItem(LOCAL_STORAGE_KEY, initialMode)
    }

    document.documentElement.dataset.mode = initialMode

    PetiteVue.createApp({
        'mode': initialMode,
        handleClick() {
            let currentMode = this.mode

            if (currentMode == 'light') {
                this.mode = 'dark'
            } else if (currentMode == 'dark') {
                this.mode = 'darkest'
            } else if (currentMode == 'darkest') {
                this.mode = 'light'
            }

            document.documentElement.dataset.mode = this.mode
            localStorage.setItem(LOCAL_STORAGE_KEY, this.mode)

            console.log(this.mode)
        }
    }).mount('#mode_toggle')
})()
</script>
            <p class="mobile_search_link">
                <a href="../search.html" title="Search">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 65 64" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2">
                        <path d="M14.873 40.009c-2.315-3.943-3.642-8.532-3.642-13.429C11.231 11.91 23.141 0 37.811 0s26.58 11.91 26.58 26.58-11.91 26.58-26.58 26.58a26.44 26.44 0 0 1-14.277-4.161L9.739 62.794a3.12 3.12 0 0 1-4.413 0L.913 58.382c-1.217-1.218-1.217-3.196 0-4.413l13.96-13.96zM37.811 8.054c10.225 0 18.526 8.301 18.526 18.526s-8.301 18.526-18.526 18.526-18.526-8.301-18.526-18.526S27.586 8.054 37.811 8.054z" fill="#fff" />
                    </svg>
                </a>
            </p>
        

        <div class="searchbox_wrapper">
            
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
    </nav>
</div>

    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Configuration Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="ddsi_concepts.html">DDSI Concepts</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Implementation Specifics</a></li>
<li class="toctree-l2"><a class="reference internal" href="config_file_reference.html">Configuration File Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">DDS Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../shared_memory.html">Shared Memory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ddsc.html">C API Reference</a></li>
</ul>

        </div>
      </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="implementation-specifics">
<span id="cyclonedds-specifics"></span><h1>Implementation Specifics<a class="headerlink" href="#implementation-specifics" title="Permalink to this headline">¶</a></h1>
<p>Eclipse Cyclone DDS runs with a default configuration for all of its settings. You can change the default
settings via an XML configuration located at a path defined by the variable <code class="docutils literal notranslate"><span class="pre">CYCLONEDDS_URI</span></code>
(set by the user). An example XML configuration follows:</p>
<div class="literal-block-wrapper docutils container" id="id36">
<div class="code-block-caption"><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">/path/to/dds/configuration.xml</span></code></span><a class="headerlink" href="#id36" title="Permalink to this code">¶</a></div>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="linenos"> 2</span><span class="nt">&lt;CycloneDDS</span>
<span class="linenos"> 3</span>  <span class="na">xmlns=</span><span class="s">&quot;https://cdds.io/config&quot;</span>
<span class="linenos"> 4</span>  <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
<span class="linenos"> 5</span>  <span class="na">xsi:schemaLocation=</span><span class="s">&quot;https://cdds.io/config https://raw.githubusercontent.com/eclipse-cyclonedds/cyclonedds/master/etc/cyclonedds.xsd&quot;</span>
<span class="linenos"> 6</span><span class="nt">&gt;</span>
<span class="linenos"> 7</span>  <span class="nt">&lt;Domain</span> <span class="na">Id=</span><span class="s">&quot;any&quot;</span><span class="nt">&gt;</span>
<span class="linenos"> 8</span>    <span class="nt">&lt;General&gt;</span>
<span class="linenos"> 9</span>      <span class="nt">&lt;Interfaces&gt;</span>
<span class="linenos">10</span>        <span class="nt">&lt;NetworkInterface</span> <span class="na">autodetermine=</span><span class="s">&quot;true&quot;</span> <span class="na">priority=</span><span class="s">&quot;default&quot;</span>
<span class="linenos">11</span>        <span class="na">multicast=</span><span class="s">&quot;default&quot;</span> <span class="nt">/&gt;</span>
<span class="linenos">12</span>      <span class="nt">&lt;/Interfaces&gt;</span>
<span class="linenos">13</span>      <span class="nt">&lt;AllowMulticast&gt;</span>default<span class="nt">&lt;/AllowMulticast&gt;</span>
<span class="linenos">14</span>      <span class="nt">&lt;MaxMessageSize&gt;</span>65500B<span class="nt">&lt;/MaxMessageSize&gt;</span>
<span class="linenos">15</span>    <span class="nt">&lt;/General&gt;</span>
<span class="linenos">16</span>    <span class="nt">&lt;Tracing&gt;</span>
<span class="linenos">17</span>      <span class="nt">&lt;Verbosity&gt;</span>config<span class="nt">&lt;/Verbosity&gt;</span>
<span class="linenos">18</span>      <span class="nt">&lt;OutputFile&gt;</span>
<span class="linenos">19</span>        ${HOME}/dds/log/cdds.log.${CYCLONEDDS_PID}
<span class="linenos">20</span>      <span class="nt">&lt;/OutputFile&gt;</span>
<span class="linenos">21</span>    <span class="nt">&lt;/Tracing&gt;</span>
<span class="linenos">22</span>  <span class="nt">&lt;/Domain&gt;</span>
<span class="linenos">23</span><span class="nt">&lt;/CycloneDDS&gt;</span>
</pre></div>
</div>
</div>
<section id="discovery-behaviour">
<span id="id1"></span><h2>Discovery Behaviour<a class="headerlink" href="#discovery-behaviour" title="Permalink to this headline">¶</a></h2>
<section id="proxy-participants-and-endpoints">
<span id="id2"></span><h3>Proxy Participants and Endpoints<a class="headerlink" href="#proxy-participants-and-endpoints" title="Permalink to this headline">¶</a></h3>
<p>Eclipse Cyclone DDS is what the DDSI specification calls a <em>stateful</em> implementation. Writers
only send data to discovered Readers, and Readers only accept data from discovered
Writers. (There is one exception: the wWriter may choose to multicast the data, and
anyone listening will be able to receive it. If a Reader has already discovered the
Writer but not vice-versa, it may accept the data even though the connection is not
fully established yet.</p>
<p>At present, not only can such asymmetrical discovery cause data to be delivered when it was
perhaps not expected, but it can also cause indefinite blocking if the situation persists
for a long time.) Consequently, for each remote participant
and Reader or Writer, Eclipse Cyclone DDS internally creates a proxy participant, proxy Reader
or proxy Writer. In the discovery process, Writers are matched with proxy Readers, and
Readers are matched with proxy Writers, based on the topic name, type name and the QoS
settings.</p>
<p>Proxies have the same natural hierarchy that ‘normal’ DDSI entities have: each proxy
endpoint is owned by some proxy participant, and once the proxy participant is deleted,
all of its proxy endpoints are deleted as well.  Participants assert their liveliness
periodically (called <em>automatic</em> liveliness in the DCPS specification, and the only mode
currently supported by Eclipse Cyclone DDS). When nothing has been heard from a participant
for the lease duration published by that participant in its SPDP message, the lease
becomes expired, triggering a clean-up.</p>
<p>Under normal circumstances, deleting endpoints triggers disposes and un-registers
in the SEDP protocol. Similarly, deleting a participant also creates special messages
that allow the peers to immediately reclaim resources instead of waiting for the lease
to expire.</p>
</section>
<section id="sharing-of-discovery-information">
<span id="id3"></span><h3>Sharing of Discovery Information<a class="headerlink" href="#sharing-of-discovery-information" title="Permalink to this headline">¶</a></h3>
<p>As Eclipse Cyclone DDS handles any number of participants in an integrated manner, the discovery
protocol as sketched earlier is rather wasteful. It is not necessary for each participant in a
Eclipse Cyclone DDS process to run the full discovery protocol for itself.</p>
<p>Instead of implementing the protocol as suggested by the standard, Eclipse Cyclone DDS shares
all discovery activities amongst the participants, allowing one to add participants to a
process with minimal impact on the system. It is also possible to have only a
single DDSI participant in a process regardless of the number of DCPS participants
created by the application code, which then becomes the virtual owner of
all the endpoints created in that one process. (See <a class="reference internal" href="#sharing-of-discovery-information"><span class="std std-ref">Sharing of Discovery Information</span></a>.)
In this latter mode, there is no discovery penalty for having
many participants, but any participant-based liveliness monitoring will be
affected.</p>
<p>Because other implementations of the DDSI specification may be written on the assumption
that all participants perform their own discovery, it is possible to simulate that with
Eclipse Cyclone DDS. It will not perform the discovery for each participant
independently, but it will generate the network traffic <em>as if</em> it does. These are
controlled by the <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-internal-builtinendpointset"><span class="std std-ref">Internal/BuiltinEndpointSet</span></a> option.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that at the time of writing, we are not aware of any DDSI implementation requiring the use of these
settings.</p>
</div>
<p>By sharing the discovery information across all participants in a single node, each
new participant or endpoint is immediately aware of the existing peers and will
directly try to communicate with these peers. This may generate some
redundant network traffic if these peers take significant time to
discover this new participant or endpoint.</p>
</section>
<section id="lingering-writers">
<span id="id4"></span><h3>Lingering Writers<a class="headerlink" href="#lingering-writers" title="Permalink to this headline">¶</a></h3>
<p>When an application deletes a reliable DCPS Writer, there is no guarantee that all
its Readers have already acknowledged the correct receipt of all samples. In such a
case, Eclipse Cyclone DDS lets the Writer (and the owning participant if necessary) linger in
the system for some time, controlled by the <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-internal-writerlingerduration"><span class="std std-ref">Internal/WriterLingerDuration</span></a> option.
The Writer is deleted when all Readers have acknowledged all samples or the
linger duration has elapsed, whichever comes first.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Writer linger duration setting is currently not applied when Eclipse Cyclone DDS
is requested to terminate.</p>
</div>
</section>
<section id="start-up-mode">
<span id="id5"></span><h3>Start-up Mode<a class="headerlink" href="#start-up-mode" title="Permalink to this headline">¶</a></h3>
<p>A similar issue exists when starting CycloneDDS: DDSI discovery takes time, and when
data is written immediately after the first participant was created, it is likely that
the discovery process hasn’t been completed yet, and some remote Readers have not yet been
discovered. This would cause the Writers to throw away samples for lack of interest,
even though matching Readers already existed at the starting time. For best-effort
Writers, this is perhaps surprising but still acceptable; for reliable Writers, however,
it would be very counter-intuitive.</p>
<p>Hence, in the so-called <em>start-up mode</em>, all volatile reliable Writers are
treated as transient-local Writers. Transient-local data is meant to ensure
samples are available to late-joining Readers. The start-up mode uses this exact
mechanism to ensure late-discovered Readers will also receive the data. This treatment of
volatile data as-if it were transient-local happens internally and is invisible to the
outside world, other than the availability of some samples that would not otherwise be available.</p>
<p>Once the initial discovery has been completed, new local Writers can be matched locally against
existing Readers. Consequently, new samples are published in a Writers history cache because
these existing Readers have not acknowledged them yet. Hence, this mode is tied to the start-up
of the DDSI stack rather than an individual Writer.</p>
<p>Unfortunately, it is impossible to detect with certainty when the initial discovery process has
been completed, and therefore an option controls the duration of this start-up mode:
<code class="docutils literal notranslate"><span class="pre">General/StartupModeDuration</span></code>.</p>
<p>Although the start-up mode is generally beneficial, its downside is that the Writers history
caches can grow significantly larger than expected during the start-up period. Consequently,
the extensive amounts of historical data may be transferred to Readers and discovered relatively
late in the process.</p>
</section>
<section id="writer-history-qos-and-throttling">
<span id="id6"></span><h3>Writer History QoS and Throttling<a class="headerlink" href="#writer-history-qos-and-throttling" title="Permalink to this headline">¶</a></h3>
<p>The DDSI specification heavily relies on the notion of a Writer history cache (WHC)
within which a sequence number uniquely identifies each sample. This WHC integrates two
different indices on the samples published by a Writer: one is on the sequence number, used
for retransmitting lost samples, and one is on key value and is used for retaining the
current state of each instance in the WHC.</p>
<p>The index on key value allows dropping samples from the index on sequence number when a
new sample overwrites the state of an instance. For transient-local, it conversely (also)
allows retaining the current state of each instance even when all Readers have acknowledged
a sample.</p>
<p>The index on sequence number is required for retransmitting old data, and is therefore
needed for all reliable Writers. The index on key values is always required for
transient-local data, and will by default also be used for other Writers using a history
setting of <code class="docutils literal notranslate"><span class="pre">KEEP_LAST</span></code>. In such a case, the advantage of an index on key value is superseded
samples can be dropped aggressively instead of delivering them to all Readers.
The disadvantage is that it is somewhat more resource-intensive.</p>
<p>The WHC distinguishes between history to be retained for existing Readers (controlled by
the Writer’s history QoS setting) and the history to be retained for late-joining
readers for transient-local writers (controlled by the topic’s durability-service
history QoS setting). This makes it possible to create a Writer that never overwrites
samples for live Readers while maintaining only the most recent samples for late-joining
readers. Moreover, it ensures that the data that is available for late-joining Readers
is the same for transient-local and for transient data.</p>
<p>Writer throttling is based on the WHC size using a simple controller. Once the WHC
contains at least <em>high</em> bytes in unacknowledged samples, it stalls the Writer until the
number of bytes in unacknowledged samples drops below <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-internal-watermarks-whclow"><span class="std std-ref">Internal/Watermarks/WhcLow</span></a>.
The value of <em>high</em> is dynamically adjusted between <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-internal-watermarks-whclow"><span class="std std-ref">Internal/Watermarks/WhcLow</span></a> and
<a class="reference internal" href="config_file_reference.html#cyclonedds-domain-internal-watermarks-whchigh"><span class="std std-ref">Internal/Watermarks/WhcHigh</span></a> based on transmit pressure and receive retransmit
requests. The initial value of <em>high</em> is <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-internal-watermarks-whchighinit"><span class="std std-ref">Internal/Watermarks/WhcHighInit</span></a> and the
adaptive behavior can be disabled by setting <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-internal-watermarks-whcadaptive"><span class="std std-ref">Internal/Watermarks/WhcAdaptive</span></a> to
false.</p>
<p>While the adaptive behaviour generally handles a variety of fast and slow Writers and
Readers quite well, the introduction of a very slow Reader with small buffers in an
existing network that is transmitting data at high rates can cause a sudden stop while
the new Reader tries to recover the large amount of data stored in the Writer, before
things can continue at a much lower rate.</p>
</section>
</section>
<section id="network-and-discovery-configuration">
<span id="id7"></span><h2>Network and Discovery Configuration<a class="headerlink" href="#network-and-discovery-configuration" title="Permalink to this headline">¶</a></h2>
<section id="networking-interfaces">
<span id="id8"></span><h3>Networking Interfaces<a class="headerlink" href="#networking-interfaces" title="Permalink to this headline">¶</a></h3>
<p>Eclipse Cyclone DDS can use multiple network interfaces simultaneously but defaults to using a single network interface.  The set of enabled interfaces determines the addresses that the host advertises in the discovery information.</p>
<section id="default-behaviour">
<h4>Default behaviour<a class="headerlink" href="#default-behaviour" title="Permalink to this headline">¶</a></h4>
<p>To determine the default network interface, the eligible interfaces are ranked by quality and then the interface with the highest quality is selected.  If multiple interfaces are of the highest quality, it will select the first enumerated one.  Eligible interfaces are those that are up and have the right kind of address family (IPv4 or IPv6).  Priority is then determined as follows:</p>
<ul class="simple">
<li><p>interfaces with a non-link-local address are preferred over those with
a link-local one;</p></li>
<li><p>multicast-capable is preferred (see also <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-general-interfaces-networkinterface-multicast"><span class="std std-ref">General/Interfaces/NetworkInterface[&#64;multicast]</span></a>), or if
none is available</p></li>
<li><p>non-multicast capable and not point-to-point, or if none is available</p></li>
<li><p>point-to-point, or if none is available</p></li>
<li><p>loopback</p></li>
</ul>
<p>If this procedure doesn’t select the desired interface automatically, it can be overridden by setting <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-general-interfaces"><span class="std std-ref">General/Interfaces</span></a> by adding the interface(s) either by name of the interface (<code class="docutils literal notranslate"><span class="pre">&lt;NetworkInterface</span> <span class="pre">name='interface_name'</span> <span class="pre">/&gt;</span></code>), the IP address of the host on the desired interface (<code class="docutils literal notranslate"><span class="pre">&lt;NetworkInterface</span> <span class="pre">address='128.129.0.42'</span> <span class="pre">/&gt;</span></code>), or the network portion of the IP address of the host on the desired interface (<code class="docutils literal notranslate"><span class="pre">&lt;NetworkInterface</span> <span class="pre">address='128.11.0.0'</span> <span class="pre">/&gt;</span></code>). An exact match on the address is always preferred and is the only option that allows selecting the desired one when multiple addresses are tied to a single interface.</p>
<p>The default address family is IPv4, setting General/Transport to <code class="docutils literal notranslate"><span class="pre">udp6</span></code> or <code class="docutils literal notranslate"><span class="pre">tcp6</span></code> will change this to IPv6.  Currently, Eclipse Cyclone DDS does not mix IPv4 and IPv6 addressing.  Consequently, all DDSI participants in the network must use the same addressing mode.  When inter-operating, this behaviour is the same, i.e., it will look at either IPv4 or IPv6 addresses in the advertised address information in the SPDP and SEDP discovery protocols.</p>
<p>IPv6 link-local addresses are considered undesirable because they need to be published and received via the discovery mechanism, but there is in general no way to determine to which interface a received link-local address is related.</p>
<p>If IPv6 is requested and the selected interface has a non-link-local address, Eclipse Cyclone DDS will operate in a <em>global addressing</em> mode and will only consider discovered non-link-local addresses.  In this mode, one can select any set of interfaces for listening to multicasts.  Note that this behaviour is essentially identical to that when using IPv4, as IPv4 does not have the formal notion of address scopes that IPv6 has.  If instead only a link-local address is available, Eclipse Cyclone DDS will run in a <em>link-local addressing</em> mode.  In this mode it will accept any address in a discovery packet, assuming that a link-local address is valid on the selected interface.  To minimise the risk involved in this assumption, it only allows the selected interface for listening to multicasts.</p>
</section>
<section id="multiple-network-interfaces">
<h4>Multiple network interfaces<a class="headerlink" href="#multiple-network-interfaces" title="Permalink to this headline">¶</a></h4>
<p>Multiple network interfaces can be used simultaneously, by listing multiple <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-general-interfaces-networkinterface"><span class="std std-ref">NetworkInterface</span></a> elements.  In this case, the above still applies, with most things extended in the obvious manner, e.g., the SPDP packets will now advertise multiple addresses and it will send these packets out on all interfaces.  That means the issue with <em>link-local addressing</em> discussed gains importance if link-local addresses are used, but they usually aren’t.</p>
<p>In a configuration with just a single network interface, it is obvious which one to use for sending packets to a peer.  When there are multiple network interfaces, it is necessary to establish the set of interfaces via which multicasts can be sent, because these are sent on a specific interface.  This in turn requires determining via which subset of interfaces a peer is reachable.</p>
<p>CycloneDDS approaches this by checking which interfaces match the addresses advertised by a peer in its SPDP or SEDP messages, under the assumption that in most cases the peer will be attached to at least one of the configured networks and that checking the network parts of the addresses will result in a subset of the interfaces.  The network interfaces in this subset are then the interfaces on which the peer is assumed to be reachable via multicast.</p>
<p>This leaves open two classes of addresses:</p>
<ul class="simple">
<li><p>Loopback addresses: these are ignored unless (1) the configuration has enabled only loopback interfaces, (2) no other addresses are advertised in the discovery message, or (3) a non-loopback address matches that of the machine.</p></li>
<li><p>Routable addresses that do not match an interface: these are ignored if the <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-general-dontroute"><span class="std std-ref">General/DontRoute</span></a> option is set, otherwise it is assumed that the network stack knows how to route them and any of the interfaces may be used.</p></li>
</ul>
<p>When a message needs to be sent to a set of peers, Eclipse Cyclone DDS aims use the set of addresses spanning the set of intended recipients with the lowest cost (number of nodes that receive it without having a use for it, unicast vs multicast, loopback vs real network interface, configured priority).  This is a variant of the set cover problem, and so Eclipse Cyclone DDS uses some heuristics rather than computing the optimal solution.  The address selection can be influenced in two ways:</p>
<ul class="simple">
<li><p>By using the <code class="docutils literal notranslate"><span class="pre">priority</span></code> attribute, which is used as an offset in the cost calculation.  The default configuration gives loopback interfaces a slightly higher priority than other network types.</p></li>
<li><p>By setting the <code class="docutils literal notranslate"><span class="pre">prefer_multicast</span></code> attribute, which raises the assumed cost of a unicast message.</p></li>
</ul>
<p>The <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-general-redundantnetworking"><span class="std std-ref">General/RedundantNetworking</span></a> setting furthermore forces the address selection code to cover all interfaces advertised by a peer.</p>
</section>
<section id="overriding-addresses-interfaces-for-readers-writers">
<h4>Overriding addresses/interfaces for readers/writers<a class="headerlink" href="#overriding-addresses-interfaces-for-readers-writers" title="Permalink to this headline">¶</a></h4>
<p>The <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-partitioning"><span class="std std-ref">Partitioning</span></a> element in the configuration allows configuring <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-partitioning-networkpartitions"><span class="std std-ref">NetworkPartition</span></a> elements and mapping topic/partition names to these “network partitions” using <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-partitioning-partitionmappings"><span class="std std-ref">PartitionMappings</span></a> elements.</p>
<p>Network partitions introduce alternative multicast addresses for data and/or restrict the set of unicast addresses (i.e., interfaces). In the DDSI discovery protocol, a reader can override the addresses at which it is reachable and this feature of the discovery protocol is used to advertise alternative multicast addresses and/or a subset of the unicast addresses. The writers in the network will use the addresses advertised by the reader rather than the default addresses advertised by the reader’s participant.</p>
<p>Unicast and multicast addresses in a network partition play different roles:</p>
<ul class="simple">
<li><p>The multicast addresses specify an alternative set of addresses to be used instead of the participant’s default. This is particularly useful to limit high-bandwidth flows to the parts of a network where the data is needed (for IP/Ethernet, this assumes switches that are configured to do IGMP snooping).</p></li>
<li><p>The unicast addresses not only influence the set of interfaces that will be used for unicast, but thereby also the set of interfaces that will be considered for use by multicast. Thus, specifying a unicast address matching network interface A ensures all traffic to that reader will be using interface A, whether unicast or multicast.</p></li>
</ul>
<p>Because the typical use of unicast addresses is to force traffic onto certain interfaces, the configuration also allows specifying interface names (using the <code class="docutils literal notranslate"><span class="pre">interface</span></code> attribute).</p>
<p>The mapping of a data reader or writer to a network partition is indirect: first the partition and topic are matched against a table of <em>partition mappings</em>, partition/topic combinations to obtain the name of a network partition, then the network partition name is used to find the addressing information. This makes it easier to map many different partition/topic combinations to the same multicast address without having to specify the actual multicast address many times over. If no match is found, the default addresses are used.</p>
<p>Matching proceeds in the order in which the partition mappings are specified in the configuration. The first matching mapping is the one that will be used. The <code class="docutils literal notranslate"><span class="pre">*</span></code> and <code class="docutils literal notranslate"><span class="pre">?</span></code> wildcards are available for the DCPS partition/topic combination in the partition mapping.</p>
<p>A single reader or writer is associated with a set of partitions, and each partition/topic combination can potentially map to a different network partition. In this case, the first matching network partition will be used. This does not affect what data the reader will receive; it only affects the addressing on the network.</p>
</section>
</section>
<section id="controlling-port-numbers">
<span id="id9"></span><h3>Controlling Port Numbers<a class="headerlink" href="#controlling-port-numbers" title="Permalink to this headline">¶</a></h3>
<p>The port numbers used by Eclipse Cyclone DDS are determined as follows, where the first two
items are given by the DDSI specification and the third is unique to Eclipse Cyclone DDS as a
way of serving multiple participants by a single DDSI instance:</p>
<ul class="simple">
<li><p>2 “well-known” multicast ports: <code class="docutils literal notranslate"><span class="pre">B</span></code> and <code class="docutils literal notranslate"><span class="pre">B+1</span></code></p></li>
<li><p>2 unicast ports at which only this instance is listening: <code class="docutils literal notranslate"><span class="pre">B+PG*PI+10</span></code> and
<code class="docutils literal notranslate"><span class="pre">B+PG*PI+11</span></code></p></li>
<li><p>1 unicast port per domain participant it serves, chosen by the kernel
from the anonymous ports, <em>i.e.</em> &gt;= 32768</p></li>
</ul>
<p>where:</p>
<ul class="simple">
<li><p><em>B</em> is <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-discovery-ports-base"><span class="std std-ref">Discovery/Ports/Base</span></a> (<code class="docutils literal notranslate"><span class="pre">7400</span></code>) + <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-discovery-ports-domaingain"><span class="std std-ref">Discovery/Ports/DomainGain</span></a>
(<code class="docutils literal notranslate"><span class="pre">250</span></code>) * <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-id"><span class="std std-ref">Domain[&#64;Id]</span></a></p></li>
<li><p><em>PG</em> is <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-discovery-ports-participantgain"><span class="std std-ref">Discovery/Ports/ParticipantGain</span></a> (<code class="docutils literal notranslate"><span class="pre">2</span></code>)</p></li>
<li><p><em>PI</em> is <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-discovery-participantindex"><span class="std std-ref">Discovery/ParticipantIndex</span></a></p></li>
</ul>
<p>The default values, taken from the DDSI specification, are in parentheses.  There are
actually even more parameters, here simply turned into constants as there is absolutely
no point in ever changing these values; however, they <em>are</em> configurable and the
interested reader can refer to the DDSI 2.1 or 2.2 specification, section 9.6.1.</p>
<p>PI is the most interesting, as it relates to having multiple processes in the same
domain on a single node. Its configured value is either <em>auto</em>, <em>none</em> or a non-negative
integer. This setting matters:</p>
<ul class="simple">
<li><p>When it is <em>auto</em>, Eclipse Cyclone DDS probes UDP port numbers on
start-up, starting with PI = 0, incrementing it by one each time until it finds a pair
of available port numbers, or it hits the limit.  The maximum PI it will ever choose
is <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-discovery-maxautoparticipantindex"><span class="std std-ref">Discovery/MaxAutoParticipantIndex</span></a> to limit the cost of unicast
discovery.</p></li>
<li><p>When it is <em>none</em> (which is the default) it simply ignores the “participant index”
altogether and asks the kernel to pick random ports (&gt;= 32768). This eliminates
the limit on the number of standalone deployments on a single machine and works
fine with multicast discovery while complying with all other parts of the
specification for interoperability. However, it is incompatible with unicast discovery.</p></li>
<li><p>When it is a non-negative integer, it is the value of PI in the above
calculations. If multiple processes on a single machine are needed, they will need
unique values for PI, and so for standalone deployments this particular alternative is
of little use.</p></li>
</ul>
<p>To fully control port numbers, setting <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-discovery-participantindex"><span class="std std-ref">Discovery/ParticipantIndex</span></a> (= PI) to
a hard-coded value is the only possibility. By fixing PI, the port numbers needed for
unicast discovery are fixed as well. This allows listing peers as IP:PORT pairs,
significantly reducing traffic, as explained in the preceding subsection.</p>
<p>The other non-fixed ports that are used are the per-domain participant ports, the third
item in the list. These are used only because there exist some DDSI implementations
that assume each domain participant advertises a unique port number as part of the
discovery protocol, and hence that there is never any need for including an explicit
destination participant id when intending to address a single domain participant by
using its unicast locator. Eclipse Cyclone DDS never makes this assumption, instead opting to
send a few bytes extra to ensure the contents of a message are all that is needed. With
other implementations, you will need to check.</p>
<p>If all DDSI implementations in the network include full addressing information in the
messages like Eclipse Cyclone DDS does, then the per-domain participant ports serve no purpose
at all. The default <code class="docutils literal notranslate"><span class="pre">false</span></code> setting of <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-compatibility-manysocketsmode"><span class="std std-ref">Compatibility/ManySocketsMode</span></a> disables the
creation of these ports.</p>
<p>This setting can have a few other side benefits, as there may be multiple
DCPS participants using the same unicast locator. This improves the chances of a single
unicast sufficing even when addressing multiple participants.</p>
</section>
<section id="multicasting">
<span id="id10"></span><h3>Multicasting<a class="headerlink" href="#multicasting" title="Permalink to this headline">¶</a></h3>
<p>Eclipse Cyclone DDS allows configuring to what extent multicast (the regular, any-source
multicast as well as source-specific multicast) is to be used:</p>
<ul class="simple">
<li><p>whether to use multicast for data communications,</p></li>
<li><p>whether to use multicast for participant discovery,</p></li>
<li><p>on which interfaces to listen for multicasts.</p></li>
</ul>
<p>It is advised to allow multicasting to be used.  However, if there are restrictions on
the use of multicasting, or if the network reliability is dramatically different for
multicast than for unicast, it may be attractive to disable multicast for normal
communications.  In this case, setting <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-general-allowmulticast"><span class="std std-ref">General/AllowMulticast</span></a> to <code class="docutils literal notranslate"><span class="pre">false</span></code> will
force the use of unicast communications for everything.</p>
<p>If at all possible, it is strongly advised to leave multicast-based participant
discovery enabled, because that avoids having to specify a list of nodes to contact, and
it furthermore reduces the network load considerably.  Setting
<a class="reference internal" href="config_file_reference.html#cyclonedds-domain-general-allowmulticast"><span class="std std-ref">General/AllowMulticast</span></a> to <code class="docutils literal notranslate"><span class="pre">spdp</span></code> will allow participant discovery via multicast
while disabling multicast for everything else.</p>
<p>To disable incoming multicasts, or to control from which interfaces multicasts are to be
accepted, one can use the <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-general-multicastrecvnetworkinterfaceaddresses"><span class="std std-ref">General/MulticastRecvNetworkInterfaceAddresses</span></a> setting.  This
allows listening on no interface, the preferred, all or a specific set of interfaces.</p>
</section>
<section id="tcp-support">
<span id="id11"></span><h3>TCP Support<a class="headerlink" href="#tcp-support" title="Permalink to this headline">¶</a></h3>
<p>The DDSI protocol is a protocol designed to provide a connectionless transport with
unreliable datagrams. However, there are times where TCP is the only
practical network transport available (for example, across a WAN). This is the reason
Eclipse Cyclone DDS can use TCP instead of UDP if needed.</p>
<p>The differences in the model of operation between DDSI and TCP are quite large: DDSI is
based on the notion of peers, whereas TCP communication is based on the notion of a
session that is initiated by a “client” and accepted by a “server”; therefore, TCP requires
knowledge of the servers to connect to before the DDSI discovery protocol can exchange
that information. The configuration of this is done in the same manner as for
unicast-based UDP discovery.</p>
<p>TCP reliability is defined in terms of these sessions, but DDSI reliability is defined
in terms of DDSI discovery and liveliness management. It is therefore possible that a
TCP connection is (forcibly) closed while the remote endpoint is still considered alive.
Following a reconnect, the samples lost when the TCP connection was closed can be
recovered via the standard DDSI reliability. This also means that the Heartbeats and
AckNacks still need to be sent over a TCP connection, and consequently that DDSI
flow-control occurs on top of TCP flow-control.</p>
<p>Another point worth noting is that connection establishment potentially takes a long
time, and that giving up on a transmission to a failed or no longer reachable host can
also take a long time. These long delays can be visible at the application level at
present.</p>
<section id="tls-support">
<span id="id12"></span><h4>TLS Support<a class="headerlink" href="#tls-support" title="Permalink to this headline">¶</a></h4>
<p>The TCP mode can be used together with TLS to provide mutual authentication and
encryption. When TLS is enabled, plain TCP connections are no longer accepted or
initiated.</p>
</section>
</section>
<section id="raw-ethernet-support">
<span id="id13"></span><h3>Raw Ethernet Support<a class="headerlink" href="#raw-ethernet-support" title="Permalink to this headline">¶</a></h3>
<p>As an additional option, on Linux, Eclipse Cyclone DDS can use a raw Ethernet network interface
to communicate without a configured IP stack.</p>
</section>
<section id="discovery-configuration">
<span id="id14"></span><h3>Discovery Configuration<a class="headerlink" href="#discovery-configuration" title="Permalink to this headline">¶</a></h3>
<section id="discovery-addresses">
<span id="id15"></span><h4>Discovery Addresses<a class="headerlink" href="#discovery-addresses" title="Permalink to this headline">¶</a></h4>
<p>The DDSI discovery protocols, SPDP for the domain participants and SEDP for their
endpoints, usually operate well without any explicit configuration. Indeed, the SEDP
protocol never requires any configuration.</p>
<p>The SPDP protocol periodically sends, for each domain participant, an SPDP sample to a
set of addresses, which by default contains just the multicast address, which is
standardised for IPv4 (<code class="docutils literal notranslate"><span class="pre">239.255.0.1</span></code>) but not for IPv6 (it uses
<code class="docutils literal notranslate"><span class="pre">ff02::ffff:239.255.0.1</span></code>). The actual address can be overridden using the
<a class="reference internal" href="config_file_reference.html#cyclonedds-domain-discovery-spdpmulticastaddress"><span class="std std-ref">Discovery/SPDPMulticastAddress</span></a>
setting, which requires a valid multicast address.</p>
<p>In addition (or as an alternative) to the multicast-based discovery, any number of
unicast addresses can be configured as addresses to be contacted by specifying peers in
the <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-discovery-peers"><span class="std std-ref">Discovery/Peers</span></a> section. Each time an SPDP message is sent, it is sent to all
of these addresses.</p>
<p>The default behaviour is to include each IP address several times in the set (for
participant indices 0 through <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-discovery-maxautoparticipantindex"><span class="std std-ref">Discovery/MaxAutoParticipantIndex</span></a>, each time with a different
UDP port number (corresponding to another participant index), allowing at least several
applications to be present on these hosts.</p>
<p>Configuring several peers in this way causes a large burst of packets
to be sent each time an SPDP message is sent out, and each local DDSI participant
causes a burst of its own. Most participant indices will not be used,
making this rather wasteful behaviour.</p>
<p>To avoid sending large numbers of packets to each host, differing only in port number,
it is also possible to add a port number to the IP address, formatted as IP:PORT, but
this requires manually calculating the port number. In practice it also requires fixing
the participant index using <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-discovery-participantindex"><span class="std std-ref">Discovery/ParticipantIndex</span></a> (see the description of “PI”
in <a class="reference internal" href="#controlling-port-numbers">Controlling port numbers</a>) to ensure that the configured port number indeed
corresponds to the port number the remote DDSI implementation is listening on, and
therefore is attractive only when it is known that there is but a single DDSI
process on that node.</p>
</section>
<section id="asymmetrical-discovery">
<span id="id17"></span><h4>Asymmetrical Discovery<a class="headerlink" href="#asymmetrical-discovery" title="Permalink to this headline">¶</a></h4>
<p>On reception of an SPDP packet, the addresses advertised in the packet are added to the
set of addresses to which SPDP packets are sent periodically, allowing asymmetrical
discovery. In an extreme example, if SPDP multicasting is disabled entirely, host A has
the address of host B in its peer list, and host B has an empty peer list, B will
eventually discover A because of an SPDP message sent by A, at which point it adds A’s
address to its own set and starts sending its SPDP message to A, allowing A to
discover B. This takes longer than normal multicast based discovery, though, and
risks Writers being blocked by unresponsive Readers.</p>
</section>
<section id="timing-of-spdp-packets">
<span id="id18"></span><h4>Timing of SPDP Packets<a class="headerlink" href="#timing-of-spdp-packets" title="Permalink to this headline">¶</a></h4>
<p>The interval with which the SPDP packets are transmitted is configurable, using
the <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-discovery-spdpinterval"><span class="std std-ref">Discovery/SPDPInterval</span></a> setting. A longer interval reduces the network load, but
also increases the time discovery takes, especially in the face of temporary network
disconnections.</p>
</section>
<section id="endpoint-discovery">
<span id="id19"></span><h4>Endpoint Discovery<a class="headerlink" href="#endpoint-discovery" title="Permalink to this headline">¶</a></h4>
<p>Although the SEDP protocol never requires any configuration, network partitioning does
interact with it. The “ignored partitions” option can be used to instruct Eclipse Cyclone DDS
to completely ignore specific DCPS topics and partition combinations. Using the “ignored
partitions” option prevents data for these topic/partition combinations from being
forwarded to and from the network.</p>
</section>
</section>
</section>
<section id="combining-multiple-participants">
<span id="id20"></span><h2>Combining Multiple Participants<a class="headerlink" href="#combining-multiple-participants" title="Permalink to this headline">¶</a></h2>
<p>If a single process creates multiple participants, these are mirrored in DDSI
participants, so that a single process can appear like an extensive system with many
participants. The <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-internal-squashparticipants"><span class="std std-ref">Internal/SquashParticipants</span></a>
option can be used to simulate the existence of only one participant, which owns all
endpoints on that node. This reduces the background messages because far fewer liveliness
assertions need to be sent, but there are some downsides.</p>
<p>Firstly, the liveliness monitoring features related to domain participants will
be affected if multiple DCPS domain participants are combined into a single DDSI domain
participant. For the “automatic” liveliness setting, this is not an issue.</p>
<p>Secondly, this option makes it impossible for tooling to show the system
topology.</p>
<p>Thirdly, the QoS of this sole participant is simply that of the first participant
created in the process. In particular, no matter what other participants specify as
their “user data”, it will not be visible on remote nodes.</p>
<p>An alternative that sits between squashing participants and normal operation,
is setting <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-internal-builtinendpointset"><span class="std std-ref">Internal/BuiltinEndpointSet</span></a> to <code class="docutils literal notranslate"><span class="pre">minimal</span></code>.
In the default setting, each DDSI participant handled has its Writers for
built-in topics and publishes discovery data on its entities, but when set to “minimal”,
only the first participant has these Writers and publishes data on all entities. This is not fully
compatible with other implementations as it means endpoint discovery data can be
received for a participant that has not yet been discovered.</p>
</section>
<section id="data-path-configuration">
<span id="id21"></span><h2>Data Path Configuration<a class="headerlink" href="#data-path-configuration" title="Permalink to this headline">¶</a></h2>
<section id="re-transmit-merging">
<span id="retransmit-merging"></span><h3>Re-Transmit Merging<a class="headerlink" href="#re-transmit-merging" title="Permalink to this headline">¶</a></h3>
<p>A remote Reader can request re-transmission whenever it receives a Heartbeat and detects
missing samples. If a sample was lost on the network for many or all Readers, the
next heartbeat would likely trigger a “storm” of re-transmission requests. Thus, the
Writer should attempt merging these requests into a multicast re-transmission to avoid
re-transmitting the same sample over &amp; over again to many different Readers. Similarly,
while Readers should try to avoid requesting re-transmissions too often, in an
interoperable system, the Writers should be robust against it.</p>
<p>In Eclipse Cyclone DDS, upon receiving a Heartbeat that indicates samples are missing, a Reader
will schedule the second and following re-transmission requests to be sent after
<a class="reference internal" href="config_file_reference.html#cyclonedds-domain-internal-nackdelay"><span class="std std-ref">Internal/NackDelay</span></a> or combine it with an
already scheduled request if possible. Any samples received between receipt of the Heartbeat
and the sending of the AckNack will not need to be re-transmitted.</p>
<p>Secondly, a Writer attempts to combine re-transmit requests in two different ways. The
first is to change messages from unicast to multicast when another re-transmit request
arrives while the re-transmit has not yet occurred. This is particularly effective
when bandwidth limiting causes a backlog of samples to be re-transmitted. The second behaviour
can be configured using the <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-internal-retransmitmerging"><span class="std std-ref">Internal/ReTransmitMerging</span></a> setting. Based
on this setting, a re-transmit request for a sample is either honoured unconditionally,
or it may be suppressed (or “merged”) if it comes in shortly after a multicasted
re-transmission of that very sample, on the assumption that the second reader will likely
receive the re-transmit, too. The <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-internal-retransmitmergingperiod"><span class="std std-ref">Internal/ReTransmitMergingPeriod</span></a> controls the
length of this time window.</p>
</section>
<section id="re-transmit-backlogs">
<span id="id22"></span><h3>Re-Transmit Backlogs<a class="headerlink" href="#re-transmit-backlogs" title="Permalink to this headline">¶</a></h3>
<p>Another issue is that a Reader can request re-transmission of many samples at once. When
the Writer queues all these samples for re-transmission, it may result in a
considerable backlog of samples to be re-transmitted. As a result, the ones near the
queue’s end may be delayed so much that the Reader issues another re-transmit request.</p>
<p>Therefore, Eclipse Cyclone DDS limits the number of samples queued for re-transmission and
ignores (those parts of) re-transmission requests that would cause the re-transmit queue
to contain too many samples or take too much time to process. Two settings govern the size
of these queues, and the limits are applied per timed-event thread.
The first is <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-internal-maxqueuedrexmitmessages"><span class="std std-ref">Internal/MaxQueuedRexmitMessages</span></a>, which limits the number of re-transmit
messages, the second <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-internal-maxqueuedrexmitbytes"><span class="std std-ref">Internal/MaxQueuedRexmitBytes</span></a> which limits the number of bytes.
The latter defaults to a setting based on the combination of the allowed transmit
bandwidth and the <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-internal-nackdelay"><span class="std std-ref">Internal/NackDelay</span></a> setting as an approximation of the likely time
until the next potential re-transmit request from the Reader.</p>
</section>
<section id="controlling-fragmentation">
<span id="id23"></span><h3>Controlling Fragmentation<a class="headerlink" href="#controlling-fragmentation" title="Permalink to this headline">¶</a></h3>
<p>Samples in DDS can be arbitrarily large, and will not always fit within a single
datagram. DDSI has facilities to fragment samples so they can fit in UDP datagrams, and
similarly IP has facilities to fragment UDP datagrams into network packets. The DDSI
specification states that one must not unnecessarily fragment at the DDSI level, but
Eclipse Cyclone DDS provides a fully configurable behaviour.</p>
<p>If the serialised form of a sample is at least <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-general-fragmentsize"><span class="std std-ref">General/FragmentSize</span></a>,
it will be fragmented using the DDSI fragmentation. All but the last fragment
will be this exact size; the last one may be smaller.</p>
<p>Control messages, non-fragmented samples, and sample fragments are all subject to
packing into datagrams before sending it out on the network, based on various attributes
such as the destination address, to reduce the number of network packets. This packing
allows datagram payloads of up to <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-general-maxmessagesize"><span class="std std-ref">General/MaxMessageSize</span></a>, overshooting this size if
the set maximum is too small to contain what must be sent as a single unit.
In that case it no longer matters where the data is rejected: there is a real problem anyway.</p>
<p>UDP/IP header sizes are not taken into account in the maximum message size.</p>
<p>The IP layer then takes this UDP datagram, possibly fragmenting it into multiple packets
to stay within the maximum size the underlying network supports. A trade-off
is that while DDSI fragments can be re-transmitted individually, the processing overhead
of DDSI fragmentation is larger than that of UDP fragmentation.</p>
</section>
<section id="receive-processing">
<span id="id25"></span><h3>Receive Processing<a class="headerlink" href="#receive-processing" title="Permalink to this headline">¶</a></h3>
<p>Receiving of data is split into multiple threads:</p>
<ul class="simple">
<li><p>A single receive thread responsible for retrieving network packets and running
the protocol state machine;</p></li>
<li><p>A delivery thread dedicated to processing DDSI built-in data: participant
discovery, endpoint discovery, and liveliness assertions;</p></li>
<li><p>One or more delivery threads dedicated to the handling of application data:
deserialisation and delivery to the DCPS data Reader caches.</p></li>
</ul>
<p>The receive thread is responsible for retrieving all incoming network packets, running
the protocol state machine, which involves scheduling of AckNack and Heartbeat messages
and queueing of samples that must be retransmitted, and for defragmenting and ordering
incoming samples.</p>
<p>Fragmented data first enters the defragmentation stage, which is per proxy Writer. The
number of samples that can be defragmented simultaneously is limited for reliable data
to <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-internal-defragreliablemaxsamples"><span class="std std-ref">Internal/DefragReliableMaxSamples</span></a> and for unreliable data to
<a class="reference internal" href="config_file_reference.html#cyclonedds-domain-internal-defragunreliablemaxsamples"><span class="std std-ref">Internal/DefragUnreliableMaxSamples</span></a>.</p>
<p>Samples (defragmented if necessary) received out of sequence are buffered, primarily per
proxy Writer, but, secondarily, per Reader catching up on historical (transient-local)
data. The size of the first is limited to <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-internal-primaryreordermaxsamples"><span class="std std-ref">Internal/PrimaryReorderMaxSamples</span></a>, the
size of the second to <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-internal-secondaryreordermaxsamples"><span class="std std-ref">Internal/SecondaryReorderMaxSamples</span></a>.</p>
<p>In between the receive thread and the delivery threads sit queues, of which the maximum
size is controlled by the <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-internal-deliveryqueuemaxsamples"><span class="std std-ref">Internal/DeliveryQueueMaxSamples</span></a> setting.  Generally there
is no need for these queues to be very large (unless one has very small samples in very
large messages), their primary function is to smooth out the processing when batches of
samples become available at once, for example following a retransmission.</p>
<p>When any of these receive buffers hit their size limit, and it concerns application data,
the receive thread will wait for the queue to shrink (a compromise that is the lesser
evil within the constraints of various other choices). However, discovery data will
never block the receive thread.</p>
</section>
<section id="minimising-receive-latency">
<span id="id26"></span><h3>Minimising Receive Latency<a class="headerlink" href="#minimising-receive-latency" title="Permalink to this headline">¶</a></h3>
<p>In low-latency environments, a few microseconds can be gained by processing the
application data directly in the receive thread, or synchronously with respect to the
incoming network traffic, instead of queueing it for asynchronous processing by a
delivery thread. This happens for data transmitted with the <em>max_latency</em> QoS setting at
most a configurable value and the <em>transport_priority</em> QoS setting at least a
configurable value. By default, these values are <code class="docutils literal notranslate"><span class="pre">inf</span></code> and the maximum transport
priority, effectively enabling synchronous delivery for all data.</p>
</section>
<section id="maximum-sample-size">
<span id="id27"></span><h3>Maximum Sample Size<a class="headerlink" href="#maximum-sample-size" title="Permalink to this headline">¶</a></h3>
<p>Eclipse Cyclone DDS provides a setting, <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-internal-maxsamplesize"><span class="std std-ref">Internal/MaxSampleSize</span></a>, to control the maximum size
of samples the service is willing to process. The size is the size of the (CDR)
serialised payload, and the limit holds both for built-in data and for application data.
The (CDR) serialised payload is never larger than the in-memory representation of the
data.</p>
<p>On the transmitting side, samples larger than <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-internal-maxsamplesize"><span class="std std-ref">Internal/MaxSampleSize</span></a> are dropped with a
warning. Eclipse Cyclone DDS behaves as if the sample never existed.</p>
<p>Similarly, on the receiving side, samples larger than <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-internal-maxsamplesize"><span class="std std-ref">Internal/MaxSampleSize</span></a> are dropped as
early as possible, immediately following the reception of a sample or fragment of one,
to prevent any resources from being claimed for longer than strictly necessary. Where
the transmitting side completely ignores the sample, the receiving side pretends the
sample has been correctly received acknowledges reception to the Writer.
This allows communication to continue.</p>
<p>When the receiving side drops a sample, Readers will receive a <em>sample lost</em> notification with
the next delivered sample. This notification is easily missed, so ultimately the only reliable way of determining
whether samples have been dropped or not is checking the logs.</p>
<p>While dropping samples (or fragments thereof) as early as possible is beneficial from
the point of view of reducing resource usage, it can make it hard to decide whether or
not dropping a particular sample has been recorded in the log already. Under normal
operational circumstances, only a single message will be recorded for each sample
dropped, but it may occasionally report multiple events for the same sample.</p>
<p>Finally, it is technically permitted to set <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-internal-maxsamplesize"><span class="std std-ref">Internal/MaxSampleSize</span></a> to very small sizes,
even to the point that the discovery data can no longer be communicated.
The dropping of the discovery data will be reported as normal, but the utility
of such a configuration seems doubtful.</p>
</section>
</section>
<section id="network-partition-configuration">
<span id="id28"></span><h2>Network Partition Configuration<a class="headerlink" href="#network-partition-configuration" title="Permalink to this headline">¶</a></h2>
<section id="network-partition-configuration-overview">
<span id="id29"></span><h3>Network Partition Configuration Overview<a class="headerlink" href="#network-partition-configuration-overview" title="Permalink to this headline">¶</a></h3>
<p>Network partitions introduce alternative multicast addresses for data. In the DDSI
discovery protocol, a Reader can override the default address at which it is reachable,
and this feature of the discovery protocol is used for advertising alternative multicast
addresses. The DDSI Writers in the network will (also) multicast to such an alternative
multicast address when multicasting samples or control data.</p>
<p>The mapping of a DCPS data Reader to a network partition is indirect: first, the DCPS
partitions and topic are matched against a table of <em>partition mappings</em>,
partition/topic combinations to obtain the name of a network partition, then the network
partition name is used to find addressing information. This makes it easier to map
many different partition/topic combinations to the same multicast address without specifying
the actual multicast address many times over.</p>
<p>In the case no match is found, the default multicast address is used.</p>
</section>
<section id="matching-rules">
<span id="id30"></span><h3>Matching Rules<a class="headerlink" href="#matching-rules" title="Permalink to this headline">¶</a></h3>
<p>The matching of a DCPS partition/topic combination proceeds in the order in which the
partition mappings are specified in the configuration. The first matching mapping is
the one that will be used. The <code class="docutils literal notranslate"><span class="pre">*</span></code> and <code class="docutils literal notranslate"><span class="pre">?</span></code> wildcards are available for the DCPS
partition/topic combination in the partition mapping.</p>
<p>As mentioned earlier, Eclipse Cyclone DDS can be instructed to ignore all DCPS data
Readers and Writers for certain DCPS partition/topic combinations through the use of
<a class="reference internal" href="config_file_reference.html#cyclonedds-domain-partitioning-ignoredpartitions"><span class="std std-ref">Partitioning/IgnoredPartitions</span></a>.
The ignored partitions use the same matching rules as normal mappings, and take precedence
over the normal mappings.</p>
</section>
<section id="multiple-matching-mappings">
<span id="id31"></span><h3>Multiple Matching Mappings<a class="headerlink" href="#multiple-matching-mappings" title="Permalink to this headline">¶</a></h3>
<p>A single DCPS data Reader can be associated with a set of partitions, and each
partition/topic combination can potentially map to different network partitions. In
this case, the first matching network partition will be used. This does not affect what
data the Reader will receive; it only affects the addressing on the network.</p>
</section>
</section>
<section id="thread-configuration">
<span id="id32"></span><h2>Thread Configuration<a class="headerlink" href="#thread-configuration" title="Permalink to this headline">¶</a></h2>
<p>Eclipse Cyclone DDS creates several threads, each with a number of
properties that can be controlled individually. These properties are:</p>
<ul class="simple">
<li><p>stack size,</p></li>
<li><p>scheduling class, and</p></li>
<li><p>scheduling priority.</p></li>
</ul>
<p>Each thread is uniquely named and using that name with the <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-threads-thread-name"><span class="std std-ref">Threads/Thread[&#64;name]</span></a>
option can be used to set the properties for that thread. Any subset of threads can be given special properties;
anything not specified explicitly is left at the default value.</p>
<p>The following threads exist:</p>
<blockquote>
<div><table class="docutils align-left">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">gc</span></code></p></td>
<td><p>Garbage collector, which sleeps until garbage collection is requested for an entity, at which point it starts monitoring the state of Eclipse Cyclone DDS, pushing the entity through whatever state transitions are needed once it is safe to do so, ending with the freeing of the memory.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">recv</span></code></p></td>
<td><p>Accepts incoming network packets from all sockets/ports, performs all protocol processing, queues (nearly) all protocol messages sent in response for handling by the timed-event thread, queues for delivery or, in special cases, delivers it directly to the data Readers.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">dq.builtins</span></code></p></td>
<td><p>Processes all discovery data coming in from the network.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">lease</span></code></p></td>
<td><p>Performs internal liveliness monitoring of Eclipse Cyclone DDS.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">tev</span></code></p></td>
<td><p>Timed-event handling, used for all kinds of things, such as periodic transmission of participant discovery and liveliness messages, transmission of control messages for reliable Writers and Readers (except those that have their own timed-event thread), retransmitting of reliable data on request (except those that have their own timed-event thread), and handling of start-up mode to normal mode transition.</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>and, for each defined channel:</p>
<blockquote>
<div><table class="docutils align-left">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">dq.channel-name</span></code></p></td>
<td><p>Deserialisation and asynchronous delivery of all user data.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">tev.channel-name</span></code></p></td>
<td><p>Channel-specific “timed-event” handling transmission of control messages for reliable Writers and Readers and retransmission of data on request. Channel-specific threads exist only if the configuration includes an element for it or if an auxiliary bandwidth limit is set for the channel.</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>When no channels are explicitly defined, there is one channel named <em>user</em>.</p>
</section>
<section id="reporting-and-tracing">
<span id="id33"></span><h2>Reporting and Tracing<a class="headerlink" href="#reporting-and-tracing" title="Permalink to this headline">¶</a></h2>
<p>Eclipse Cyclone DDS can produce highly detailed traces of all traffic and internal activities.
It enables individual categories of information and a simple verbosity
level that enables fixed sets of categories.</p>
<p>The categorisation of tracing output is incomplete, hence most of the verbosity
levels and categories are useless in the current release. This is an ongoing
process and here we describe the target rather than the current situation.</p>
<p>All <em>fatal</em> and <em>error</em> messages are written both to the trace and to the
<code class="docutils literal notranslate"><span class="pre">cyclonedds-error.log</span></code> file; similarly all “warning” messages are written to the trace
and the <code class="docutils literal notranslate"><span class="pre">cyclonedds-info.log</span></code> file.</p>
<p>The Tracing element has the following sub elements:</p>
<ul>
<li><p><em>Verbosity</em>:
selects a tracing level by enabling a pre-defined set of categories. The
list below gives the known tracing levels, and the categories they enable:</p>
<table class="docutils align-left">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">none</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">severe</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">error</span></code>, <code class="docutils literal notranslate"><span class="pre">fatal</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">warning</span></code>, <code class="docutils literal notranslate"><span class="pre">info</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">severe</span></code>, <code class="docutils literal notranslate"><span class="pre">warning</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">config</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">info</span></code>, <code class="docutils literal notranslate"><span class="pre">config</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">fine</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">config</span></code>, <code class="docutils literal notranslate"><span class="pre">discovery</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">finer</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">fine</span></code>, <code class="docutils literal notranslate"><span class="pre">traffic</span></code>, <code class="docutils literal notranslate"><span class="pre">timing</span></code>, <code class="docutils literal notranslate"><span class="pre">info</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">finest</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">fine</span></code>, <code class="docutils literal notranslate"><span class="pre">trace</span></code></p></td>
</tr>
</tbody>
</table>
</li>
<li><p><em>EnableCategory</em>:
a comma-separated list of keywords, each keyword enabling
individual categories. The following keywords are recognised:</p>
<table class="docutils align-left">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">fatal</span></code></p></td>
<td><p>All fatal errors, errors causing immediate termination.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">error</span></code></p></td>
<td><p>Failures probably impacting correctness but not necessarily causing immediate termination.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">warning</span></code></p></td>
<td><p>Abnormal situations that will likely not impact correctness.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">config</span></code></p></td>
<td><p>Full dump of the configuration.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">info</span></code></p></td>
<td><p>General informational notices.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">discovery</span></code></p></td>
<td><p>All discovery activity.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">data</span></code></p></td>
<td><p>Include data content of samples in traces.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">timing</span></code></p></td>
<td><p>Periodic reporting of CPU loads per thread.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">traffic</span></code></p></td>
<td><p>Periodic reporting of total outgoing data.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">tcp</span></code></p></td>
<td><p>Connection and connection cache management for the TCP support.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">throttle</span></code></p></td>
<td><p>Throttling events where the Writer stalls because its WHC hit the high-water mark.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">topic</span></code></p></td>
<td><p>Detailed information on topic interpretation (in particular topic keys).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">plist</span></code></p></td>
<td><p>Dumping of parameter lists encountered in discovery and inline QoS.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">radmin</span></code></p></td>
<td><p>Receive buffer administration.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">whc</span></code></p></td>
<td><p>Very detailed tracing of WHC content management.</p></td>
</tr>
</tbody>
</table>
</li>
</ul>
<p>In addition, the keyword <em>trace</em> enables everything from <em>fatal</em> to <em>throttle</em>. The
<em>topic</em> and <em>plist</em> ones are useful only for particular classes of discovery failures;
and <em>radmin</em> and <em>whc</em> only help in analysing the detailed behaviour of those two
components and produce significant amounts of output.</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="config_file_reference.html#cyclonedds-domain-tracing-outputfile"><span class="std std-ref">OutputFile</span></a>: the file to write the trace to</p></li>
<li><p><a class="reference internal" href="config_file_reference.html#cyclonedds-domain-tracing-appendtofile"><span class="std std-ref">AppendToFile</span></a>: boolean, set to <code class="docutils literal notranslate"><span class="pre">true</span></code> to append to the trace instead of replacing the
file.</p></li>
</ul>
</div></blockquote>
<p>Currently, the useful verbosity settings are <em>config</em>, <em>fine</em>, and <em>finest</em>.</p>
<p><em>Config</em> writes the complete configuration to the trace file and any warnings or
errors, which can be an effective method to verify that everything is configured
and behaving as expected.</p>
<p><em>Fine</em> adds the complete discovery information in the trace, but nothing
related to application data or protocol activities. If a system has a stable topology,
this will therefore typically result in a moderate size trace.</p>
<p><em>Finest</em> provides a detailed trace of everything that occurs and is an
indispensable source of information when analysing problems; however,
it also requires a significant amount of time and results in huge log files.</p>
<p>Whether these logging levels are set using the verbosity level or by enabling the
corresponding categories is immaterial.</p>
</section>
<section id="compatibility-and-conformance">
<span id="id34"></span><h2>Compatibility and Conformance<a class="headerlink" href="#compatibility-and-conformance" title="Permalink to this headline">¶</a></h2>
<section id="conformance-modes">
<span id="id35"></span><h3>Conformance Modes<a class="headerlink" href="#conformance-modes" title="Permalink to this headline">¶</a></h3>
<p>Eclipse Cyclone DDS operates in one of three modes: <em>pedantic</em>, <em>strict</em>, and <em>lax</em>; the mode is
configured using the <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-compatibility-standardsconformance"><span class="std std-ref">Compatibility/StandardsConformance</span></a> setting. The default is
<em>lax</em>.</p>
<p>The first, <em>pedantic</em> mode, is of such limited utility that it will be removed.</p>
<p>The second mode, <em>strict</em>, attempts to follow the <em>intent</em> of the specification while
staying close to the letter of it. Recent developments at the OMG have resolved these
issues, and this mode is no longer of any value.</p>
<p>The default mode, <em>lax</em>, attempts to work around (most of) the deviations of other
implementations, and generally provides good interoperability without any further
settings. In lax mode, the Eclipse Cyclone DDS not only accepts some invalid messages,
but will even transmit them. The consequences for interoperability of not doing this are
too severe.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If one configures two Eclipse Cyclone DDS processes with
different compliancy modes, the one in the stricter mode will complain about messages
sent by the one in the less strict mode.</p>
</div>
</section>
<section id="rti-compatibility-issues">
<span id="compatibility-issues-with-rti"></span><h3>RTI Compatibility Issues<a class="headerlink" href="#rti-compatibility-issues" title="Permalink to this headline">¶</a></h3>
<p>In <em>lax</em> mode, most topic types should not have significant issues when working across a
network. Previously within a single host, there was an issue with how RTI DDS uses or attempts
to use its shared memory transport to communicate with peers, even when they advertise only
UDP/IP addresses. The result is an inability to establish bidirectional communication between
the two reliably.</p>
<p>Disposing of data may also cause problems, as RTI DDS leaves out the serialised key value
and expects the Reader to rely on an embedded hash of the key value. In the
strict modes, CycloneDDS requires a valid key value to be supplied; in the relaxed
mode, it is willing to accept key hash, provided it is of a form that contains the key
values in an unmangled form.</p>
<p>If an RTI DDS DataWriter disposes of an instance with a key of which the serialised
representation may be larger than 16 bytes, this problem is likely to occur. In
practice, the most likely cause is using a key as a string, either unbounded, or with a
maximum length larger than 11 bytes. See the DDSI specification for details.</p>
<p>In <em>strict</em> mode, there is interoperation with RTI DDS, but at the cost of incredibly
high CPU and network load, caused by a Heartbeats and AckNacks going back-and-forth
between a reliable RTI DDS DataWriter and a reliable CycloneDDS data Reader. The
problem is that once CycloneDDS informs the RTI Writer that it has received all data
(using a valid AckNack message), the RTI Writer immediately publishes a message listing
the range of available sequence numbers and requesting an acknowledgment, which becomes
an endless loop.</p>
<p>Furthermore, there is a difference in interpretation of the meaning of the
“autodispose_unregistered_instances” QoS on the Writer. CycloneDDS
aligns with OpenSplice.</p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
    
        <div id="show_right_sidebar">
            <p><a class="toggle_right_sidebar" href="#"><span class="icon"><</span><span>Page contents<span></a></p>
        </div>

        <div id="right_sidebar">
            <p><a class="toggle_right_sidebar" href="#"><span class="icon">></span><span>Page contents:<span></a></p>
            <div class="page_toc">
                <ul>
<li><a class="reference internal" href="#">Implementation Specifics</a><ul>
<li><a class="reference internal" href="#discovery-behaviour">Discovery Behaviour</a><ul>
<li><a class="reference internal" href="#proxy-participants-and-endpoints">Proxy Participants and Endpoints</a></li>
<li><a class="reference internal" href="#sharing-of-discovery-information">Sharing of Discovery Information</a></li>
<li><a class="reference internal" href="#lingering-writers">Lingering Writers</a></li>
<li><a class="reference internal" href="#start-up-mode">Start-up Mode</a></li>
<li><a class="reference internal" href="#writer-history-qos-and-throttling">Writer History QoS and Throttling</a></li>
</ul>
</li>
<li><a class="reference internal" href="#network-and-discovery-configuration">Network and Discovery Configuration</a><ul>
<li><a class="reference internal" href="#networking-interfaces">Networking Interfaces</a><ul>
<li><a class="reference internal" href="#default-behaviour">Default behaviour</a></li>
<li><a class="reference internal" href="#multiple-network-interfaces">Multiple network interfaces</a></li>
<li><a class="reference internal" href="#overriding-addresses-interfaces-for-readers-writers">Overriding addresses/interfaces for readers/writers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#controlling-port-numbers">Controlling Port Numbers</a></li>
<li><a class="reference internal" href="#multicasting">Multicasting</a></li>
<li><a class="reference internal" href="#tcp-support">TCP Support</a><ul>
<li><a class="reference internal" href="#tls-support">TLS Support</a></li>
</ul>
</li>
<li><a class="reference internal" href="#raw-ethernet-support">Raw Ethernet Support</a></li>
<li><a class="reference internal" href="#discovery-configuration">Discovery Configuration</a><ul>
<li><a class="reference internal" href="#discovery-addresses">Discovery Addresses</a></li>
<li><a class="reference internal" href="#asymmetrical-discovery">Asymmetrical Discovery</a></li>
<li><a class="reference internal" href="#timing-of-spdp-packets">Timing of SPDP Packets</a></li>
<li><a class="reference internal" href="#endpoint-discovery">Endpoint Discovery</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#combining-multiple-participants">Combining Multiple Participants</a></li>
<li><a class="reference internal" href="#data-path-configuration">Data Path Configuration</a><ul>
<li><a class="reference internal" href="#re-transmit-merging">Re-Transmit Merging</a></li>
<li><a class="reference internal" href="#re-transmit-backlogs">Re-Transmit Backlogs</a></li>
<li><a class="reference internal" href="#controlling-fragmentation">Controlling Fragmentation</a></li>
<li><a class="reference internal" href="#receive-processing">Receive Processing</a></li>
<li><a class="reference internal" href="#minimising-receive-latency">Minimising Receive Latency</a></li>
<li><a class="reference internal" href="#maximum-sample-size">Maximum Sample Size</a></li>
</ul>
</li>
<li><a class="reference internal" href="#network-partition-configuration">Network Partition Configuration</a><ul>
<li><a class="reference internal" href="#network-partition-configuration-overview">Network Partition Configuration Overview</a></li>
<li><a class="reference internal" href="#matching-rules">Matching Rules</a></li>
<li><a class="reference internal" href="#multiple-matching-mappings">Multiple Matching Mappings</a></li>
</ul>
</li>
<li><a class="reference internal" href="#thread-configuration">Thread Configuration</a></li>
<li><a class="reference internal" href="#reporting-and-tracing">Reporting and Tracing</a></li>
<li><a class="reference internal" href="#compatibility-and-conformance">Compatibility and Conformance</a><ul>
<li><a class="reference internal" href="#conformance-modes">Conformance Modes</a></li>
<li><a class="reference internal" href="#rti-compatibility-issues">RTI Compatibility Issues</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </div>
        </div>
    

      <div class="clearer"></div>
    </div>
    <div class="button_nav_wrapper">
        <div class="button_nav">
            <div class="left">
                
                <a href="ddsi_concepts.html">
                    <span class="icon"><</span><span>DDSI Concepts</span></a>
                
            </div>

            <div class="right">
                
                    <a href="config_file_reference.html"><span>Configuration File Reference</span><span class="icon">></span></a>
                
            </div>
        </div>
    </div>


    <div class="footer" role="contentinfo">
        &#169; Copyright 2022, Eclipse Cyclone DDS committers.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
    </div>

<p id="theme_credit">Styled using the <a href="https://github.com/piccolo-orm/piccolo_theme">Piccolo Theme</a></p>
  </body>
</html>