
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Discovery behaviour &#8212; Eclipse Cyclone DDS, 0.11.0</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/basic_mod.css?v=0.7.0-1" />
    <link rel="stylesheet" type="text/css" href="../_static/css/helpers.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/helpers.js"></script>
    <script src="../_static/js/theme.js"></script>
    <script src="../_static/js/petite-vue.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Discovery configuration" href="discovery-config.html" />
    <link rel="prev" title="CMake build configuration" href="cmake_config.html" /> 
  </head><body>

<div id="top_nav">
    

    <nav>
        <p id="toggle_sidebar">
            <a href="#" title="Toggle sidebar">|||</a>
        </p>
        <h1><a href="../index.html" title="Go to homepage">Eclipse Cyclone DDS, 0.11.0</a></h1>

        <a id="mode_toggle" href="#" @click.prevent="handleClick" :title="mode">
    <template v-if="mode == 'light'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_light"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><circle cx="39.311" cy="39.524" r="15.734" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.212,4.901c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901l-0,9.614c-0,2.705 2.196,4.901 4.9,4.901c2.705,0 4.901,-2.196 4.901,-4.901l0,-9.614Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M67.48,18.073c1.913,-1.912 1.913,-5.018 0,-6.931c-1.912,-1.912 -5.018,-1.912 -6.931,0l-6.798,6.799c-1.912,1.912 -1.912,5.018 0,6.931c1.913,1.912 5.018,1.912 6.931,-0l6.798,-6.799Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.728,61.108c1.912,-1.913 1.912,-5.018 -0,-6.931c-1.913,-1.913 -5.019,-1.913 -6.931,-0l-6.799,6.798c-1.912,1.913 -1.912,5.019 0,6.931c1.913,1.913 5.019,1.913 6.931,0l6.799,-6.798Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.682,54.177c-1.913,-1.913 -5.018,-1.913 -6.931,-0c-1.912,1.913 -1.912,5.018 0,6.931l6.798,6.798c1.913,1.913 5.019,1.913 6.931,0c1.913,-1.912 1.913,-5.018 0,-6.931l-6.798,-6.798Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M4.901,34.623c-2.705,0 -4.901,2.196 -4.901,4.901c0,2.705 2.196,4.901 4.901,4.901l9.614,0c2.705,0 4.901,-2.196 4.901,-4.901c0,-2.705 -2.196,-4.901 -4.901,-4.901l-9.614,0Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.212,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901l-0,9.614c-0,2.705 2.196,4.901 4.9,4.901c2.705,-0 4.901,-2.196 4.901,-4.901l0,-9.614Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M18.929,11.142c-1.912,-1.912 -5.018,-1.912 -6.931,0c-1.912,1.913 -1.912,5.019 0,6.931l6.799,6.799c1.912,1.912 5.018,1.912 6.931,-0c1.912,-1.913 1.912,-5.019 -0,-6.931l-6.799,-6.799Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.108,34.623c-2.705,0 -4.901,2.196 -4.901,4.901c-0,2.705 2.196,4.901 4.901,4.901l9.614,0c2.705,0 4.901,-2.196 4.901,-4.901c-0,-2.705 -2.196,-4.901 -4.901,-4.901l-9.614,0Z" style="fill:#fff;"/></g></g></g></svg>
    </template>

    <template v-if="mode == 'dark'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_dark"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><circle cx="39.311" cy="39.524" r="15.734" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.212,14.515c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,0 -4.901,2.196 -4.901,4.901c0,2.705 2.197,4.901 4.901,4.901c2.705,0 4.901,-2.196 4.901,-4.901Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M60.662,24.892c1.902,-1.902 1.902,-4.99 0,-6.892l-0.04,-0.039c-1.901,-1.902 -4.989,-1.902 -6.891,-0c-1.901,1.901 -1.901,4.989 0,6.891l0.04,0.04c1.902,1.901 4.989,1.901 6.891,-0Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.732,61.103c1.91,-1.91 1.91,-5.011 0,-6.921l-0.009,-0.01c-1.91,-1.91 -5.012,-1.91 -6.921,-0c-1.91,1.91 -1.91,5.011 -0,6.921l0.01,0.01c1.909,1.91 5.011,1.91 6.92,-0Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.672,54.167c-1.907,-1.907 -5.004,-1.907 -6.911,0l-0.02,0.02c-1.907,1.907 -1.907,5.004 0,6.911c1.907,1.907 5.004,1.907 6.911,-0l0.02,-0.02c1.907,-1.907 1.907,-5.004 0,-6.911Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M14.52,34.623c-2.702,0 -4.896,2.194 -4.896,4.896l0,0.01c0,2.702 2.194,4.896 4.896,4.896c2.702,0 4.896,-2.194 4.896,-4.896l-0,-0.01c-0,-2.702 -2.194,-4.896 -4.896,-4.896Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.212,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.901,2.196 -4.901,4.901c0,2.704 2.197,4.9 4.901,4.9c2.705,0 4.901,-2.196 4.901,-4.9Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M25.73,17.943c-1.911,-1.911 -5.015,-1.911 -6.926,0l-0.005,0.005c-1.911,1.911 -1.911,5.015 0,6.926c1.911,1.911 5.015,1.911 6.926,0l0.005,-0.005c1.911,-1.911 1.911,-5.014 -0,-6.926Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.098,34.623c-2.699,0 -4.891,2.192 -4.891,4.892l-0,0.019c-0,2.699 2.192,4.891 4.891,4.891c2.7,0 4.892,-2.192 4.892,-4.891l0,-0.019c0,-2.7 -2.192,-4.892 -4.892,-4.892Z" style="fill:#fff;"/></g></g></g></svg>
    </template>

    <template v-if="mode == 'darkest'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_darkest"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><path d="M39.315,23.791c8.684,-0 15.734,7.05 15.734,15.733c0,8.684 -7.05,15.734 -15.734,15.734c-8.683,0 -15.733,-7.05 -15.733,-15.734c-0,-8.683 7.05,-15.733 15.733,-15.733Zm0,4.737c6.069,0 10.997,4.927 10.997,10.996c-0,6.069 -4.928,10.996 -10.997,10.996c-6.068,0 -10.996,-4.927 -10.996,-10.996c0,-6.069 4.928,-10.996 10.996,-10.996Z" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.216,14.515c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,0 -4.9,2.196 -4.9,4.901c-0,2.705 2.196,4.901 4.9,4.901c2.705,0 4.901,-2.196 4.901,-4.901Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M60.666,24.892c1.902,-1.902 1.902,-4.99 0,-6.892l-0.04,-0.039c-1.901,-1.902 -4.989,-1.902 -6.891,-0c-1.901,1.901 -1.901,4.989 0,6.891l0.04,0.04c1.902,1.901 4.99,1.901 6.891,-0Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.737,61.103c1.909,-1.91 1.909,-5.011 -0,-6.921l-0.01,-0.01c-1.91,-1.91 -5.011,-1.91 -6.921,-0c-1.91,1.91 -1.91,5.011 -0,6.921l0.01,0.01c1.91,1.91 5.011,1.91 6.921,-0Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.676,54.167c-1.907,-1.907 -5.004,-1.907 -6.911,0l-0.02,0.02c-1.907,1.907 -1.907,5.004 0,6.911c1.907,1.907 5.004,1.907 6.911,-0l0.02,-0.02c1.907,-1.907 1.907,-5.004 0,-6.911Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M14.524,34.623c-2.702,0 -4.896,2.194 -4.896,4.896l0,0.01c0,2.702 2.194,4.896 4.896,4.896c2.702,0 4.896,-2.194 4.896,-4.896l0,-0.01c0,-2.702 -2.194,-4.896 -4.896,-4.896Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.216,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901c-0,2.704 2.196,4.9 4.9,4.9c2.705,0 4.901,-2.196 4.901,-4.9Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M25.734,17.943c-1.911,-1.911 -5.015,-1.911 -6.926,0l-0.005,0.005c-1.911,1.911 -1.911,5.015 0,6.926c1.911,1.911 5.015,1.911 6.926,0l0.005,-0.005c1.911,-1.911 1.911,-5.014 0,-6.926Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.103,34.623c-2.7,0 -4.892,2.192 -4.892,4.892l-0,0.019c-0,2.699 2.192,4.891 4.892,4.891c2.699,0 4.891,-2.192 4.891,-4.891l0,-0.019c0,-2.7 -2.192,-4.892 -4.891,-4.892Z" style="fill:#fff;"/></g></g></g></svg>
    </template>
</a>

<script>
(function() {
    const LOCAL_STORAGE_KEY = 'piccoloThemeMode'

    var initialMode = localStorage.getItem(LOCAL_STORAGE_KEY)

    if (initialMode) {
        // Make sure the value in local storage is valid
        if (['light', 'dark', 'darkest'].indexOf(initialMode) == -1) {
            initialMode = 'light'
            localStorage.setItem(LOCAL_STORAGE_KEY, initialMode)
        }
    } else {
        // Check if the client prefers dark mode
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            initialMode = 'dark'
        } else {
            initialMode = 'light'
        }
        localStorage.setItem(LOCAL_STORAGE_KEY, initialMode)
    }

    document.documentElement.dataset.mode = initialMode

    PetiteVue.createApp({
        'mode': initialMode,
        handleClick() {
            let currentMode = this.mode

            if (currentMode == 'light') {
                this.mode = 'dark'
            } else if (currentMode == 'dark') {
                this.mode = 'darkest'
            } else if (currentMode == 'darkest') {
                this.mode = 'light'
            }

            document.documentElement.dataset.mode = this.mode
            localStorage.setItem(LOCAL_STORAGE_KEY, this.mode)

            console.log(this.mode)
        }
    }).mount('#mode_toggle')
})()
</script>
            <p class="mobile_search_link">
                <a href="../search.html" title="Search">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 65 64" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2">
                        <path d="M14.873 40.009c-2.315-3.943-3.642-8.532-3.642-13.429C11.231 11.91 23.141 0 37.811 0s26.58 11.91 26.58 26.58-11.91 26.58-26.58 26.58a26.44 26.44 0 0 1-14.277-4.161L9.739 62.794a3.12 3.12 0 0 1-4.413 0L.913 58.382c-1.217-1.218-1.217-3.196 0-4.413l13.96-13.96zM37.811 8.054c10.225 0 18.526 8.301 18.526 18.526s-8.301 18.526-18.526 18.526-18.526-8.301-18.526-18.526S27.586 8.054 37.811 8.054z" fill="#fff" />
                    </svg>
                </a>
            </p>
        

        <div class="searchbox_wrapper">
            
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
    </nav>
</div>

    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about_dds/eclipse_cyclone_dds.html">Eclipse Cyclone DDS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Configuration guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="cmake_config.html">CMake build configuration</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Discovery behaviour</a></li>
<li class="toctree-l2"><a class="reference internal" href="discovery-config.html">Discovery configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="network-config.html">Network configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="combining-participants.html">Combining multiple participants</a></li>
<li class="toctree-l2"><a class="reference internal" href="data-path-config.html">Data path configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="network_interfaces.html">Networking interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="thread-config.html">Thread configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="reporting-tracing.html">Reporting and tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="conformance.html">Conformance modes</a></li>
<li class="toctree-l2"><a class="reference internal" href="config_file_reference.html">Configuration File Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="benchmarking.html">Benchmarking Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="allocation-config.html">Memory Allocation Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security/dds_security.html">DDS security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../shared_memory/shared_memory.html">Shared memory exchange</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ddsc.html">C API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary of terms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
</ul>

        </div>
      </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="discovery-behaviour">
<span id="index-0"></span><span id="id1"></span><h1>Discovery behaviour<a class="headerlink" href="#discovery-behaviour" title="Permalink to this heading">¶</a></h1>
<section id="proxy-participants-and-endpoints">
<span id="proxy-participants-endpoints"></span><h2>Proxy participants and endpoints<a class="headerlink" href="#proxy-participants-and-endpoints" title="Permalink to this heading">¶</a></h2>
<p>In the <a href="https://www.omg.org/spec/DDSI-RTPS" target="_blank">DDSI specification</a>, Eclipse Cyclone DDS is known as a <em>stateful</em> implementation. writers
only send data to discovered readers, and readers only accept data from discovered
writers. There is one exception: the <code class="docutils literal notranslate"><span class="pre">writer</span></code> may choose to multicast the data so
that any reader is able to receive it. If a reader has already discovered the writer
but not vice-versa, it can accept the data even though the connection is not fully
established.</p>
<p>Such asymmetrical discovery can cause data to be delivered when it is not expected,
which can also cause indefinite blocking. To avoid this, Eclipse Cyclone DDS internally
creates a proxy for each remote participant and reader or writer. In the discovery
process, writers are matched with proxy readers, and readers are matched with proxy
writers, based on the topic name, type name, and the <a class="reference internal" href="../about_dds/qos.html#qos-bm"><span class="std std-ref">QoS</span></a> settings.</p>
<p>Proxies have the same natural hierarchy as ‘normal’ DDSI entities. Each proxy endpoint
is owned by a proxy participant. When a proxy participant is deleted, all of its proxy
endpoints are also deleted. Participants assert their liveliness periodically, which is
known as <em>automatic</em> liveliness in the DCPS specification, and the only mode supported
by Eclipse Cyclone DDS. When nothing has been heard from a participant for the lease duration
(published by that participant in its SPDP message), the lease expires, triggering a
clean-up.</p>
<p>Deleting endpoints triggers ‘disposes’ and ‘un-registers’ in the SEDP protocol. Deleting a
participant also creates special messages that allow the peers to immediately reclaim
resources instead of waiting for the lease to expire.</p>
</section>
<section id="sharing-of-discovery-information">
<span id="sharing-discovery-info"></span><h2>Sharing of discovery information<a class="headerlink" href="#sharing-of-discovery-information" title="Permalink to this heading">¶</a></h2>
<p>Eclipse Cyclone DDS handles any number of participants in an integrated manner, the discovery
protocol as described in <a class="reference internal" href="#proxy-participants-endpoints"><span class="std std-ref">Proxy participants and endpoints</span></a> can be wasteful. It is not
necessary for each participant in a Eclipse Cyclone DDS process to run the full discovery protocol
for itself.</p>
<p>Instead of implementing the protocol as suggested by the DDSI specification, Eclipse Cyclone DDS shares
all discovery activities amongst the participants, allowing you to add participants to a
process with minimal impact on the system.</p>
<p>It is also possible to have a single DDSI participant in a process regardless of the number
of DCPS participants created by the application code, which then becomes the virtual owner
of all the endpoints created in that one process. There is no discovery penalty for having
many participants, but any participant-based liveliness monitoring can be affected.</p>
<p>Because other implementations of the DDSI specification may be written on the assumption
that all participants perform their own discovery, it is possible to simulate that with
Eclipse Cyclone DDS. It will not perform the discovery for each participant independently, but it
generates the network traffic <em>as if</em> it does. These are controlled by the
<a class="reference internal" href="config_file_reference.html#cyclonedds-domain-internal-builtinendpointset"><span class="std std-ref">Internal/BuiltinEndpointSet</span></a> option.</p>
<p>By sharing the discovery information across all participants in a single node, each
new participant or endpoint is immediately aware of the existing peers and can directly
communicate with these peers. If these peers take significant time to discover the new
participant or endpoint, it can generate some redundant network traffic.</p>
</section>
<section id="lingering-writers">
<span id="index-1"></span><h2>Lingering writers<a class="headerlink" href="#lingering-writers" title="Permalink to this heading">¶</a></h2>
<p>When an application deletes a reliable DCPS writer, there is no guarantee that all
its readers have already acknowledged the correct receipt of all samples. Eclipse Cyclone DDS
lets the writer (and the owning participant if necessary) linger in the system for some time,
controlled by the <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-internal-writerlingerduration"><span class="std std-ref">Internal/writerLingerDuration</span></a>
option. The writer is deleted when all readers have acknowledged all samples, or the
linger duration has elapsed, whichever comes first.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The writer linger duration setting is not applied when Eclipse Cyclone DDS
is requested to terminate.</p>
</div>
<span class="target" id="writer-history-qos-and-throttling"></span></section>
<section id="index-2">
<span id="id2"></span><h2>Writer history QoS and throttling<a class="headerlink" href="#index-2" title="Permalink to this heading">¶</a></h2>
<p>The <a href="https://www.omg.org/spec/DDSI-RTPS" target="_blank">DDSI specification</a> relies on the writer History Cache (WHC), in which a sequence number
uniquely identifies each sample. The WHC integrates two different indices on the samples
published by a writer:</p>
<ul class="simple">
<li><p>The <strong>sequence number</strong> index is used for re-transmitting lost samples, and is therefore needed
for all reliable writers (see <a class="reference internal" href="../about_dds/reliable_communication.html#reliable-coms"><span class="std std-ref">Reliable communication</span></a>).</p></li>
<li><p>The <strong>key value</strong> index is used for retaining the current state of each instance in the WHC.</p></li>
</ul>
<p>When a new sample overwrites the state of an instance, the key value index allows dropping
samples from the sequence number index. For transient-local behaviour (see
<a class="reference internal" href="../about_dds/ddsi-transient_behavior.html#ddsi-specific-transient-local-behaviour"><span class="std std-ref">DDSI-Specific Transient-Local Behaviour</span></a>), the key value index also allows retaining
the current state of each instance even when all readers have acknowledged a sample.</p>
<p>Transient-local data always requires the key values index, and by default is also
used for other writers that have a history setting of <code class="docutils literal notranslate"><span class="pre">KEEP_LAST</span></code>. The advantage of an
index on key value is that superseded samples can be dropped aggressively, instead of
delivering them to all readers. The disadvantage is that it is somewhat more resource-intensive.</p>
<p>The WHC distinguishes between:</p>
<ul class="simple">
<li><p>History to be retained for existing readers (controlled by the writer’s history QoS setting).</p></li>
<li><p>History to be retained for late-joining readers for transient-local writers (controlled by
the topic’s durability-service history QoS setting).</p></li>
</ul>
<p>It is therefore possible to create a writer that never overwrites samples for live readers,
while maintaining only the most recent samples for late-joining readers. This ensures that
the data that is available for late-joining readers is the same for transient-local and for
transient data.</p>
<section id="writer-throttling">
<span id="index-3"></span><h3>Writer throttling<a class="headerlink" href="#writer-throttling" title="Permalink to this heading">¶</a></h3>
<p>Writer throttling is based on the WHC size. The following settings control writer throttling:</p>
<p>When the WHC contains at least <code class="docutils literal notranslate"><span class="pre">high</span></code> bytes in unacknowledged samples, it stalls the
writer until the number of bytes in unacknowledged samples drops below the value set in:
<a class="reference internal" href="config_file_reference.html#cyclonedds-domain-internal-watermarks-whclow"><span class="std std-ref">Internal/Watermarks/WhcLow</span></a>.</p>
<p>Based on the transmit pressure and receive re-ransmit requests, the value of <code class="docutils literal notranslate"><span class="pre">high</span></code> is
dynamically adjusted between:
- <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-internal-watermarks-whclow"><span class="std std-ref">Internal/Watermarks/WhcLow</span></a>
- <a class="reference internal" href="config_file_reference.html#cyclonedds-domain-internal-watermarks-whchigh"><span class="std std-ref">Internal/Watermarks/WhcHigh</span></a></p>
<p>The initial value of <code class="docutils literal notranslate"><span class="pre">high</span></code> is set in:
<a class="reference internal" href="config_file_reference.html#cyclonedds-domain-internal-watermarks-whchighinit"><span class="std std-ref">Internal/Watermarks/WhcHighInit</span></a>.</p>
<p>The adaptive behavior can be disabled by setting
<a class="reference internal" href="config_file_reference.html#cyclonedds-domain-internal-watermarks-whcadaptive"><span class="std std-ref">Internal/Watermarks/WhcAdaptive</span></a>
to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<p>While the adaptive behaviour generally handles a variety of fast and slow writers and
readers quite well, the introduction of a very slow reader with small buffers in an
existing network that is transmitting data at high rates can cause a sudden stop while
the new reader tries to recover the large amount of data stored in the writer, before
things can continue at a much lower rate.</p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
    
        <div id="show_right_sidebar">
            <p><a class="toggle_right_sidebar" href="#"><span class="icon"><</span><span>Page contents<span></a></p>
        </div>

        <div id="right_sidebar">
            <p><a class="toggle_right_sidebar" href="#"><span class="icon">></span><span>Page contents:<span></a></p>
            <div class="page_toc">
                <ul>
<li><a class="reference internal" href="#">Discovery behaviour</a><ul>
<li><a class="reference internal" href="#proxy-participants-and-endpoints">Proxy participants and endpoints</a></li>
<li><a class="reference internal" href="#sharing-of-discovery-information">Sharing of discovery information</a></li>
<li><a class="reference internal" href="#lingering-writers">Lingering writers</a></li>
<li><a class="reference internal" href="#index-2">Writer history QoS and throttling</a><ul>
<li><a class="reference internal" href="#writer-throttling">Writer throttling</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </div>
        </div>
    

      <div class="clearer"></div>
    </div>
    <div class="button_nav_wrapper">
        <div class="button_nav">
            <div class="left">
                
                <a href="cmake_config.html">
                    <span class="icon"><</span><span>CMake build configuration</span></a>
                
            </div>

            <div class="right">
                
                    <a href="discovery-config.html"><span>Discovery configuration</span><span class="icon">></span></a>
                
            </div>
        </div>
    </div>


    <div class="footer" role="contentinfo">
        &#169; Copyright 2025, Eclipse Cyclone DDS committers.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 6.0.0.
    </div>

<p id="theme_credit">Styled using the <a href="https://github.com/piccolo-orm/piccolo_theme">Piccolo Theme</a></p>
  </body>
</html>