
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Getting Started &#8212; Eclipse Cyclone DDS 0.10.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/basic_mod.css?v=0.7.0-1" />
    <link rel="stylesheet" type="text/css" href="/css/docu.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="/js/docu.js"></script>
    <script src="_static/js/theme.js"></script>
    <script src="_static/js/petite-vue.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Eclipse Cyclone DDS Configuration Options" href="config.html" />
    <link rel="prev" title="Welcome to Eclipse Cyclone DDS’s documentation!" href="index.html" /> 
  </head><body>

<div id="top_nav">
    

    <nav>
        <p id="toggle_sidebar">
            <a href="#" title="Toggle sidebar">|||</a>
        </p>
        <h1><a href="index.html" title="Go to homepage">Eclipse Cyclone DDS 0.10.1 documentation</a></h1>

        <a id="mode_toggle" href="#" @click.prevent="handleClick" :title="mode">
    <template v-if="mode == 'light'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_light"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><circle cx="39.311" cy="39.524" r="15.734" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.212,4.901c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901l-0,9.614c-0,2.705 2.196,4.901 4.9,4.901c2.705,0 4.901,-2.196 4.901,-4.901l0,-9.614Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M67.48,18.073c1.913,-1.912 1.913,-5.018 0,-6.931c-1.912,-1.912 -5.018,-1.912 -6.931,0l-6.798,6.799c-1.912,1.912 -1.912,5.018 0,6.931c1.913,1.912 5.018,1.912 6.931,-0l6.798,-6.799Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.728,61.108c1.912,-1.913 1.912,-5.018 -0,-6.931c-1.913,-1.913 -5.019,-1.913 -6.931,-0l-6.799,6.798c-1.912,1.913 -1.912,5.019 0,6.931c1.913,1.913 5.019,1.913 6.931,0l6.799,-6.798Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.682,54.177c-1.913,-1.913 -5.018,-1.913 -6.931,-0c-1.912,1.913 -1.912,5.018 0,6.931l6.798,6.798c1.913,1.913 5.019,1.913 6.931,0c1.913,-1.912 1.913,-5.018 0,-6.931l-6.798,-6.798Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M4.901,34.623c-2.705,0 -4.901,2.196 -4.901,4.901c0,2.705 2.196,4.901 4.901,4.901l9.614,0c2.705,0 4.901,-2.196 4.901,-4.901c0,-2.705 -2.196,-4.901 -4.901,-4.901l-9.614,0Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.212,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901l-0,9.614c-0,2.705 2.196,4.901 4.9,4.901c2.705,-0 4.901,-2.196 4.901,-4.901l0,-9.614Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M18.929,11.142c-1.912,-1.912 -5.018,-1.912 -6.931,0c-1.912,1.913 -1.912,5.019 0,6.931l6.799,6.799c1.912,1.912 5.018,1.912 6.931,-0c1.912,-1.913 1.912,-5.019 -0,-6.931l-6.799,-6.799Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.108,34.623c-2.705,0 -4.901,2.196 -4.901,4.901c-0,2.705 2.196,4.901 4.901,4.901l9.614,0c2.705,0 4.901,-2.196 4.901,-4.901c-0,-2.705 -2.196,-4.901 -4.901,-4.901l-9.614,0Z" style="fill:#fff;"/></g></g></g></svg>
    </template>

    <template v-if="mode == 'dark'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_dark"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><circle cx="39.311" cy="39.524" r="15.734" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.212,14.515c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,0 -4.901,2.196 -4.901,4.901c0,2.705 2.197,4.901 4.901,4.901c2.705,0 4.901,-2.196 4.901,-4.901Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M60.662,24.892c1.902,-1.902 1.902,-4.99 0,-6.892l-0.04,-0.039c-1.901,-1.902 -4.989,-1.902 -6.891,-0c-1.901,1.901 -1.901,4.989 0,6.891l0.04,0.04c1.902,1.901 4.989,1.901 6.891,-0Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.732,61.103c1.91,-1.91 1.91,-5.011 0,-6.921l-0.009,-0.01c-1.91,-1.91 -5.012,-1.91 -6.921,-0c-1.91,1.91 -1.91,5.011 -0,6.921l0.01,0.01c1.909,1.91 5.011,1.91 6.92,-0Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.672,54.167c-1.907,-1.907 -5.004,-1.907 -6.911,0l-0.02,0.02c-1.907,1.907 -1.907,5.004 0,6.911c1.907,1.907 5.004,1.907 6.911,-0l0.02,-0.02c1.907,-1.907 1.907,-5.004 0,-6.911Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M14.52,34.623c-2.702,0 -4.896,2.194 -4.896,4.896l0,0.01c0,2.702 2.194,4.896 4.896,4.896c2.702,0 4.896,-2.194 4.896,-4.896l-0,-0.01c-0,-2.702 -2.194,-4.896 -4.896,-4.896Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.212,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.901,2.196 -4.901,4.901c0,2.704 2.197,4.9 4.901,4.9c2.705,0 4.901,-2.196 4.901,-4.9Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M25.73,17.943c-1.911,-1.911 -5.015,-1.911 -6.926,0l-0.005,0.005c-1.911,1.911 -1.911,5.015 0,6.926c1.911,1.911 5.015,1.911 6.926,0l0.005,-0.005c1.911,-1.911 1.911,-5.014 -0,-6.926Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.098,34.623c-2.699,0 -4.891,2.192 -4.891,4.892l-0,0.019c-0,2.699 2.192,4.891 4.891,4.891c2.7,0 4.892,-2.192 4.892,-4.891l0,-0.019c0,-2.7 -2.192,-4.892 -4.892,-4.892Z" style="fill:#fff;"/></g></g></g></svg>
    </template>

    <template v-if="mode == 'darkest'">
        <svg width="100%" height="100%" viewBox="0 0 79 80" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="mode_darkest"><rect id="Bounds" x="0" y="-0" width="78.623" height="79.049" style="fill:none;"/><path d="M39.315,23.791c8.684,-0 15.734,7.05 15.734,15.733c0,8.684 -7.05,15.734 -15.734,15.734c-8.683,0 -15.733,-7.05 -15.733,-15.734c-0,-8.683 7.05,-15.733 15.733,-15.733Zm0,4.737c6.069,0 10.997,4.927 10.997,10.996c-0,6.069 -4.928,10.996 -10.997,10.996c-6.068,0 -10.996,-4.927 -10.996,-10.996c0,-6.069 4.928,-10.996 10.996,-10.996Z" style="fill:#fff;"/><g id="beams"><g id="beam"><path id="beam1" serif:id="beam" d="M44.216,14.515c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,0 -4.9,2.196 -4.9,4.901c-0,2.705 2.196,4.901 4.9,4.901c2.705,0 4.901,-2.196 4.901,-4.901Z" style="fill:#fff;"/></g><g id="beam2" serif:id="beam"><path id="beam3" serif:id="beam" d="M60.666,24.892c1.902,-1.902 1.902,-4.99 0,-6.892l-0.04,-0.039c-1.901,-1.902 -4.989,-1.902 -6.891,-0c-1.901,1.901 -1.901,4.989 0,6.891l0.04,0.04c1.902,1.901 4.99,1.901 6.891,-0Z" style="fill:#fff;"/></g><g id="beam4" serif:id="beam"><path id="beam5" serif:id="beam" d="M25.737,61.103c1.909,-1.91 1.909,-5.011 -0,-6.921l-0.01,-0.01c-1.91,-1.91 -5.011,-1.91 -6.921,-0c-1.91,1.91 -1.91,5.011 -0,6.921l0.01,0.01c1.91,1.91 5.011,1.91 6.921,-0Z" style="fill:#fff;"/></g><g id="beam6" serif:id="beam"><path id="beam7" serif:id="beam" d="M60.676,54.167c-1.907,-1.907 -5.004,-1.907 -6.911,0l-0.02,0.02c-1.907,1.907 -1.907,5.004 0,6.911c1.907,1.907 5.004,1.907 6.911,-0l0.02,-0.02c1.907,-1.907 1.907,-5.004 0,-6.911Z" style="fill:#fff;"/></g><g id="beam8" serif:id="beam"><path id="beam9" serif:id="beam" d="M14.524,34.623c-2.702,0 -4.896,2.194 -4.896,4.896l0,0.01c0,2.702 2.194,4.896 4.896,4.896c2.702,0 4.896,-2.194 4.896,-4.896l0,-0.01c0,-2.702 -2.194,-4.896 -4.896,-4.896Z" style="fill:#fff;"/></g><g id="beam10" serif:id="beam"><path id="beam11" serif:id="beam" d="M44.216,64.534c0,-2.705 -2.196,-4.901 -4.901,-4.901c-2.704,-0 -4.9,2.196 -4.9,4.901c-0,2.704 2.196,4.9 4.9,4.9c2.705,0 4.901,-2.196 4.901,-4.9Z" style="fill:#fff;"/></g><g id="beam12" serif:id="beam"><path id="beam13" serif:id="beam" d="M25.734,17.943c-1.911,-1.911 -5.015,-1.911 -6.926,0l-0.005,0.005c-1.911,1.911 -1.911,5.015 0,6.926c1.911,1.911 5.015,1.911 6.926,0l0.005,-0.005c1.911,-1.911 1.911,-5.014 0,-6.926Z" style="fill:#fff;"/></g><g id="beam14" serif:id="beam"><path id="beam15" serif:id="beam" d="M64.103,34.623c-2.7,0 -4.892,2.192 -4.892,4.892l-0,0.019c-0,2.699 2.192,4.891 4.892,4.891c2.699,0 4.891,-2.192 4.891,-4.891l0,-0.019c0,-2.7 -2.192,-4.892 -4.891,-4.892Z" style="fill:#fff;"/></g></g></g></svg>
    </template>
</a>

<script>
(function() {
    const LOCAL_STORAGE_KEY = 'piccoloThemeMode'

    var initialMode = localStorage.getItem(LOCAL_STORAGE_KEY)

    if (initialMode) {
        // Make sure the value in local storage is valid
        if (['light', 'dark', 'darkest'].indexOf(initialMode) == -1) {
            initialMode = 'light'
            localStorage.setItem(LOCAL_STORAGE_KEY, initialMode)
        }
    } else {
        // Check if the client prefers dark mode
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            initialMode = 'dark'
        } else {
            initialMode = 'light'
        }
        localStorage.setItem(LOCAL_STORAGE_KEY, initialMode)
    }

    document.documentElement.dataset.mode = initialMode

    PetiteVue.createApp({
        'mode': initialMode,
        handleClick() {
            let currentMode = this.mode

            if (currentMode == 'light') {
                this.mode = 'dark'
            } else if (currentMode == 'dark') {
                this.mode = 'darkest'
            } else if (currentMode == 'darkest') {
                this.mode = 'light'
            }

            document.documentElement.dataset.mode = this.mode
            localStorage.setItem(LOCAL_STORAGE_KEY, this.mode)

            console.log(this.mode)
        }
    }).mount('#mode_toggle')
})()
</script>
            <p class="mobile_search_link">
                <a href="search.html" title="Search">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 65 64" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2">
                        <path d="M14.873 40.009c-2.315-3.943-3.642-8.532-3.642-13.429C11.231 11.91 23.141 0 37.811 0s26.58 11.91 26.58 26.58-11.91 26.58-26.58 26.58a26.44 26.44 0 0 1-14.277-4.161L9.739 62.794a3.12 3.12 0 0 1-4.413 0L.913 58.382c-1.217-1.218-1.217-3.196 0-4.413l13.96-13.96zM37.811 8.054c10.225 0 18.526 8.301 18.526 18.526s-8.301 18.526-18.526 18.526-18.526-8.301-18.526-18.526S27.586 8.054 37.811 8.054z" fill="#fff" />
                    </svg>
                </a>
            </p>
        

        <div class="searchbox_wrapper">
            
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
    </nav>
</div>

    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Eclipse Cyclone DDS Configuration Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="security.html">DDS Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="shared_memory.html">Shared Memory</a></li>
<li class="toctree-l1"><a class="reference internal" href="ddsc.html">Eclipse Cyclone DDS C API Reference</a></li>
</ul>

        </div>
      </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<a class="reference internal image-reference" href="_images/Cyclone_DDS-Logo.png"><img alt="_images/Cyclone_DDS-Logo.png" class="align-center" src="_images/Cyclone_DDS-Logo.png" style="width: 50%;" /></a>
<section id="installing-eclipse-cyclone-dds">
<h2>Installing Eclipse Cyclone DDS<a class="headerlink" href="#installing-eclipse-cyclone-dds" title="Permalink to this headline">¶</a></h2>
<p>Eclipse Cyclone DDS is a very performant and robust OMG compliant Data
Distribution Service (DDS) implementation. Cyclone DDS core is
implemented in C and provides C-APIs to applications. Through its
Cyclonedds-cxx package, the ISO/IEC C++ 2003 language binding is
supported.</p>
<p>The first chapters detail the installation and build process of Cyclone
Core, including the C-APIs. The remaining chapters details how to
install the C++ support packages. Short tutorials in C and C++ are
detailed to give the reader examples of how the DDS technology is used
with Cyclone to share data.</p>
<section id="system-requirements">
<h3>System requirements<a class="headerlink" href="#system-requirements" title="Permalink to this headline">¶</a></h3>
<p>At the time of writing this document, Eclipse Cyclone DDS supports
Linux, macOS, and Windows and is known to work on FreeRTOS, QNX and the
solaris-like Openindiana OS.</p>
<p>To build the Cyclone DDS implementation, the following software should
be installed on your machine:</p>
<ul class="simple">
<li><p>A C compiler (most commonly GCC or clang on Linux, Visual Studio on Windows, XCode on macOS);</p></li>
<li><p><a class="reference external" href="https://git-scm.com/">Git</a> version control system;</p></li>
<li><p><a class="reference external" href="https://cmake.org/download/">CMake</a>, version 3.10 or later;</p></li>
<li><p>Optionally <a class="reference external" href="https://www.openssl.org/">OpenSSL</a>, preferably version 1.1 or
later to use TLS over TCP. If you need to reduce the footprint or if
you have issues with the FindOpenSSL CMake script, you can explicitly
disable this by setting ENABLE_SSL=NO</p></li>
</ul>
<p>On Linux, install these dependencies with a package manager of your choice:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>yum install git cmake gcc
apt-get install git cmake gcc
aptitude install git cmake gcc
<span class="c1"># or others</span>
</pre></div>
</div>
<p>On Windows, to install dependencies using chocolatey, use  <code class="docutils literal notranslate"><span class="pre">choco</span> <span class="pre">install</span> <span class="pre">git</span> <span class="pre">cmake</span></code>.
On macOS, installing XCode from the App Store should be enough.</p>
</section>
<section id="native-installation-for-linux-and-macos">
<h3>Native Installation for Linux and macOS<a class="headerlink" href="#native-installation-for-linux-and-macos" title="Permalink to this headline">¶</a></h3>
<p>To obtain the Eclipse Cyclone DDS:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/eclipse-cyclonedds/cyclonedds.git
<span class="nb">cd</span> cyclonedds
mkdir build
</pre></div>
</div>
<p>Then, depending on whether you like to develop applications using
Cyclone DDS or contribute to it, you may follow different procedures.</p>
<section id="for-application-developers">
<h4>For Application Developers<a class="headerlink" href="#for-application-developers" title="Permalink to this headline">¶</a></h4>
<p>You can build and install the required libraries needed to develop your
own applications using Cyclone DDS in a few simple steps.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> build
cmake -DCMAKE_INSTALL_PREFIX<span class="o">=</span>&lt;install-location&gt; ..
cmake --build .
</pre></div>
</div>
<p>To install it after a successful build:</p>
<p>Depending on the installation location, you may need administrator
privileges.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake --build . --target install
</pre></div>
</div>
<p>This install step copies everything to:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;install-location&gt;/lib</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;install-location&gt;/bin</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;install-location&gt;/include/ddsc</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;install-location&gt;/share/CycloneDDS</span></code></p></li>
</ul>
<p>At this point, you are ready to use Eclipse Cyclone DDS in your own
projects.</p>
<p><strong>Note:</strong> The default build type is a release build with debug
information included (RelWithDebInfo). This is a convenient type of
build to use from applications because of a good mix between performance
and still being able to debug things. If you’d rather have a Debug or
pure Release build, set <code class="docutils literal notranslate"><span class="pre">CMAKE_BUILD_TYPE</span></code> accordingly.</p>
<p>If you want to contribute to Cyclone DDS, please refer to <a class="reference external" href="#appendix-i-contributing-to-eclipse-cyclone-dds">Appendix I
Contributing to Eclipse Cyclone
DDS</a>.</p>
</section>
</section>
<section id="installation-with-product-installer-for-linux-and-macos">
<h3>Installation with product installer for Linux and macOS<a class="headerlink" href="#installation-with-product-installer-for-linux-and-macos" title="Permalink to this headline">¶</a></h3>
<p>TBD.</p>
</section>
<section id="native-installation-for-windows">
<h3>Native Installation for Windows<a class="headerlink" href="#native-installation-for-windows" title="Permalink to this headline">¶</a></h3>
<p>To obtain the Eclipse Cyclone DDS:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/eclipse-cyclonedds/cyclonedds.git
<span class="nb">cd</span> cyclonedds
mkdir build
</pre></div>
</div>
<p>Then, depending on whether you like to develop applications using
Cyclone DDS or contribute to it, you may follow different procedures.</p>
<section id="id1">
<h4>For Application Developers<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>You can build and install the required libraries needed to develop your
own applications using Cyclone DDS in a few simple steps.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> build
cmake -G <span class="s2">&quot;&lt;generator-name&gt;&quot;</span> -DCMAKE_INSTALL_PREFIX<span class="o">=</span>&lt;install-location&gt; ..
cmake --build .
</pre></div>
</div>
<p><strong>Note:</strong> Replace <code class="docutils literal notranslate"><span class="pre">&lt;install-location&gt;</span></code> with the directory where you
would like to install Cyclone DDS. Replace <code class="docutils literal notranslate"><span class="pre">&lt;generator-name&gt;</span></code> with one
of the methods CMake
<a class="reference external" href="https://cmake.org/cmake/help/latest/manual/cmake-generators.7.html">generators</a>
offer for generating build files.</p>
<p>For example, “Visual Studio 15 2017 Win64” targets a 64-bit build using
Visual Studio 2017, and the <code class="docutils literal notranslate"><span class="pre">&lt;install-location&gt;</span></code> can be in the
<code class="docutils literal notranslate"><span class="pre">build\install</span></code> directory. With both the <code class="docutils literal notranslate"><span class="pre">&lt;generator-name&gt;</span></code> and
<code class="docutils literal notranslate"><span class="pre">&lt;install-location&gt;</span></code> specified as the example, the command looks like
this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake -G <span class="s2">&quot;Visual Studio 15 2017 Win64&quot;</span> -DCMAKE_INSTALL_PREFIX<span class="o">=</span>install ..
</pre></div>
</div>
<p>To install it after a successful build:</p>
<p>Depending on the installation location you may need administrator
privileges.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake --build . --target install
</pre></div>
</div>
<p>This step will copies everything to:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;install-location&gt;/lib</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;install-location&gt;/bin</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;install-location&gt;/include/ddsc</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;install-location&gt;/share/CycloneDDS</span></code></p></li>
</ul>
<p>At this point, you are ready to use Eclipse Cyclone DDS in your
projects.</p>
<p><strong>Note:</strong> The default build type is a release build with debug
information included (RelWithDebInfo). This is a convenient type of
build to use from applications because of a good mix between performance
and still being able to debug things. If you’d rather have a Debug or
pure Release build, set <code class="docutils literal notranslate"><span class="pre">CMAKE_BUILD_TYPE</span></code> accordingly.</p>
<p>If you want to contribute to Cyclone DDS, please refer to <a class="reference external" href="#appendix-i-contributing-to-eclipse-cyclone-dds">Appendix I
Contributing to Eclipse Cyclone DDS for
Windows.</a></p>
</section>
</section>
<section id="installation-with-product-installer-for-windows">
<h3>Installation with product installer for Windows<a class="headerlink" href="#installation-with-product-installer-for-windows" title="Permalink to this headline">¶</a></h3>
<p>The Cyclone DDS also provides a product installer, this may be easier
than installing it from GitHub.</p>
<p>To install the Cyclone DDS from the installer:</p>
<ol class="arabic simple">
<li><p>Start the installer, and click ‘Next’.</p></li>
</ol>
<img alt="_images/1.5-1.png" class="align-center" src="_images/1.5-1.png" />
<ol class="arabic simple" start="2">
<li><p>Accept the terms, and click’Next’.</p></li>
</ol>
<img alt="_images/1.5-2.png" class="align-center" src="_images/1.5-2.png" />
<ol class="arabic simple" start="3">
<li><p>Choose whether you want to add Cyclone DDS to the system PATH. We
recommend to add it to the system PATH so that your application can
use the related libraries directly. Select whether to add it for the
current user or all users and click ‘Next’.</p></li>
</ol>
<img alt="_images/1.5-3.png" class="align-center" src="_images/1.5-3.png" />
<ol class="arabic simple" start="4">
<li><p>Set up the directory to install Cyclone DDS. We recommend that you DO
NOT install it in the <code class="docutils literal notranslate"><span class="pre">Program</span> <span class="pre">Files</span></code> directory, as it needs
administrators’ permission to write to the folder. Click ‘Next’.</p></li>
</ol>
<img alt="_images/1.5-4.png" class="align-center" src="_images/1.5-4.png" />
<ol class="arabic simple" start="5">
<li><p>You are now ready to install the Cyclone DDS, click ‘Install’.</p></li>
</ol>
<img alt="_images/1.5-5.png" class="align-center" src="_images/1.5-5.png" />
<ol class="arabic simple" start="6">
<li><p>Click ‘Finish’.</p></li>
</ol>
<img alt="_images/1.5-6.png" class="align-center" src="_images/1.5-6.png" />
<p>The installation of Cyclone DDS core, C-APIs and pre-compiler are
complete. The next section describes how to test it.</p>
</section>
<section id="test-your-installation">
<span id="id2"></span><h3>Test your Installation<a class="headerlink" href="#test-your-installation" title="Permalink to this headline">¶</a></h3>
<p>To test if your installation and configuration are working correctly,
you can use the Cyclone DDS <em>ddsperf</em> tool (<code class="docutils literal notranslate"><span class="pre">ddsperf</span> <span class="pre">sanity</span></code>) or you
can use the Hello World example. To use the ddsperf tool, refer to
<a class="reference external" href="#testing-your-network-configuration">testing your network
configuration.</a> The test
using the Hello World example is explained in this section.</p>
<section id="environnement-variable-updates">
<h4>Environnement variable updates<a class="headerlink" href="#environnement-variable-updates" title="Permalink to this headline">¶</a></h4>
<p>On Windows, to run Eclipse Cyclone DDS executables, the required libraries
(like <code class="docutils literal notranslate"><span class="pre">ddsc.dll</span></code>) need to be available to the executables. Normally,
these libraries are installed in system default locations and it works
out-of-the-box. However, if they are not installed in those locations,
the library search path must be changed. This can be achieved by
executing the command:</p>
<div class="highlight-PowerShell notranslate"><div class="highlight"><pre><span></span><span class="nb">set </span><span class="n">PATH</span><span class="p">=&lt;</span><span class="nb">install-location</span><span class="p">&gt;\</span><span class="n">bin</span><span class="p">;</span><span class="k">%</span><span class="n">PATH</span><span class="p">%</span>
</pre></div>
</div>
<p><strong>Note:</strong> An alternative to make the required libraries available to the
executables, is to simply copy the required libraries to the
executables’ directory.</p>
</section>
<section id="running-the-pre-built-example">
<h4>Running the pre-built example<a class="headerlink" href="#running-the-pre-built-example" title="Permalink to this headline">¶</a></h4>
<p>Eclipse Cyclone DDS includes a simple <em>Hello World!</em> application that
can be executed to test your installation. The <em>Hello World!</em>
application consists of two executables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">HelloworldPublisher</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HelloworldSubscriber</span></code></p></li>
</ul>
<p>The <em>Hello World!</em> application is located in
<code class="docutils literal notranslate"><span class="pre">&lt;cyclonedds-directory&gt;\build\bin\Debug</span></code> in Windows, and
<code class="docutils literal notranslate"><span class="pre">&lt;cyclonedds-directory&gt;/build/bin</span></code> in Linux.</p>
<p>To run the example application, open two console windows and navigate to
the appropriate directory in both console windows. Run
<code class="docutils literal notranslate"><span class="pre">HelloworldSubscriber</span></code> in one of the console windows using:</p>
<blockquote>
<div><p><strong>Windows</strong> <code class="docutils literal notranslate"><span class="pre">HelloworldSubscriber.exe</span></code></p>
<p><strong>Linux</strong> <code class="docutils literal notranslate"><span class="pre">./HelloworldSubscriber</span></code></p>
</div></blockquote>
<p>Run <code class="docutils literal notranslate"><span class="pre">HelloworldPublisher</span></code> in the other console window using:</p>
<blockquote>
<div><p><strong>Windows</strong> <code class="docutils literal notranslate"><span class="pre">HelloworldPublisher.exe</span></code></p>
<p><strong>Linux</strong> <code class="docutils literal notranslate"><span class="pre">./HelloworldPublisher</span></code></p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">HelloworldPublisher</span></code> appears as follows:</p>
<img alt="_images/1.6.2-1.png" class="align-center" src="_images/1.6.2-1.png" />
<p><code class="docutils literal notranslate"><span class="pre">HelloworldSubscriber</span></code> appears as follows:</p>
<img alt="_images/1.6.2-2.png" class="align-center" src="_images/1.6.2-2.png" />
<p><strong>Note:</strong> Cyclone’s default behavior is to automatically detect the
first network interface card available on your machine and uses it to
exchange the hello world message. Ensure that your publisher and
subscriber applications are on the same network, selecting the right
interface card. This is one of the most common issues on machine
configurations with multiple network interface cards.</p>
<p>This default behavior can be overridden by updating the property
<code class="docutils literal notranslate"><span class="pre">//CycloneDDS/Domain/General/</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">NetworkInterfaceAddress</span></code> in a deployment file (e.g.
<code class="docutils literal notranslate"><span class="pre">cyclonedds.xml</span></code>) that you created to point to it through an OS
environment variable named CYCLONEDDS_URI. More information on this
topic can be found in the <a class="reference external" href="https://github.com/eclipse-cyclonedds/cyclonedds/blob/master/docs/manual/options.md">github
repository</a>
and the configuration section on
<a class="reference external" href="https://github.com/eclipse-cyclonedds/cyclonedds">https://github.com/eclipse-cyclonedds/cyclonedds</a>.</p>
</section>
</section>
<section id="want-to-know-more-about-dds">
<h3>Want to know more about DDS?<a class="headerlink" href="#want-to-know-more-about-dds" title="Permalink to this headline">¶</a></h3>
<p>The primary source of information is the OMG website at
<a class="reference external" href="http://www.omg.org/">http://www.omg.org</a>, specifically the <a class="reference external" href="http://www.omg.org/gettingstarted/omg_idl.htm">DDS
Getting</a>Startedpage
and the <a class="reference external" href="http://www.omg.org/spec/DDS/">DDS specification</a>.</p>
<p>In the future we will provide the following:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Tutorial document</p></li>
<li><p>Deployment Guide, for now, you can refer to <a class="reference external" href="https://github.com/eclipse-cyclonedds/cyclonedds/blob/master/docs/manual/options.md">https://github.com/eclipse-cyclonedds/cyclonedds/blob/master/docs/manual/options.md</a></p></li>
</ol>
</div></blockquote>
<p>You can find the API reference in the sidebar.</p>
</section>
<section id="uninstalling-cyclone-dds">
<h3>Uninstalling Cyclone DDS<a class="headerlink" href="#uninstalling-cyclone-dds" title="Permalink to this headline">¶</a></h3>
<section id="uninstallation-for-native-installation">
<h4>Uninstallation for Native Installation<a class="headerlink" href="#uninstallation-for-native-installation" title="Permalink to this headline">¶</a></h4>
<p>You can manually remove the install and build directory. In Linux and
macOS in the install or build directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rm -rf *
</pre></div>
</div>
</section>
<section id="uninstallation-for-the-product-installer">
<h4>Uninstallation for the product installer<a class="headerlink" href="#uninstallation-for-the-product-installer" title="Permalink to this headline">¶</a></h4>
<section id="windows">
<h5>Windows<a class="headerlink" href="#windows" title="Permalink to this headline">¶</a></h5>
<p>On Windows, to uninstall the Cyclone DDS you can either do it from the
Windows application control panel (Programs and Features in Control
Panel) or by using the product installer; in this case, start-up the
Cyclone DDS product installer, and select ‘Remove’.</p>
<img alt="_images/1.8.2.1.png" class="align-center" src="_images/1.8.2.1.png" />
</section>
<section id="linux-and-macos">
<h5>Linux and macOS<a class="headerlink" href="#linux-and-macos" title="Permalink to this headline">¶</a></h5>
<p>TBD.</p>
</section>
</section>
</section>
</section>
<section id="building-cyclone-dds-applications">
<h2>Building Cyclone DDS applications<a class="headerlink" href="#building-cyclone-dds-applications" title="Permalink to this headline">¶</a></h2>
<section id="building-your-first-example">
<h3>Building Your First Example<a class="headerlink" href="#building-your-first-example" title="Permalink to this headline">¶</a></h3>
<p>To test the complete workflow of building a DDS based application, you
can use a simple <em>Hello World!</em>. Although this application does not
reveal all the power of building a data-centric application, it has the
merit to introduce you to the basic steps to build a DDS application.</p>
<p>This chapter focuses on building this example, without analyzing the
source code, which is the subject of the next chapter.</p>
<p>The procedure used to build the <em>Hello World!</em> example can also be used
for building your own applications.</p>
<p>On Linux, if you have not specified an installation directory, it is
advised to copy the Cyclone DDS examples to your preferred directory.
You can find them in your <code class="docutils literal notranslate"><span class="pre">&lt;install-location&gt;</span></code> directory.</p>
<p>Six files are available under the <em>Hello</em> <em>World!</em> root directory to
support building the example. For this chapter, we mainly describe:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HelloWorldData.idl</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">publisher.c</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">subscriber.c</span></code></p></li>
</ul>
</section>
<section id="building-the-helloworld-application-with-cmake">
<h3>Building the <em>HelloWorld!</em> application with CMake<a class="headerlink" href="#building-the-helloworld-application-with-cmake" title="Permalink to this headline">¶</a></h3>
<p>In the previous sections, building the <em>Hello</em> <em>World!</em> example is done
by default during the Cyclone build process. However, the <em>Hello</em>
<em>World!</em> example can also be built using the <a class="reference external" href="http://cmake.org/">CMake
tool</a>, although you can obviously build with your
native compilers and preferred toolchains.</p>
<p><a class="reference external" href="http://cmake.org/">CMake</a> is an open-source, cross-platform family
of tools designed to build, test, and package software. It is used to
control the software compilation process using simple platform and
compiler independent configuration files. It also generates native
makefiles, projects, and workspaces of your development environment.
CMake’s main strength is build portability. The same CMake input files
build with GNU make, Visual studio 6,7,8 IDEs, Borland make, nmake, and
XCode, etc…</p>
<p>Another advantage of CMake is building out-of-source. It simply works
out-of-the-box. There are two important reasons to choose this means:</p>
<ul class="simple">
<li><p>Easy cleanup (no cluttering the source tree). Simply remove the build
directory to start from scratch.</p></li>
<li><p>Multiple build targets. It’s possible to have up-to-date Debug and
Release targets, without having to recompile the entire tree. For
systems that do cross-platform compilation, it is easy to have
up-to-date builds for the host and target platform.</p></li>
</ul>
<p>In order to use CMake you need to provide a <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code>. A sample
CMakeList file can be found within
<code class="docutils literal notranslate"><span class="pre">&lt;install-location&gt;/share/CycloneDDS/examples/helloworld/</span></code></p>
<p>The content of the <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> is:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">3.5</span><span class="p">)</span>

<span class="nb">if</span> <span class="p">(</span><span class="s">NOT</span><span class="w"> </span><span class="s">TARGET</span><span class="w"> </span><span class="s">CycloneDDS::ddsc</span><span class="p">)</span>
<span class="w">    </span><span class="c"># Find the Cyclone DDS package. If it is not in a default location, try</span>
<span class="w">    </span><span class="c"># finding it relative to the example where it most likely resides.</span>
<span class="w">    </span><span class="nb">find_package</span><span class="p">(</span><span class="s">CycloneDDS</span><span class="w"> </span><span class="s">REQUIRED</span><span class="w"> </span><span class="s">PATHS</span>
<span class="s2">&quot;${CMAKE_SOURCE_DIR}/../../&quot;</span><span class="p">)</span>
<span class="nb">endif</span><span class="p">()</span>

<span class="c"># This is a convenience function, provided by the CycloneDDS package,</span>
<span class="c"># that will supply a library target related the the given idl file.</span>
<span class="c"># In short, it takes the idl file, generates the source files with</span>
<span class="c"># the proper data types and compiles them into a library.</span>
<span class="nb">idlc_generate</span><span class="p">(</span><span class="s">HelloWorldData_lib</span><span class="w"> </span><span class="s2">&quot;HelloWorldData.idl&quot;</span><span class="p">)</span>

<span class="c"># Both executables have only one related source file.</span>
<span class="nb">add_executable</span><span class="p">(</span><span class="s">HelloworldPublisher</span><span class="w"> </span><span class="s">publisher.c</span><span class="p">)</span>
<span class="nb">add_executable</span><span class="p">(</span><span class="s">HelloworldSubscriber</span><span class="w"> </span><span class="s">subscriber.c</span><span class="p">)</span>

<span class="c"># Both executables need to be linked to the idl data type library and</span>
<span class="c"># the ddsc API library.</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">HelloworldPublisher</span><span class="w"> </span><span class="s">HelloWorldData_lib</span><span class="w"> </span><span class="s">CycloneDDS::ddsc</span><span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">HelloworldSubscriber</span><span class="w"> </span><span class="s">HelloWorldData_lib</span><span class="w"> </span><span class="s">CycloneDDS::ddsc</span><span class="p">)</span>
</pre></div>
</div>
<p>To build a Cyclone based application you need to link your business code
with:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">ddsc</span></code> library that contains the DDS API the application needs.</p></li>
<li><p>The helper functions and structures that represent your datatypes.
These helpers are generated by the Cyclone pre-compiler IDL and can
be accessed through the CMake (<code class="docutils literal notranslate"><span class="pre">idlc_generate</span></code>) call that takes the
idl file (e.g <code class="docutils literal notranslate"><span class="pre">HelloWorld.idl</span></code>) as input and packages the datatyped
helpers in a library (e.g. <code class="docutils literal notranslate"><span class="pre">HelloWorldData_lib</span></code>).</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">idlc_generate</span></code> call makes use of how the DDS IDLC-compiler
generates the helpers’ functions and structures.</p>
<p>This process is depicted as follows:</p>
<img alt="_images/2.2-1.png" class="align-center" src="_images/2.2-1.png" />
<p>The cyclone-based application executable (e.g. <code class="docutils literal notranslate"><span class="pre">HelloworldPublisher</span></code>)
is built with the CMake <code class="docutils literal notranslate"><span class="pre">target_link_libraries()</span></code> call. This call
combines the <code class="docutils literal notranslate"><span class="pre">ddsc</span></code> lib, the datatype helper lib, and the application
code lib.</p>
<p><strong>Note:</strong> CMake attempts to find the <code class="docutils literal notranslate"><span class="pre">CycloneDDS</span></code> CMake package in the
default location, two levels above the current source directory. Every
path and dependencies is automatically set. CMake uses the default
locations to locate the code CycloneDDS package.</p>
<section id="building-the-hello-world-example">
<h4>Building the Hello World! Example<a class="headerlink" href="#building-the-hello-world-example" title="Permalink to this headline">¶</a></h4>
<p>Now that CMakeLists.txt file is completed the build process can start</p>
<section id="on-linux">
<h5>On Linux<a class="headerlink" href="#on-linux" title="Permalink to this headline">¶</a></h5>
<p>It’s good practice to build examples or applications out-of-source by
creating a <code class="docutils literal notranslate"><span class="pre">build</span></code> directory in the
<code class="docutils literal notranslate"><span class="pre">cyclonedds/build/install/share/CycloneDDS/examples/helloworld</span></code>
directory.</p>
<p>Configure the build environment:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir build
<span class="nb">cd</span> build
cmake ../
</pre></div>
</div>
<p>CMake uses the CMakeLists.txt in the helloworld directory to create
makefiles that fit the native platform.</p>
<p>The real build process of the applications (<code class="docutils literal notranslate"><span class="pre">HelloworldPublisher</span></code> and
<code class="docutils literal notranslate"><span class="pre">HelloworldSubscriber</span></code> in this case) can start:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake --build .
</pre></div>
</div>
<p>The resulting Publisher and Subscriber applications can be found in
<code class="docutils literal notranslate"><span class="pre">examples/helloworld/build</span></code>.</p>
<p>The <em>Hello World!</em> example can now be executed, as described in <a class="reference external" href="#test-your-installation">Test
your installation</a> in the previous
chapter</p>
</section>
<section id="on-windows">
<h5>on Windows<a class="headerlink" href="#on-windows" title="Permalink to this headline">¶</a></h5>
<p>CMake usually knows which generator to use, but with Windows you must
supply a specific generator.</p>
<p>For example, only 64-bit libraries are shipped for Windows, by default
CMake generates a 32-bit project, resulting in linker errors. When
generating a Visual Studio project, if you want to generate a b4-bit
build, append <strong>Win64</strong> to the generator description.</p>
<p>The following example shows how to generate a Visual Studio 2015 project
with a 64-bit build:</p>
<div class="highlight-PowerShell notranslate"><div class="highlight"><pre><span></span><span class="n">cmake</span> <span class="n">-G</span> <span class="s2">&quot;Visual Studio 14 2015 Win64&quot;</span> <span class="p">..</span>
</pre></div>
</div>
<p><strong>Note:</strong> CMake generators can also create IDE environments. For
instance, the “Visual Studio 14 2015 Win64” generates a Visual Studio
solution file. Other IDE’s are also possible, such as Eclipse IDE.</p>
<p>CMake uses the <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> in the helloworld directory to create
makefiles that fit the native platform.</p>
<p>The real build process of the applications can start:</p>
<div class="highlight-PowerShell notranslate"><div class="highlight"><pre><span></span><span class="n">cmake</span> <span class="p">-</span><span class="n">-build</span> <span class="p">.</span>
</pre></div>
</div>
<p>To generate a Release build:</p>
<div class="highlight-PowerShell notranslate"><div class="highlight"><pre><span></span><span class="n">cmake</span> <span class="p">-</span><span class="n">-build</span> <span class="p">.</span> <span class="p">-</span><span class="n">-config</span> <span class="s2">&quot;Release&quot;</span>
</pre></div>
</div>
<p>The resulting Publisher and Subscriber applications can be found in <code class="docutils literal notranslate"><span class="pre">examples\helloworld\build\Release</span></code>.</p>
<p>The <em>Hello World!</em> example can now be executed, as described in <a class="reference external" href="#test-your-installation">Test
your installation</a>, using the binaries
built.</p>
</section>
</section>
</section>
</section>
<section id="hello-world-code-anatomy">
<h2>Hello World!, Code anatomy<a class="headerlink" href="#hello-world-code-anatomy" title="Permalink to this headline">¶</a></h2>
<p>The previous chapter described the installation process that built
implicitly or explicitly the C <em>Hello World!</em> Example. This chapter
introduces the key concept of DDS and details the structural code of a
simple system made by an application that publishes keyed messages and
another one that subscribes and reads such data. Each message represents
a data object that is uniquely identified with a unique key and a
payload.</p>
<section id="data-centric-architecture">
<h3>Data-Centric Architecture<a class="headerlink" href="#data-centric-architecture" title="Permalink to this headline">¶</a></h3>
<p>In a service-centric architecture, to interact, applications need to
know each other’s interfaces to share data, share events, share
commands, or replies. These interfaces are modeled as sets of operations
and functions that are managed in centralized repositories. This kind of
architecture creates unnecessary dependencies that end-up creating a
tightly coupled system. The centralized interface repositories are
usually seen as a single point of failure.</p>
<p>In a data-centric architecture, your design focuses on the data each
application produces and decides to share rather than on the Interfaces’
operations and the internal processing that produced them.</p>
<p>A data-centric architecture creates a decoupled system that focuses on
the data and applications states’ that need to be shared rather than the
applications’ details. In a data-centric system, data and their
associated quality of services are the only contract that bounds the
applications together. With DDS, the system decoupling is
bi-dimensional, in Space and in Time.</p>
<p>Space-decoupling derives from the fact that applications do not need to,
either know the identity of the data produced (or consumers) nor their
logical or their physical location in the network. Under the hood, DDS
runs a zero-configuration, interoperable discovery protocol that
searches matching data readers and data writes that are interested by
the same data topic.</p>
<p>Time-decoupling derives from the fact that, fundamentally, the nature of
the communication is asynchronous. Data producers and data consumers,
known respectively, as Data Writers, and data readers are not forced to
be active and connected at the same time to share data. In this
scenario, the DDS middleware can handle and manage data on behalf of the
late joining data readers applications and delivered to it when they
join the system.</p>
<p>Time and space decoupling gives applications the freedom to be plugged
or unplugged in the system at any time, from anywhere, in any order.
This keeps the complexity and administration of a data-centric
architecture relatively low when adding more and more data readers and
data writers applications.</p>
</section>
<section id="keys-steps-to-build-the-hello-world-application">
<span id="key-steps"></span><h3>Keys steps to build the Hello World! application<a class="headerlink" href="#keys-steps-to-build-the-hello-world-application" title="Permalink to this headline">¶</a></h3>
<p>The <em>Hello World!</em> example has a very simple ‘data layer’ with a data
model made of one data type <code class="docutils literal notranslate"><span class="pre">Msg</span></code> that represents keyed messages (c,f
next subsection).</p>
<p>To exchange data with Cyclone DDS, applications’ business logic needs
to:</p>
<ol class="arabic simple">
<li><p>Declare its participation and involvement in a <em>DDS domain</em>. A DDS
domain is an administrative boundary that defines, scopes, and
gathers all the DDS applications, data, and infrastructure that needs
to interconnect together by sharing the same data space. Each DDS
domain has a unique identifier. Applications declare their
participation within a DDS domain by creating a <strong>Domain Participant
entity</strong>.</p></li>
<li><p>Create a <strong>Data topic</strong> that has the data type described in a data
model. The data types define the structure of the Topic. The Topic is
therefore an association between the topic’s name and a datatype.
QoSs can be optionally added to this association. The concept Topic
therefore discriminates and categorizes the data in logical classes
and streams.</p></li>
<li><p>Create the <strong>Data Readers</strong> and <strong>Writers</strong> entities that are
specific to the topic. Applications may want to change the default
QoSs. In the Hello world! example, the <code class="docutils literal notranslate"><span class="pre">ReliabilityQoS</span></code> is changed
from its default value (<code class="docutils literal notranslate"><span class="pre">Best-effort</span></code>) to <code class="docutils literal notranslate"><span class="pre">Reliable</span></code>.</p></li>
<li><p>Once the previous DDS computational entities are in place, the
application logic can start writing or reading the data.</p></li>
</ol>
<p>At the application level, readers and writers do not need to be aware of
each other. The reading application, hereby called Subscriber polls the
data reader periodically, until a publishing application, hereby called
Publisher writes the required data into the shared topic, namely
<code class="docutils literal notranslate"><span class="pre">HelloWorldData_Msg</span></code>.</p>
<p>The data type is described using the OMG <a class="reference external" href="http://www.omg.org/gettingstarted/omg_idl.htm">IDL
Language</a> located in
<code class="docutils literal notranslate"><span class="pre">HelloWorldData.idl</span></code> file. Such IDL file is seen as the data model of
our example.</p>
<p>This data model is preprocessed and compiled by Cyclone-DDS IDL-Compiler
to generate a C representation of the data as described in Chapter 2.
These generated source and header files are used by the
<code class="docutils literal notranslate"><span class="pre">HelloworldSubscriber.c</span></code> and <code class="docutils literal notranslate"><span class="pre">HelloworldPublishe.c</span></code> programs to
share the <em>Hello</em> <em>World!</em> Message instance and sample.</p>
<section id="hello-world-idl">
<h4>Hello World! IDL<a class="headerlink" href="#hello-world-idl" title="Permalink to this headline">¶</a></h4>
<p>The HelloWorld data type is described in a language independent way and
stored in the HelloWorldData.idl file:</p>
<div class="highlight-omg-idl notranslate"><div class="highlight"><pre><span></span><span class="kn">module</span><span class="w"> </span><span class="nn">HelloWorldData</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">Msg</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nd">@key</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">userID</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kt">string</span><span class="w"> </span><span class="n">message</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">};</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<p>A subset of the OMG Interface Definition Language (IDL) is used as DDS
data definition language. In our simple example, the HelloWorld data
model is made of one module <code class="docutils literal notranslate"><span class="pre">HelloWorldData</span></code>. A module can be seen as
a namespace where data with interrelated semantic is represented
together in the same logical set.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">structMsg</span></code> is the actual data type that shapes the data used to
build topics. As already mentioned, a topic is an association between a
data type and a string name. The topic name is not defined in the IDL
file, but it is defined by the application business logic, at runtime.</p>
<p>In our simplistic case, the data type Msg contains two fields:
<code class="docutils literal notranslate"><span class="pre">userID</span></code> and <code class="docutils literal notranslate"><span class="pre">message</span></code> payload. The <code class="docutils literal notranslate"><span class="pre">userID</span></code> is used as a unique
identification of each message instance. This is done using the
<code class="docutils literal notranslate"><span class="pre">&#64;key</span></code> annotation.</p>
<p>The Cyclone DDS IDL compiler translates the IDL datatype in a C struct
with a name made of the<code class="docutils literal notranslate"><span class="pre">&lt;ModuleName&gt;_&lt;DataTypeName&gt;</span></code> .</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">HelloWorldData_Msg</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">userID</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">message</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">HelloWorldData_Msg</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Note:</strong> When translated into a different programming language, the
data has a different representation that is specific to the target
language. For instance, as shown in chapter 7, in C++ the Helloworld
data type is represented by a C++ class. This is the advantage of using
a neutral language like IDL to describe the data model.It can be
translated into different languages that can be shared between different
applications written in different programming languages.</p>
</section>
<section id="generated-files-with-the-idl-compiler">
<h4>Generated files with the IDL compiler<a class="headerlink" href="#generated-files-with-the-idl-compiler" title="Permalink to this headline">¶</a></h4>
<p>In Cyclone DDS the IDL compiler is a C program that processes .idl files.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>idlc HelloWorldData.idl
</pre></div>
</div>
<p>This results in new <code class="docutils literal notranslate"><span class="pre">HelloWorldData.c</span></code> and <code class="docutils literal notranslate"><span class="pre">HelloWorldData.h</span></code> files
that need to be compiled and their associated object file must be linked
with the <em>Hello World!</em> publisher and subscriber application business
logic. When using the Cyclone provided CMake project, this step is done
automatically.</p>
<p>As described earlier, the IDL compiler generates one source and one
header files. The header file (<code class="docutils literal notranslate"><span class="pre">HelloWorldData.h</span></code>) contains the data
type of the messages that are shared. While the source file has no
direct use from the application developer’s perspective.</p>
<p><code class="docutils literal notranslate"><span class="pre">HelloWorldData.h</span></code>* needs to be included by the application code as
it contains the actual message type and contains helper macros to
allocate and free memory space for the <code class="docutils literal notranslate"><span class="pre">HelloWorldData_Msg</span></code> type.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">HelloWorldData_Msg</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">userID</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">message</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">HelloWorldData_Msg</span><span class="p">;</span><span class="w"></span>

<span class="n">HelloWorldData_Msg_alloc</span><span class="p">()</span><span class="w"></span>
<span class="n">HelloWorldData_Msg_free</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">o</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>The header file also contains an extra variable that describes the data
type to the DDS middleware. This variable needs to be used by the
application when creating the topic.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">HelloWorldData_Msg_desc</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>
<section id="the-hello-world-business-logic">
<h3>The Hello World! Business Logic<a class="headerlink" href="#the-hello-world-business-logic" title="Permalink to this headline">¶</a></h3>
<p>As well as the <code class="docutils literal notranslate"><span class="pre">HelloWorldData.h/c</span></code> generated files, the <em>Hello
World!</em> example also contains two application-level source files
(<code class="docutils literal notranslate"><span class="pre">subscriber.c</span></code> and <code class="docutils literal notranslate"><span class="pre">publisher.c</span></code>), containing the business logic.</p>
<section id="hello-world-subscriber-source-code">
<h4><em>Hello</em> <em>World!</em> Subscriber Source Code<a class="headerlink" href="#hello-world-subscriber-source-code" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">Subscriber.c</span></code> mainly contains the statements to wait for a <em>Hello
World!</em> message and reads it when it receives it.</p>
<p><strong>Note:</strong> The Cyclone DDS <code class="docutils literal notranslate"><span class="pre">read</span></code> semantics keeps the data sample
in the data reader cache. It is important to remember to use <code class="docutils literal notranslate"><span class="pre">take</span></code> where
appropriate to prevent resource-exhaustion.</p>
<p>The subscriber application implements the steps defined in <a class="reference internal" href="#key-steps"><span class="std std-ref">the Key Steps</span></a>.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;ddsc/dds.h&quot;</span><span class="cp"></span>
<span class="linenos"> 2</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;HelloWorldData.h&quot;</span><span class="cp"></span>
<span class="linenos"> 3</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="linenos"> 4</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string.h&gt;</span><span class="cp"></span>
<span class="linenos"> 5</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="cm">/* An array of one message (aka sample in dds terms) will be used. */</span><span class="w"></span>
<span class="linenos"> 8</span><span class="cp">#define MAX_SAMPLES 1</span>
<span class="linenos"> 9</span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="w"> </span><span class="n">argv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">10</span><span class="w">  </span><span class="n">dds_entity_t</span><span class="w"> </span><span class="n">participant</span><span class="p">;</span><span class="w"></span>
<span class="linenos">11</span><span class="w">  </span><span class="n">dds_entity_t</span><span class="w"> </span><span class="n">topic</span><span class="p">;</span><span class="w"></span>
<span class="linenos">12</span><span class="w">  </span><span class="n">dds_entity_t</span><span class="w"> </span><span class="n">reader</span><span class="p">;</span><span class="w"></span>
<span class="linenos">13</span><span class="w">  </span><span class="n">HelloWorldData_Msg</span><span class="w"> </span><span class="o">*</span><span class="n">msg</span><span class="p">;</span><span class="w"></span>
<span class="linenos">14</span><span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">samples</span><span class="p">[</span><span class="n">MAX_SAMPLES</span><span class="p">];</span><span class="w"></span>
<span class="linenos">15</span><span class="w">  </span><span class="n">dds_sample_info_t</span><span class="w"> </span><span class="n">infos</span><span class="p">[</span><span class="n">MAX_SAMPLES</span><span class="p">];</span><span class="w"></span>
<span class="linenos">16</span><span class="w">  </span><span class="n">dds_return_t</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span><span class="w"></span>
<span class="linenos">17</span><span class="w">  </span><span class="n">dds_qos_t</span><span class="w"> </span><span class="o">*</span><span class="n">qos</span><span class="p">;</span><span class="w"></span>
<span class="linenos">18</span><span class="w">  </span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">argc</span><span class="p">;</span><span class="w"></span>
<span class="linenos">19</span><span class="w">  </span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">argv</span><span class="p">;</span><span class="w"></span>
<span class="linenos">20</span>
<span class="linenos">21</span><span class="w">  </span><span class="cm">/* Create a Participant. */</span><span class="w"></span>
<span class="linenos">22</span><span class="w">  </span><span class="n">participant</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dds_create_participant</span><span class="w"> </span><span class="p">(</span><span class="n">DDS_DOMAIN_DEFAULT</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span><span class="w"></span>
<span class="linenos">23</span><span class="w">  </span><span class="n">DDS_ERR_CHECK</span><span class="w"> </span><span class="p">(</span><span class="n">participant</span><span class="p">,</span><span class="w"> </span><span class="n">DDS_CHECK_REPORT</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">DDS_CHECK_EXIT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">24</span>
<span class="linenos">25</span><span class="w">  </span><span class="cm">/* Create a Topic. */</span><span class="w"></span>
<span class="linenos">26</span><span class="w">  </span><span class="n">topic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dds_create_topic</span><span class="w"> </span><span class="p">(</span><span class="n">participant</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">HelloWorldData_Msg_desc</span><span class="p">,</span><span class="w"></span>
<span class="linenos">27</span><span class="w">  </span><span class="s">&quot;HelloWorldData_Msg&quot;</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span><span class="w"></span>
<span class="linenos">28</span><span class="w">  </span><span class="n">DDS_ERR_CHECK</span><span class="w"> </span><span class="p">(</span><span class="n">topic</span><span class="p">,</span><span class="w"> </span><span class="n">DDS_CHECK_REPORT</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">DDS_CHECK_EXIT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">29</span>
<span class="linenos">30</span><span class="w">  </span><span class="cm">/* Create a reliable Reader. */</span><span class="w"></span>
<span class="linenos">31</span><span class="w">  </span><span class="n">qos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dds_create_qos</span><span class="w"> </span><span class="p">();</span><span class="w"></span>
<span class="linenos">32</span><span class="w">  </span><span class="n">dds_qset_reliability</span><span class="w"> </span><span class="p">(</span><span class="n">qos</span><span class="p">,</span><span class="w"> </span><span class="n">DDS_RELIABILITY_RELIABLE</span><span class="p">,</span><span class="w"> </span><span class="n">DDS_SECS</span><span class="w"> </span><span class="p">(</span><span class="mi">10</span><span class="p">));</span><span class="w"></span>
<span class="linenos">33</span><span class="w">  </span><span class="n">reader</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dds_create_reader</span><span class="w"> </span><span class="p">(</span><span class="n">participant</span><span class="p">,</span><span class="w"> </span><span class="n">topic</span><span class="p">,</span><span class="w"> </span><span class="n">qos</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span><span class="w"></span>
<span class="linenos">34</span><span class="w">  </span><span class="n">DDS_ERR_CHECK</span><span class="w"> </span><span class="p">(</span><span class="n">reader</span><span class="p">,</span><span class="w"> </span><span class="n">DDS_CHECK_REPORT</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">DDS_CHECK_EXIT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">35</span><span class="w">  </span><span class="n">dds_delete_qos</span><span class="p">(</span><span class="n">qos</span><span class="p">);</span><span class="w"></span>
<span class="linenos">36</span>
<span class="linenos">37</span><span class="w">  </span><span class="n">printf</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">=== [Subscriber] Waiting for a sample ...</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">38</span>
<span class="linenos">39</span><span class="w">  </span><span class="cm">/* Initialize sample buffer, by pointing the void pointer within</span>
<span class="linenos">40</span><span class="cm">  * the buffer array to a valid sample memory location. */</span><span class="w"></span>
<span class="linenos">41</span><span class="w">  </span><span class="n">samples</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HelloWorldData_Msg</span><span class="w"> </span><span class="n">alloc</span><span class="w"> </span><span class="p">();</span><span class="w"></span>
<span class="linenos">42</span>
<span class="linenos">43</span><span class="w">  </span><span class="cm">/* Poll until data has been read. */</span><span class="w"></span>
<span class="linenos">44</span><span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"></span>
<span class="linenos">45</span><span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="linenos">46</span><span class="w">    </span><span class="cm">/* Do the actual read.</span>
<span class="linenos">47</span><span class="cm">    * The return value contains the number of read samples. */</span><span class="w"></span>
<span class="linenos">48</span><span class="w">    </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dds_read</span><span class="w"> </span><span class="p">(</span><span class="n">reader</span><span class="p">,</span><span class="w"> </span><span class="n">samples</span><span class="p">,</span><span class="w"> </span><span class="n">infos</span><span class="p">,</span><span class="w"> </span><span class="n">MAX_SAMPLES</span><span class="p">,</span><span class="w"> </span><span class="n">MAX_SAMPLES</span><span class="p">);</span><span class="w"></span>
<span class="linenos">49</span><span class="w">    </span><span class="n">DDS_ERR_CHECK</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">,</span><span class="w"> </span><span class="n">DDS_CHECK_REPORT</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">DDS_CHECK_EXIT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">50</span>
<span class="linenos">51</span><span class="w">    </span><span class="cm">/* Check if we read some data and it is valid. */</span><span class="w"></span>
<span class="linenos">52</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="n">ret</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">infos</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">valid_data</span><span class="p">))</span><span class="w"></span>
<span class="linenos">53</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">54</span><span class="w">        </span><span class="cm">/* Print Message. */</span><span class="w"></span>
<span class="linenos">55</span><span class="w">        </span><span class="n">msg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">HelloWorldData_Msg</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">samples</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="w"></span>
<span class="linenos">56</span><span class="w">        </span><span class="n">printf</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;=== [Subscriber] Received : &quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">57</span><span class="w">        </span><span class="n">printf</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;Message (%d, %s)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">msg</span><span class="o">-&gt;</span><span class="n">userID</span><span class="p">,</span><span class="w"> </span><span class="n">msg</span><span class="o">-&gt;</span><span class="n">message</span><span class="p">);</span><span class="w"></span>
<span class="linenos">58</span><span class="w">        </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="linenos">59</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">60</span><span class="w">    </span><span class="k">else</span><span class="w"></span>
<span class="linenos">61</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">62</span><span class="w">        </span><span class="cm">/* Polling sleep. */</span><span class="w"></span>
<span class="linenos">63</span><span class="w">        </span><span class="n">dds_sleepfor</span><span class="w"> </span><span class="p">(</span><span class="n">DDS_MSECS</span><span class="w"> </span><span class="p">(</span><span class="mi">20</span><span class="p">));</span><span class="w"></span>
<span class="linenos">64</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">65</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">66</span>
<span class="linenos">67</span><span class="w">  </span><span class="cm">/* Free the data location. */</span><span class="w"></span>
<span class="linenos">68</span><span class="w">  </span><span class="n">HelloWorldData_Msg_free</span><span class="w"> </span><span class="p">(</span><span class="n">samples</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">DDS_FREE_ALL</span><span class="p">);</span><span class="w"></span>
<span class="linenos">69</span>
<span class="linenos">70</span><span class="w">  </span><span class="cm">/* Deleting the participant will delete all its children recursively as well. */</span><span class="w"></span>
<span class="linenos">71</span><span class="w">  </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dds_delete</span><span class="w"> </span><span class="p">(</span><span class="n">participant</span><span class="p">);</span><span class="w"></span>
<span class="linenos">72</span><span class="w">  </span><span class="n">DDS_ERR_CHECK</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">,</span><span class="w"> </span><span class="n">DDS_CHECK_REPORT</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">DDS_CHECK_EXIT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">73</span>
<span class="linenos">74</span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">EXIT_SUCCESS</span><span class="p">;</span><span class="w"></span>
<span class="linenos">75</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>Within the subscriber code, we mainly use the DDS API and the
<code class="docutils literal notranslate"><span class="pre">HelloWorldData_Msg</span></code> type. The following header files must be included:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">dds.h</span></code> file to give access to the DDS APIs</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">HelloWorldData.h</span></code> is specific to the data type defined in the IDL</p></li>
</ul>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;ddsc/dds.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;HelloWorldData.h&quot;</span><span class="cp"></span>
</pre></div>
</div>
<p>With Cyclone DDS, at least three DDS entities are needed to build a
minimalistic application, the domain participant, the topic, and the
reader. A DDS Subscriber entity is implicitly created by Cyclone DDS. If
required, this behavior can be overridden.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">dds_entity_t</span><span class="w"> </span><span class="n">participant</span><span class="p">;</span><span class="w"></span>
<span class="n">dds_entity_t</span><span class="w"> </span><span class="n">topic</span><span class="p">;</span><span class="w"></span>
<span class="n">dds_entity_t</span><span class="w"> </span><span class="n">reader</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>To handle the data, some buffers are declared and created:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">HelloWorldData_Msg</span><span class="w"> </span><span class="o">*</span><span class="n">msg</span><span class="p">;</span><span class="w"></span>
<span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">samples</span><span class="p">[</span><span class="n">MAX_SAMPLES</span><span class="p">];</span><span class="w"></span>
<span class="n">dds_sample_info_t</span><span class="w"> </span><span class="n">info</span><span class="p">[</span><span class="n">MAX_SAMPLES</span><span class="p">];</span><span class="w"></span>
</pre></div>
</div>
<p>As the <code class="docutils literal notranslate"><span class="pre">read()</span></code> operation may return more than one data sample (in the
event that several publishing applications are started simultaneously to
write different message instances), an array of samples is therefore
needed.</p>
<p>In Cyclone DDS data and metadata are propagated together. The
<code class="docutils literal notranslate"><span class="pre">dds_sample_info</span></code> array needs to be declared to handle the metadata.</p>
<p>The DDS participant is always attached to a specific DDS domain. In the
<em>Hello World!</em> example, it is part of the <code class="docutils literal notranslate"><span class="pre">Default_Domain</span></code>, the one
specified in the xml deployment file (see <a class="reference internal" href="#test-your-installation"><span class="std std-ref">test your installation</span></a> for more details).</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">participant</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dds_create_participant</span><span class="w"> </span><span class="p">(</span><span class="n">DDS_DOMAIN_DEFAULT</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>The next step is to create the topic with a given name. Topics with the
same data type description and with different names are considered
different topics. This means that readers or writers created for a given
topic do not interfere with readers or writers created with another
topic even if they have the same data type. Topics with the same name but
incompatible datatype is considered an error and should be avoided.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">topic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dds_create_topic</span><span class="w"> </span><span class="p">(</span><span class="n">participant</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">HelloWorldData_Msg_desc</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;HelloWorldData_Msg&quot;</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Once the topic is created, we can create a data reader and attach to it.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">dds_qos_t</span><span class="w"> </span><span class="o">*</span><span class="n">qos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dds_create_qos</span><span class="w"> </span><span class="p">();</span><span class="w"></span>
<span class="n">dds_qset_reliability</span><span class="w"> </span><span class="p">(</span><span class="n">qos</span><span class="p">,</span><span class="w"> </span><span class="n">DDS_RELIABILITY_RELIABLE</span><span class="p">,</span><span class="w"> </span><span class="n">DDS_SECS</span><span class="w"> </span><span class="p">(</span><span class="mi">10</span><span class="p">));</span><span class="w"></span>
<span class="n">reader</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dds_create_reader</span><span class="w"> </span><span class="p">(</span><span class="n">participant</span><span class="p">,</span><span class="w"> </span><span class="n">topic</span><span class="p">,</span><span class="w"> </span><span class="n">qos</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span><span class="w"></span>
<span class="n">dds_delete_qos</span><span class="p">(</span><span class="n">qos</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>The read operation expects an array of pointers to a valid memory
location. This means the samples array needs initialization by pointing
the void pointer within the buffer array to a valid sample memory
location.</p>
<p>In our example, we have an array of one element
(<code class="docutils literal notranslate"><span class="pre">#define</span> <span class="pre">MAX_SAMPLES</span> <span class="pre">1</span></code>.) we only need to allocate memory for one
<code class="docutils literal notranslate"><span class="pre">HelloWorldData_Msg</span></code>.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">samples</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HelloWorldData_Msg_alloc</span><span class="w"> </span><span class="p">();</span><span class="w"></span>
</pre></div>
</div>
<p>At this stage, we can attempt to read data by going into a polling loop
that regularly scrutinizes and examines the arrival of a message.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dds_read</span><span class="w"> </span><span class="p">(</span><span class="n">reader</span><span class="p">,</span><span class="w"> </span><span class="n">samples</span><span class="p">,</span><span class="w"> </span><span class="n">info</span><span class="p">,</span><span class="w"> </span><span class="n">MAX_SAMPLES</span><span class="p">,</span><span class="w"> </span><span class="n">MAX_SAMPLES</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">dds_read</span></code> operation returns the number of samples equal to the
parameter <code class="docutils literal notranslate"><span class="pre">MAX_SAMPLE</span></code>. If that number exceeds 0 that means data
arrived in the reader’s cache.</p>
<p>The Sample_info (<code class="docutils literal notranslate"><span class="pre">info</span></code>) structure tells us whether the data we are
reading is <em>Valid</em> or <em>Invalid</em>. Valid data means that it contains the
payload provided by the publishing application. Invalid data means, that
we are rather reading the DDS state of data Instance. The state of a
data instance can be for instance <em>DISPOSED</em> by the writer or it is
<em>NOT_ALIVE</em> anymore, which could happen if the publisher application
terminates while the subscriber is still active. In this case, the
sample is not considered as Valid, and its sample <code class="docutils literal notranslate"><span class="pre">info[].Valid_data</span></code>
field is be <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="n">ret</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">valid_data</span><span class="p">))</span><span class="w"></span>
</pre></div>
</div>
<p>If data is read, then we can cast the void pointer to the actual message
data type and display the contents.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">msg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">HelloWorldData_Msg</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">samples</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="w"></span>
<span class="n">printf</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;=== [Subscriber] Received : &quot;</span><span class="p">);</span><span class="w"></span>
<span class="n">printf</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;Message (%d, %s)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">msg</span><span class="o">-&gt;</span><span class="n">userID</span><span class="p">,</span><span class="w"> </span><span class="n">msg</span><span class="o">-&gt;</span><span class="n">message</span><span class="p">);</span><span class="w"></span>
<span class="k">break</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>When data is received and the polling loop is stopped, we release the
allocated memory and delete the domain participant.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">HelloWorldData_Msg_free</span><span class="w"> </span><span class="p">(</span><span class="n">samples</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">DDS_FREE_ALL</span><span class="p">);</span><span class="w"></span>
<span class="n">dds_delete</span><span class="w"> </span><span class="p">(</span><span class="n">participant</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>All the entities that are created under the participant, such as the
data reader and topic, are recursively deleted.</p>
</section>
<section id="hello-world-publisher-source-code">
<h4><em>Hello</em> <em>World!</em> Publisher Source Code<a class="headerlink" href="#hello-world-publisher-source-code" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">Publisher.c</span></code> contains the source that writes a <em>Hello World!</em>
Message.</p>
<p>From the DDS perspective, the publisher application code is almost
symmetric to the subscriber one, except that you need to create a data
writer instead of a data reader. To ensure data is written only when
Cyclone DDS discovers at least a matching reader, a synchronization
statement is added to the main thread. Synchronizing the main thread
until a reader is discovered ensures we can start the publisher or
subscriber program in any order.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;ddsc/dds.h&quot;</span><span class="cp"></span>
<span class="linenos"> 2</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;HelloWorldData.h&quot;</span><span class="cp"></span>
<span class="linenos"> 3</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="linenos"> 4</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="w"> </span><span class="n">argv</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 7</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 8</span><span class="w">    </span><span class="n">dds_entity_t</span><span class="w"> </span><span class="n">participant</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 9</span><span class="w">    </span><span class="n">dds_entity_t</span><span class="w"> </span><span class="n">topic</span><span class="p">;</span><span class="w"></span>
<span class="linenos">10</span><span class="w">    </span><span class="n">dds_entity_t</span><span class="w"> </span><span class="n">writer</span><span class="p">;</span><span class="w"></span>
<span class="linenos">11</span><span class="w">    </span><span class="n">dds_return_t</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span><span class="w"></span>
<span class="linenos">12</span><span class="w">    </span><span class="n">HelloWorldData_Msg</span><span class="w"> </span><span class="n">msg</span><span class="p">;</span><span class="w"></span>
<span class="linenos">13</span><span class="w">    </span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">argc</span><span class="p">;</span><span class="w"></span>
<span class="linenos">14</span><span class="w">    </span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">argv</span><span class="p">;</span><span class="w"></span>
<span class="linenos">15</span>
<span class="linenos">16</span><span class="w">    </span><span class="cm">/* Create a Participant. */</span><span class="w"></span>
<span class="linenos">17</span><span class="w">    </span><span class="n">participant</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dds_create_participant</span><span class="w"> </span><span class="p">(</span><span class="n">DDS_DOMAIN_DEFAULT</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span><span class="w"></span>
<span class="linenos">18</span><span class="w">    </span><span class="n">DDS_ERR_CHECK</span><span class="w"> </span><span class="p">(</span><span class="n">participant</span><span class="p">,</span><span class="w"> </span><span class="n">DDS_CHECK_REPORT</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">DDS_CHECK_EXIT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">19</span>
<span class="linenos">20</span><span class="w">    </span><span class="cm">/* Create a Topic. */</span><span class="w"></span>
<span class="linenos">21</span><span class="w">    </span><span class="n">topic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dds_create_topic</span><span class="w"> </span><span class="p">(</span><span class="n">participant</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">HelloWorldData_Msg_desc</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;HelloWorldData_Msg&quot;</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span><span class="w"></span>
<span class="linenos">22</span><span class="w">    </span><span class="n">DDS_ERR_CHECK</span><span class="w"> </span><span class="p">(</span><span class="n">topic</span><span class="p">,</span><span class="w"> </span><span class="n">DDS_CHECK_REPORT</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">DDS_CHECK_EXIT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">23</span>
<span class="linenos">24</span><span class="w">    </span><span class="cm">/* Create a Writer. */</span><span class="w"></span>
<span class="linenos">25</span><span class="w">    </span><span class="n">writer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dds_create_writer</span><span class="w"> </span><span class="p">(</span><span class="n">participant</span><span class="p">,</span><span class="w"> </span><span class="n">topic</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span><span class="w"></span>
<span class="linenos">26</span>
<span class="linenos">27</span><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;=== [Publisher] Waiting for a reader to be discovered ...</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">28</span>
<span class="linenos">29</span><span class="w">    </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dds_set_status_mask</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">DDS_PUBLICATION_MATCHED_STATUS</span><span class="p">);</span><span class="w"></span>
<span class="linenos">30</span><span class="w">    </span><span class="n">DDS_ERR_CHECK</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">,</span><span class="w"> </span><span class="n">DDS_CHECK_REPORT</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">DDS_CHECK_EXIT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">31</span>
<span class="linenos">32</span><span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"></span>
<span class="linenos">33</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">34</span><span class="w">        </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">status</span><span class="p">;</span><span class="w"></span>
<span class="linenos">35</span><span class="w">        </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dds_get_status_changes</span><span class="w"> </span><span class="p">(</span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">status</span><span class="p">);</span><span class="w"></span>
<span class="linenos">36</span><span class="w">        </span><span class="n">DDS_ERR_CHECK</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">,</span><span class="w"> </span><span class="n">DDS_CHECK_REPORT</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">DDS_CHECK_EXIT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">37</span>
<span class="linenos">38</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">status</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">DDS_PUBLICATION_MATCHED_STATUS</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">39</span><span class="w">            </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="linenos">40</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos">41</span><span class="w">        </span><span class="cm">/* Polling sleep. */</span><span class="w"></span>
<span class="linenos">42</span><span class="w">        </span><span class="n">dds_sleepfor</span><span class="w"> </span><span class="p">(</span><span class="n">DDS_MSECS</span><span class="w"> </span><span class="p">(</span><span class="mi">20</span><span class="p">));</span><span class="w"></span>
<span class="linenos">43</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">44</span>
<span class="linenos">45</span><span class="w">    </span><span class="cm">/* Create a message to write. */</span><span class="w"></span>
<span class="linenos">46</span><span class="w">    </span><span class="n">msg</span><span class="p">.</span><span class="n">userID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="linenos">47</span><span class="w">    </span><span class="n">msg</span><span class="p">.</span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Hello World&quot;</span><span class="p">;</span><span class="w"></span>
<span class="linenos">48</span>
<span class="linenos">49</span><span class="w">    </span><span class="n">printf</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;=== [Publisher]    Writing : &quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">50</span><span class="w">    </span><span class="n">printf</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;Message (%d, %s)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">msg</span><span class="p">.</span><span class="n">userID</span><span class="p">,</span><span class="w"> </span><span class="n">msg</span><span class="p">.</span><span class="n">message</span><span class="p">);</span><span class="w"></span>
<span class="linenos">51</span>
<span class="linenos">52</span><span class="w">    </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dds_write</span><span class="w"> </span><span class="p">(</span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">msg</span><span class="p">);</span><span class="w"></span>
<span class="linenos">53</span><span class="w">    </span><span class="n">DDS_ERR_CHECK</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">,</span><span class="w"> </span><span class="n">DDS_CHECK_REPORT</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">DDS_CHECK_EXIT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">54</span>
<span class="linenos">55</span><span class="w">    </span><span class="cm">/* Deleting the participant will delete all its children recursively as well. */</span><span class="w"></span>
<span class="linenos">56</span><span class="w">    </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dds_delete</span><span class="w"> </span><span class="p">(</span><span class="n">participant</span><span class="p">);</span><span class="w"></span>
<span class="linenos">57</span><span class="w">    </span><span class="n">DDS_ERR_CHECK</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="p">,</span><span class="w"> </span><span class="n">DDS_CHECK_REPORT</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">DDS_CHECK_EXIT</span><span class="p">);</span><span class="w"></span>
<span class="linenos">58</span>
<span class="linenos">59</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">EXIT_SUCCESS</span><span class="p">;</span><span class="w"></span>
<span class="linenos">60</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>We are using the DDS API and the <code class="docutils literal notranslate"><span class="pre">HelloWorldData_Msg</span></code> type to send
data, therefore, we need to include the appropriate header files as we
did in the subscriber code.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;ddsc/dds.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;HelloWorldData.h&quot;</span><span class="cp"></span>
</pre></div>
</div>
<p>Like with the reader in <code class="docutils literal notranslate"><span class="pre">subscriber.c</span></code>, we need a participant and a
topic to create a writer. We also need to use the same topic name as the
one specified in <code class="docutils literal notranslate"><span class="pre">subscriber.c</span></code>.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">dds_entity_t</span><span class="w"> </span><span class="n">participant</span><span class="p">;</span><span class="w"></span>
<span class="n">dds_entity_t</span><span class="w"> </span><span class="n">topic</span><span class="p">;</span><span class="w"></span>
<span class="n">dds_entity_t</span><span class="w"> </span><span class="n">writer</span><span class="p">;</span><span class="w"></span>

<span class="n">participant</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dds_create_participant</span><span class="w"> </span><span class="p">(</span><span class="n">DDS_DOMAIN_DEFAULT</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span><span class="w"></span>
<span class="n">topic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dds_create_topic</span><span class="w"> </span><span class="p">(</span><span class="n">participant</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">HelloWorldData_Msg_desc</span><span class="p">,</span><span class="w"></span>
<span class="s">&quot;HelloWorldData_Msg&quot;</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span><span class="w"></span>
<span class="n">writer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dds_create_writer</span><span class="w"> </span><span class="p">(</span><span class="n">participant</span><span class="p">,</span><span class="w"> </span><span class="n">topic</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>When Cyclone DDS discovers readers and writers sharing the same data
type and topic name, it connects them without the application
involvement. In order to write data only when a data readers appears, a
rendez-vous pattern is required. Such pattern can be implemented by
either:</p>
<ul class="simple">
<li><p>Waiting for the publication/subscription matched events, where the
Publisher waits and blocks the writing-thread until the appropriate
publication matched event is raised, or</p></li>
<li><p>Regularly, polls the publication matching status. This is the
preferred option we implement in this example. The following line of
code instructs Cyclone DDS to listen on the
DDS_PUBLICATION_MATCHED_STATUS:</p></li>
</ul>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">dds_set_status_mask</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="n">DDS_PUBLICATION_MATCHED_STATUS</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>At regular intervals we get the status change and a matching
publication. In between, the writing thread sleeps for a time period
equal <code class="docutils literal notranslate"><span class="pre">DDS\_MSECS</span></code> (in milliseconds).</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">while</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">status</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dds_get_status_changes</span><span class="w"> </span><span class="p">(</span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">status</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">DDS_ERR_CHECK</span><span class="p">(</span><span class="n">ret</span><span class="p">,</span><span class="w"> </span><span class="n">DDS_CHECK_REPORT</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">DDS_CHECK_EXIT</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">status</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">DDS_PUBLICATION_MATCHED_STATUS</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="cm">/* Polling sleep. */</span><span class="w"></span>
<span class="w">    </span><span class="n">dds_sleepfor</span><span class="w"> </span><span class="p">(</span><span class="n">DDS_MSECS</span><span class="w"> </span><span class="p">(</span><span class="mi">20</span><span class="p">));</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>After this loop, we are sure that a matching reader has been discovered.
Now, we commence the writing of the data instance. First, the data must
be created and initialized</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">HelloWorldData_Msg</span><span class="w"> </span><span class="n">msg</span><span class="p">;</span><span class="w"></span>

<span class="n">msg</span><span class="p">.</span><span class="n">userID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="n">msg</span><span class="p">.</span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Hello World&quot;</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>Then we can send the data instance of the keyed message.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dds_write</span><span class="w"> </span><span class="p">(</span><span class="n">writer</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">msg</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>When terminating the program, we free the DDS allocated resources by
deleting the root entity of all the others: the domain participant.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dds_delete</span><span class="w"> </span><span class="p">(</span><span class="n">participant</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>All the underlying entities such as topic, writer … etc are deleted.</p>
</section>
</section>
</section>
<section id="benchmarking-tools-for-cyclone">
<h2>Benchmarking Tools for Cyclone<a class="headerlink" href="#benchmarking-tools-for-cyclone" title="Permalink to this headline">¶</a></h2>
<section id="introduction">
<h3>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h3>
<p>Cyclone DDS provides a tool that measures primarily data <em>throughput</em>
and <em>latency</em> of the cyclone-based applications within the network or
within the same board, namely <em>ddsperf</em>. This tool also help to do
sanity checks to ensure your configuration is correctly set up and
running. This chapter describes how to use the <em>ddsperf</em> tool and how to
read and interpret its outputs and results. Using the Cyclone DDS Python
package you can also run <em>ddsperf</em> as a graphical application, by running
<em>cyclonedds performance</em>.</p>
<p>As well as <em>ddsperf</em>, you can also find dedicated examples in the
product distribution that measures the DDS system throughput and the
latency with their associated codebase. You can start from the provided
code and customize it to fit your scenario and exact data types. Both
<em>ddsperf</em>tool and the provided examples perform the benchmarking using
sequences of octets with different parameterized sizes.</p>
</section>
<section id="testing-your-network-configuration">
<h3>Testing your network configuration<a class="headerlink" href="#testing-your-network-configuration" title="Permalink to this headline">¶</a></h3>
<p>Once your Cyclone DDS installation is successfully completed, you may
want to test if your network environment is correctly set up. This can
be done either by running the <em>HelloWorld</em> example or by using the
<em>ddsperf</em> tool. The Helloworld example sends a message in one shot,
whereas the ddsperf tool can send a continuous stream of data at a low
frequency rate for sanity checks and can therefore bypass sporadic
network issues.</p>
<p>If you have installed Cyclone DDS using the product installer, the
<em>ddsperf</em> tool is pre-installed within <code class="docutils literal notranslate"><span class="pre">&lt;cyclonedds_dir&gt;/bin</span></code>. If you
have installed Cyclone DDS through the native installation process,
(from GitHub), you can locate the tool within
<code class="docutils literal notranslate"><span class="pre">&lt;cyclonedds_dir&gt;/build/bin</span></code>.</p>
<p>Complete the sanity checks of your DDS based system using the <em>ddsperf</em>
tool as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ddsperf sanity
</pre></div>
</div>
<p>With the sanity option, only one data sample is sent each second (1Hz).</p>
<p>In another terminal, start the <em>ddsperf</em> with the <strong>Pong</strong> mode to echo
the data to the first instance of the <em>ddsperf</em> started with the
<em>Sanity</em> option.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ddsperf pong
</pre></div>
</div>
<img alt="_images/4.2-1.png" class="align-center" src="_images/4.2-1.png" />
<p>If the data is not exchanged on the network between the two ddsperf
instances, it is likely that Cyclone DDS has not selected the
appropriate network card on both machines or a firewall in-between is
preventing the communication.</p>
<p>Cyclone DDS automatically selects the most available network interface.
This behavior can be overridden by changing the configuration file. (see
section <a class="reference internal" href="#test-your-installation"><span class="std std-ref">test your installation</span></a> for more details) .</p>
<p>When running the previous scenario on a local machine, this test ensures
the loop-back option is enabled.</p>
</section>
<section id="measuring-latency">
<h3>Measuring Latency<a class="headerlink" href="#measuring-latency" title="Permalink to this headline">¶</a></h3>
<p>To measure latency between two different applications, you need to run
two instances of the <em>ddsperf</em> tool and instruct one of them to endorse
the role of a <em>sender</em> that sends a given amount of data (a sequence of
octets) at a given rate and the other instance takes the role of
<em>receiver</em> that sends back the same amount of data to the sender in a
Ping-Pong scenario. The sending action is triggered by the <strong>Ping</strong>
option. The receiving behavior is triggered by the <strong>Pong</strong> action. The
sender measures the roundtrip time and computes the latency as half of
the roundtrip time.</p>
<p>The Ping-Pong scenario avoids clock desynchronization issues that might
occur between two machines that do not share accurately the same
perception of the time in the network.</p>
<img alt="_images/4.3-1.png" class="align-center" src="_images/4.3-1.png" />
<p>To differential the two operational modes, the <em>ddsperf</em> tool can
operate either in a <strong>Ping mode</strong> or in a <strong>Pong mode</strong>.</p>
<p>To run this scenario, open 2 terminals (e.g on Linux like OSs) and run
the following commands in either of the terminals. The graphical
<em>python-based</em> alternative is also noted.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ddsperf ping
cyclonedds performance ping
</pre></div>
</div>
<p>Input this command in another terminal:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ddsperf pong
cyclonedds performance pong
</pre></div>
</div>
<p>This basic scenario performs a simple latency test with all the default
values. You may customize your test scenario by changing the following
options.</p>
<ul class="simple">
<li><p>In <strong>Ping mode</strong> you can specify:</p>
<ul>
<li><p>The <strong>Rate</strong> and frequency at which data is written. This is
specified through the [R[Hz]] option. The default rate is “as fast as
possible”. In <strong>ping</strong> mode, it always sends a new ping as soon as it
gets a pong</p></li>
<li><p>The <strong>Size</strong> of the data that is exchanged. This is specified
through the [Size S] option. Using the default built-in topic, 12
bytes (an integer key, an integer sequence number, and an empty
sequence of bytes). are sent every time. The size is “as small as
possible” by default, depending on the size of the topic it defaults
to</p></li>
<li><p>The <strong>Listening</strong> mode, which can either be <code class="docutils literal notranslate"><span class="pre">waitset</span></code> based or
<code class="docutils literal notranslate"><span class="pre">Listener</span></code> Callbacks modes. In the waitset mode the <em>ddsperf</em>
application creates a dedicated thread to wait for the data to return
back from the receiving instance of <em>ddsperf</em> tool (i.e the instance
started with the Pong mode). In the Listener Callback mode, the
thread is created by the Cyclone DDS middleware. The Listener mode is
the default.</p></li>
</ul>
</li>
<li><p>In <strong>Pong mode</strong> you can only specify one option:</p>
<ul>
<li><p>The <strong>Listening</strong> mode (with two possible values, <code class="docutils literal notranslate"><span class="pre">waitset</span></code> or
<code class="docutils literal notranslate"><span class="pre">Listener</span></code>)</p></li>
</ul>
</li>
</ul>
<p>For instance, if you want to measure local latency between to processes
exchanging 2KB at the frequency of 50Hz, you can run the following
commands in 2 different terminals:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ddsperf ping 50Hz <span class="m">2048</span> waitset
cyclonedds performance ping --rate 50Hz --size <span class="m">2048</span> --triggering-mode waitset
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ddsperf pong waitset
cyclonedds performance pong --triggering-mode waitset
</pre></div>
</div>
<p>The output of the <em>ddsperf</em> tool is as shown below:</p>
<ol class="arabic simple">
<li><p>The output for the <strong>Ping</strong> application indicates mainly:</p></li>
</ol>
<ul class="simple">
<li><p>The <strong>size of the data</strong> involved in the test (e.g. 12 bytes)</p></li>
<li><p>The <strong>minimum latency</strong> (e.g. 78.89 us)</p></li>
<li><p>The <strong>maximum latency</strong> (e.g. 544,85 us)</p></li>
<li><p>The <strong>mean latency</strong> (e.g. 118.434 us)</p></li>
<li><p>As well as the latency at 50%, 90% or 99% of the time.</p></li>
</ul>
<img alt="_images/4.3-2.png" class="align-center" src="_images/4.3-2.png" />
<ol class="arabic simple" start="2">
<li><p>The output for the <strong>Pong</strong> application:</p></li>
</ol>
<ul class="simple">
<li><p><strong>RSS</strong> is the Resident Set Size; it indicates the amount of memory
used by the process (e.g. 3.5MB used by the process id 2680);</p></li>
<li><p><strong>VCSW</strong> is the number of voluntary switches, it indicates the
times when the process waits for input or an event (e.g. 2097 times);</p></li>
<li><p><strong>IVCSW</strong> is the number of involuntary switches, it indicates the
times when the process is pre-empted or blocked by a mutex (e.g. 6
times);</p></li>
<li><p>The percentage of time spent executing user code and the percentage
of time spent executing kernel code in a specific thread (e.g. spent
almost 0% of the time executing the user code and 5% executing kernel
code in thread “ping”).</p></li>
</ul>
<img alt="_images/4.3-3.png" class="align-center" src="_images/4.3-3.png" />
</section>
<section id="measuring-throughput">
<h3>Measuring Throughput<a class="headerlink" href="#measuring-throughput" title="Permalink to this headline">¶</a></h3>
<p>To measure throughput between two different applications, you need to
run at least two instances of the <em>ddsperf</em>tool and instruct one of
them to endorse the role of a Publisher that sends a given amount of
data (a sequence of octets) at a given rate. The other instances take
the role of Subscriber applications. Please note that when your scenario
involves only one subscriber, the UDP unicast mode is used. If several
subscriber instances are running, the multicast is automatically used.</p>
<img alt="_images/4.4-1.png" class="align-center" src="_images/4.4-1.png" />
<p>Two additional modes are therefore supported:</p>
<p>The <strong>Pub</strong> mode and the <strong>Sub</strong> mode.</p>
<p>In the Sub mode the subscriber operates either:</p>
<ul class="simple">
<li><p>Using the <strong>Listener</strong> notification mechanism,</p></li>
<li><p>The <strong>WaitSet</strong> notification mechanism, or</p></li>
<li><p>The <strong>Pooling</strong> mode. The pooling mode allows the subscriber to
cyclically fetch the data from its local cache instead of being
notified each time a new set of data is added to the subscriber’s
cache as is the case with the other modes.</p></li>
</ul>
<p>You can publish data in two ways by publishing each data sample
individually or by sending them in a <em>Burst</em> mode.</p>
<ul class="simple">
<li><p>The <strong>Rate</strong> and frequency at which data is written. This is
specified through the [R[Hz]] option. The default rate is “as fast as
possible”. Which means, in <strong>pub</strong> mode, instead of trying to reach a
certain rate, it just pushes data as hard as it can.</p></li>
<li><p>The <strong>Size</strong> of the data that is exchanged. This is specified through
the [Size S] option. The size is “as small as possible” by default,
depending on the size of the topic it defaults to.</p></li>
<li><p>The <strong>Burst Size</strong> , defines the number of data samples that are
issued together in as a batch. This parameter is defined by the
[Burst N] option. The default size for burst is 1. It doesn’t make
much difference when going “as fast as possible”, and it only applies
to the <strong>pub</strong> mode.</p></li>
<li><p>The triggering mode by default is <em>listener</em> for the <strong>ping</strong> ,
<strong>pong</strong> and <strong>sub</strong> mode.</p></li>
</ul>
<p>To run a simple throughput test, you can simply run a <strong>pub</strong> mode and a
<strong>sub</strong> mode in 2 different terminals without specifying any other
options or you can customize it as shown below:</p>
<p>Open two terminals, navigate to the directory where <em>ddsperf</em> is located
and write the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ddsperf pub size 1k
cyclonedds performance publish --size 1k
</pre></div>
</div>
<p>And in the other terminal, type in:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ddsperf -Qrss:1 sub
cyclonedds performance -Qrss:1 subscribe
</pre></div>
</div>
<p>This measures the throughput of data samples with 1Kbytes written as
fast as possible.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">-Qrss:1</span></code> option in <strong>sub</strong> mode sets the maximum allowed increase
in RSS as 1MB. When running the test, if the memory occupieds by the
process increases by less than 1MB, the test can successfully run.
Otherwise, an error message is printed out at the end of the test.</p>
<p>As the <code class="docutils literal notranslate"><span class="pre">pub</span></code> in this example only has a size of 1k, the sub does not
print out an RSS error message at the end of the test.</p>
<p>The output of the <em>ddsperf</em> tool when measuring throughput is as shown
below:</p>
<ol class="arabic simple">
<li><p>The output for the <strong>Pub</strong> application indicates mainly:</p></li>
</ol>
<ul class="simple">
<li><p><strong>RSS</strong> is the Resident Set Size; it indicates the amount of memory
is used by the process (e.g. 6.3MB used by the process id “4026”);</p></li>
<li><p><strong>VCSW</strong> is the number of voluntary switches, it indicates the
times when the process waits for input or an event (e.g. 1054 times);</p></li>
<li><p><strong>IVCSW</strong> is the number of involuntary switches, it indicates the
times when the process is pre-empted or blocked by a mutex (e.g. 24
times);</p></li>
<li><p>The percentage of time spent executing user code and the percentage
of time spent executing kernel code in a specific thread (e.g. spent
34% of the time executing the user code and 11% executing kernel code
in thread “pub”).</p></li>
</ul>
<img alt="_images/4.4-2.png" class="align-center" src="_images/4.4-2.png" />
<ol class="arabic simple" start="2">
<li><p>The output for the <strong>Sub</strong> application indicates mainly:</p></li>
</ol>
<ul class="simple">
<li><p>The <strong>size of the data</strong> involved in this test (e.g. 1024 bytes,
which is the “size 1k” defined in the pub command)</p></li>
<li><p>The <strong>total packets received</strong> (e.g. 614598);</p></li>
<li><p>The <strong>total packets lost</strong> t (e.g. 0);</p></li>
<li><p>The <strong>packets received in a 1 second reporting period</strong> (e.g.
212648);</p></li>
<li><p>The <strong>packets lost in a 1 second report period</strong> (e.g. 0);</p></li>
<li><p>The <strong>number of samples processed by the Sub application</strong> in 1s
(e.g. 21260 KS/s, with the unit KS/s is 1000 samples per second).</p></li>
</ul>
<img alt="_images/4.4-3.png" class="align-center" src="_images/4.4-3.png" />
</section>
<section id="measuring-throughput-and-latency-in-a-mixed-scenario">
<h3>Measuring Throughput and Latency in a mixed scenario<a class="headerlink" href="#measuring-throughput-and-latency-in-a-mixed-scenario" title="Permalink to this headline">¶</a></h3>
<p>In some scenarios, it might be useful to measure the throughput and
latency at the same time.</p>
<p>The <em>ddsperf</em> tool allows you to mix these two scenarios. To address
such cases the Ping mode can be combined with the Pub mode.</p>
<p>The [Ping x%] switch combined with the Pub mode allows you to send a
fraction of samples x% as if they were used in the Ping mode.</p>
<p>The different modes of the <em>ddsperf</em> tool are summarized in the figure
below.</p>
<img alt="_images/4.5-1.png" class="align-center" src="_images/4.5-1.png" />
<p>You can get more information for the <em>ddsperf</em> tool by using the [help]
option:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ddsperf <span class="nb">help</span>
cyclonedds performance --help
</pre></div>
</div>
</section>
<section id="additional-options">
<h3>Additional options<a class="headerlink" href="#additional-options" title="Permalink to this headline">¶</a></h3>
<p>As well as selecting the <code class="docutils literal notranslate"><span class="pre">mode</span></code>, you can also select the <code class="docutils literal notranslate"><span class="pre">options</span></code>
to specify how to send and receive the data (such as modifying the
reliable QoS from Reliable to Best-Effort with the <code class="docutils literal notranslate"><span class="pre">-u</span></code> option), or
how to evaluate or view the data in the <em>ddsperf</em>tool.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">options</span></code> you can select are listed in the <em>ddsperf</em> <code class="docutils literal notranslate"><span class="pre">help</span></code>
menu, as shown below.</p>
<img alt="_images/4.6-1.png" class="align-center" src="_images/4.6-1.png" />
</section>
</section>
<section id="installing-eclipse-cyclone-dds-cxx">
<h2>Installing Eclipse Cyclone DDS CXX<a class="headerlink" href="#installing-eclipse-cyclone-dds-cxx" title="Permalink to this headline">¶</a></h2>
<p>Cyclone DDS CXX is an implementation of the DDS ISO/IEC C++ PSM API,
or simply put, a C++ binding for Eclipse Cyclone DDS. It is made of an
IDL compiler that uses an IDL data model to generate their C++
representation and artifacts, a software layer that maps some DDS APIs
on the Cyclone DDS C APIs and direct access to the cyclone kernel APIs
when managing data to lower overhead.</p>
<img alt="_images/5-1.png" class="align-center" src="_images/5-1.png" />
<section id="id3">
<h3>System requirements<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>At the time of writing this document, Eclipse Cyclone DDS CXX supports
Linux, macOS, and Windows. Cyclone DDS CXX is known to work on FreeRTOS
and the solaris-like Openindiana OS.</p>
<p>To build the Cyclone DDS C++ binding, the following software should be
installed on your machine.</p>
<ul class="simple">
<li><p>C and C++ compilers (most commonly GCC on Linux, Visual Studio on
Windows, Xcode on macOS);</p></li>
<li><p><a class="reference external" href="https://git-scm.com/">Git</a> version control system,
<a class="reference external" href="https://cmake.org/download/">CMake</a>(version 3.7 or later);</p></li>
<li><p>Eclipse Cyclone DDS</p></li>
</ul>
<p>The installation of <a class="reference external" href="#installing-eclipse-cyclone-dds">Eclipse Cyclone
DDS</a> with the C language support
is described in Chapter 1. This chapter describes the CXX IDL compiler.</p>
</section>
<section id="id4">
<h3>Native Installation for Linux and macOS<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<section id="install-eclipse-cyclone-dds-cxx">
<h4>Install Eclipse Cyclone DDS CXX<a class="headerlink" href="#install-eclipse-cyclone-dds-cxx" title="Permalink to this headline">¶</a></h4>
<p>To obtain the C++ binding for Cyclone DDS:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/eclipse-cyclonedds/cyclonedds-cxx.git
</pre></div>
</div>
<section id="building">
<h5>Building<a class="headerlink" href="#building" title="Permalink to this headline">¶</a></h5>
<p>To build Cyclone DDS CXX, browse to the folder directory and create
a “build” folder to retain the build files.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> cyclonedds-cxx
mkdir build
</pre></div>
</div>
<p>Depending on whether you want to develop applications using Cyclone DDS
CXX or contribute to it, you may follow different procedures.</p>
</section>
<section id="id5">
<h5>For Application Developers<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h5>
<p>To build and install the required libraries needed to develop your
applications using the C++ binding for Cyclone DDS:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> build
cmake -DCMAKE_INSTALL_PREFIX<span class="o">=</span>&lt;cyclonedds-cxx-install-location&gt; -DCMAKE_PREFIX_PATH<span class="o">=</span><span class="s2">&quot;&lt;cyclonedds-install-location&gt;&quot;</span> -DBUILD_EXAMPLES<span class="o">=</span>ON ..
cmake --build .
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">&lt;cyclonedds-cxx-install-location&gt;</span></code> is where the C++ binding for
Cyclone DDS is installed to.</p>
<p>To install the package after a successful build:</p>
<p>Depending on the installation location you may need administrator
privileges.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake --build . --target install
</pre></div>
</div>
<p>This copies everything to:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;cyclonedds-cxx-install-location&gt;/lib</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;cyclonedds-cxx-install-location&gt;/bin</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;cyclonedds-cxx-install-location&gt;/include/ddsc</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;cyclonedds-cxx-install-location&gt;/share/CycloneDDS</span> <span class="pre">CXX</span></code></p></li>
</ul>
<p>At this point, you are ready to use Eclipse Cyclone DDS CXX in your
projects.</p>
<p><strong>Note:</strong> The default build type is a release build with debug
information included (<code class="docutils literal notranslate"><span class="pre">RelWithDebInfo</span></code>). This is a convenient type of
build to use for applications as it provides a good mix between
performance and the ability to debug things. If you’d rather have a
Debug or pure Release build, set <code class="docutils literal notranslate"><span class="pre">CMAKE_BUILD_TYPE</span></code> accordingly.</p>
<p>If you want to contribute to Cyclone DDS CXX, please refer to <a class="reference external" href="#appendix-ii-contributing-to-eclipse-cyclone-dds-cxx">Appendix
II Contributing to Eclipse Cyclone DDS
CXX</a>.</p>
</section>
</section>
</section>
<section id="id6">
<h3>Installation with product installer for Linux and macOS<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>TBD.</p>
</section>
<section id="id7">
<h3>Native Installation for Windows<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<section id="id8">
<h4>Install Eclipse Cyclone DDS CXX<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<p>To obtain the C++ binding for Cyclone DDS:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/eclipse-cyclonedds/cyclonedds-cxx.git
</pre></div>
</div>
<section id="id9">
<h5>Building<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h5>
<p>To build the Cyclone DDS CXX, browse to the folder directory and create
a “build” folder to retain all the build files.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> cyclonedds-cxx
mkdir build
</pre></div>
</div>
<p>Depending on whether you want to develop applications using Cyclone
DDS CXX or contribute to it, you may follow different procedures.</p>
</section>
<section id="id10">
<h5>For Application Developers<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h5>
<p>To build and install the required libraries needed to develop your
applications using the C++ binding for Cyclone DDS:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> build
cmake -G <span class="s2">&quot;&lt;generator-name&gt;&quot;</span> -DCMAKE_INSTALL_PREFIX<span class="o">=</span>&lt;cyclonedds-cxx-install-location&gt; -DCMAKE_PREFIX_PATH<span class="o">=</span><span class="s2">&quot;&lt;cyclonedds-install-location&gt;&quot;</span> -DBUILD_EXAMPLES<span class="o">=</span>ON ..
cmake --build .
</pre></div>
</div>
<p><strong>Note:</strong> Replace <code class="docutils literal notranslate"><span class="pre">&lt;generator-name&gt;</span></code> with one of the methods CMake
generators offer for generating build files. For example, for
“<code class="docutils literal notranslate"><span class="pre">Visual</span> <span class="pre">Studio</span> <span class="pre">16</span> <span class="pre">2019</span></code>” target a 64-bit build using Visual Studio
2019. And the command should be:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake -G <span class="s2">&quot;Visual Studio 16 2019&quot;</span> -DCMAKE_INSTALL_PREFIX<span class="o">=</span>&lt;cyclonedds-cxx-install-location&gt; -DCMAKE_PREFIX_PATH<span class="o">=</span><span class="s2">&quot;&lt;cyclonedds-install-location&gt;&quot;</span> -DBUILD_EXAMPLES<span class="o">=</span>ON ..
</pre></div>
</div>
<p>To install after a successful build:</p>
<p>Depending on the installation location you may need administrator
privileges.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake --build . --target install
</pre></div>
</div>
<p>This copies everything to:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;cyclonedds-cxx-install-location&gt;/lib</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;cyclonedds-cxx-install-location&gt;/bin</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;cyclonedds-cxx-install-location&gt;/include/ddsc</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;cyclonedds-cxx-install-location&gt;/share/CycloneDDS</span> <span class="pre">CXX</span></code></p></li>
</ul>
<p>At this point, you are ready to use Eclipse Cyclone DDS CXX in your
projects.</p>
<p><strong>Note:</strong> The default build type is a release build with debug
information included (<code class="docutils literal notranslate"><span class="pre">RelWithDebInfo</span></code>). This is a convenient type of
build to use for applications as it provides a good mix between
performance and the ability to debug things. If you prefer have a Debug
or pure Release build, set <code class="docutils literal notranslate"><span class="pre">CMAKE_BUILD_TYPE</span></code> accordingly.</p>
<p>If you want to contribute to Cyclone DDS CXX, refer to <a class="reference external" href="#appendix-ii-contributing-to-eclipse-cyclone-dds-cxx">Contributing to
Eclipse Cyclone DDS CXX for Windows in Appendix
II.</a></p>
</section>
</section>
</section>
<section id="id11">
<h3>Installation with product installer for Windows<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<p>Cyclone DDS CXX also provides a product installer, this may be easier
than installing it from GitHub.</p>
<p>To install the Cyclone DDS CXX from the installer, use the following
steps.</p>
<ol class="arabic simple">
<li><p>Start up the installer and click ‘Next’.</p></li>
</ol>
<img alt="_images/5.5-1.png" class="align-center" src="_images/5.5-1.png" />
<ol class="arabic simple" start="2">
<li><p>Agree to the terms, and click ‘Next’.</p></li>
</ol>
<img alt="_images/5.5-2.png" class="align-center" src="_images/5.5-2.png" />
<ol class="arabic simple" start="3">
<li><p>Choose whether you would like to add Cyclone DDS CXX to the system
PATH. We recommend to add it to the system PATH, so that your
application can use the related libraies directly. Select whether you
would like to add it for the current user or for all users and click
‘Next’.</p></li>
</ol>
<img alt="_images/5.5-3.png" class="align-center" src="_images/5.5-3.png" />
<ol class="arabic simple" start="4">
<li><p>Select the directory where you would like to install Cyclone DDS CXX.
Avoid installing it within the <code class="docutils literal notranslate"><span class="pre">Program</span> <span class="pre">Files</span></code> directory, as it
requires administrator privileges. Click ‘Next’.</p></li>
</ol>
<img alt="_images/5.5-4.png" class="align-center" src="_images/5.5-4.png" />
<ol class="arabic simple" start="5">
<li><p>You are now ready to install the Cyclone DDS CXX, click ‘Install’.</p></li>
</ol>
<img alt="_images/5.5-5.png" class="align-center" src="_images/5.5-5.png" />
<ol class="arabic simple" start="6">
<li><p>Click ‘Finish’.</p></li>
</ol>
<img alt="_images/5.5-6.png" class="align-center" src="_images/5.5-6.png" />
<p>The installation for Cyclone DDS CXX is complete, to build an
application using Cyclone DDS CXX, refer to <a class="reference external" href="#building-your-first-cyclonedds-cxx-example">how to build your first
Cyclone DDS CXX
example</a>.</p>
</section>
<section id="test-your-cxx-installation-for-native-installation">
<h3>Test your CXX Installation for Native Installation<a class="headerlink" href="#test-your-cxx-installation-for-native-installation" title="Permalink to this headline">¶</a></h3>
<section id="id12">
<h4>Environnement variable updates<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h4>
<p>To run an Eclipse Cyclone DDSCXX application, the required libraries
(such as ddsc.dll and ddscxx.dll) must be available in the executable
path. These libraries should be installed in the system default
location. However, if they are not installed there, the library search
path must be updated accordingly. On Linux use the command:</p>
<div class="highlight-PowerShell notranslate"><div class="highlight"><pre><span></span><span class="nb">Set </span><span class="n">PATH</span><span class="p">=&lt;</span><span class="n">cyclonedds-installation-location</span><span class="p">&gt;\</span><span class="n">bin</span><span class="p">;&lt;</span><span class="n">cyclonedds-cxx-installation-location</span><span class="p">&gt;\</span><span class="n">bin</span>
</pre></div>
</div>
<p><strong>Note:</strong> Alternatively, copy the required libraries to the executables’
directory.</p>
</section>
<section id="id13">
<h4>Running the pre-built example<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h4>
<p>A simple <em>Hello World</em> application is included in the Eclipse Cyclone
DDSCXX, it can be used to test the installation. The <em>Hello World</em>
application is located in:</p>
<ul class="simple">
<li><p><strong>Windows:</strong> <code class="docutils literal notranslate"><span class="pre">&lt;cyclonedds-cxx-directory&gt;\build\bin\Debug</span></code></p></li>
<li><p><strong>Linux:</strong> <code class="docutils literal notranslate"><span class="pre">&lt;cyclone-cxx-directory&gt;/build/bin</span></code></p></li>
</ul>
<p>To run the example application, open two console windows, and navigate
to the appropriate directory. Run the <code class="docutils literal notranslate"><span class="pre">ddscxxHelloworldPublisher</span></code> in
one of the console windows by using the following command:</p>
<ul class="simple">
<li><p><strong>Windows:</strong> <code class="docutils literal notranslate"><span class="pre">ddscxxHelloworldPublisher.exe</span></code></p></li>
<li><p><strong>Linux:</strong> <code class="docutils literal notranslate"><span class="pre">./ddscxxHelloworldPublisher</span></code></p></li>
</ul>
<p>Run the <code class="docutils literal notranslate"><span class="pre">ddscxxHelloworldSubscriber</span></code> in the other console window
using:</p>
<ul class="simple">
<li><p><strong>Windows:</strong> <code class="docutils literal notranslate"><span class="pre">ddscxxHelloworldSubscriber.exe</span></code></p></li>
<li><p><strong>Linux:</strong> <code class="docutils literal notranslate"><span class="pre">./ddscxxHelloworldSubscriber.exe</span></code></p></li>
</ul>
<p>The output for the <code class="docutils literal notranslate"><span class="pre">ddscxxHelloworldPublisher</span></code> is as follows:</p>
<img alt="_images/5.6.2-1.png" class="align-center" src="_images/5.6.2-1.png" />
<p>The output for the <code class="docutils literal notranslate"><span class="pre">ddscxxHelloworldSubscriber</span></code> is as follows:</p>
<img alt="_images/5.6.2-2.png" class="align-center" src="_images/5.6.2-2.png" />
<p>For more information on how to build this application and the code which
has been used, refer to <a class="reference external" href="#building-your-first-cyclonedds-cxx-example">Hello
World.</a></p>
</section>
</section>
<section id="uninstalling-cyclone-dds-cxx">
<h3>Uninstalling Cyclone DDS CXX<a class="headerlink" href="#uninstalling-cyclone-dds-cxx" title="Permalink to this headline">¶</a></h3>
<section id="id14">
<h4>Uninstallation for Native Installation<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h4>
<p>At this stage, you can manually remove the install and build directory.
Alternatively, in Linux and macOS, in the install or build directory,
use the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rm -rf *
</pre></div>
</div>
</section>
<section id="uninstallation-for-product-installer">
<h4>Uninstallation for product installer<a class="headerlink" href="#uninstallation-for-product-installer" title="Permalink to this headline">¶</a></h4>
<section id="id15">
<h5>Windows<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h5>
<p>To uninstall the Cyclone DDS CXX either remove it from Programs and
Features in the Control Panel or use the Cyclone DDS CXX installer. In
the latest case start Cyclone DDS CXX package, and choose ‘Remove’.</p>
<img alt="_images/5.7.2.1-1.png" class="align-center" src="_images/5.7.2.1-1.png" />
</section>
<section id="id16">
<h5>Linux and macOS<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h5>
<p>TBD.</p>
</section>
</section>
</section>
</section>
<section id="building-eclipse-cyclone-dds-cxx-applications">
<h2>Building Eclipse Cyclone DDS CXX applications<a class="headerlink" href="#building-eclipse-cyclone-dds-cxx-applications" title="Permalink to this headline">¶</a></h2>
<section id="building-your-first-cyclone-dds-cxx-example">
<h3>Building Your First Cyclone DDS CXX example<a class="headerlink" href="#building-your-first-cyclone-dds-cxx-example" title="Permalink to this headline">¶</a></h3>
<p>To test your installation, the <em>Hello World</em> example can be used. The
code of this application is detailed in the next chapter.</p>
<p>The <em>DDS CXX Hello World</em> example can be found in the
<code class="docutils literal notranslate"><span class="pre">&lt;cyclonedds-cxx-install-location&gt;/share/CycloneDDS</span> <span class="pre">CXX/helloworld</span></code>
directory for both Linux and Windows. This chapter describes the example
build process using the CMake.</p>
<section id="building-a-cyclone-dds-cxx-application-with-cmake">
<h4>Building a Cyclone DDS CXX application with CMake<a class="headerlink" href="#building-a-cyclone-dds-cxx-application-with-cmake" title="Permalink to this headline">¶</a></h4>
<p>The CMake build file for the <em>DDS CXX Hello World</em> example is located
under the <code class="docutils literal notranslate"><span class="pre">helloworld</span></code> directory (<code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code>).</p>
<p>The content of the <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> is as follows:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">project</span><span class="p">(</span><span class="s">helloworld</span><span class="w"> </span><span class="s">LANGUAGES</span><span class="w"> </span><span class="s">C</span><span class="w"> </span><span class="s">CXX</span><span class="p">)</span>
<span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">3.5</span><span class="p">)</span>

<span class="nb">if</span> <span class="p">(</span><span class="s">NOT</span><span class="w"> </span><span class="s">TARGET</span><span class="w"> </span><span class="s">CycloneDDS</span><span class="w"> </span><span class="s">CXX::ddscxx</span><span class="p">)</span>
<span class="w">  </span><span class="nb">find_package</span><span class="p">(</span><span class="s">CycloneDDS</span><span class="w"> </span><span class="s">CXX</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>
<span class="nb">endif</span><span class="p">()</span>

<span class="c"># Convenience function, provided by the idlc backend for CXX that generates a CMake</span>
<span class="c"># target for the given IDL file. The function calls idlc to generate</span>
<span class="c"># source files and compiles them into a library.</span>
<span class="nb">idlcxx_generate</span><span class="p">(</span><span class="s">TARGET</span><span class="w"> </span><span class="s">ddscxxHelloWorldData_lib</span><span class="w"> </span><span class="s">FILES</span><span class="w"> </span><span class="s">HelloWorldData.idl</span><span class="w"> </span><span class="s">WARNINGS</span><span class="w"> </span><span class="s">no-implicit-extensibility</span><span class="p">)</span>

<span class="nb">add_executable</span><span class="p">(</span><span class="s">ddscxxHelloworldPublisher</span><span class="w"> </span><span class="s">publisher.cpp</span><span class="p">)</span>
<span class="nb">add_executable</span><span class="p">(</span><span class="s">ddscxxHelloworldSubscriber</span><span class="w"> </span><span class="s">subscriber.cpp</span><span class="p">)</span>

<span class="c"># Link both executables to idl data type library and ddscxx.</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">ddscxxHelloworldPublisher</span><span class="w"> </span><span class="s">ddscxxHelloWorldData_lib</span><span class="w"> </span><span class="s">CycloneDDS</span><span class="w"> </span><span class="s">CXX::ddscxx</span><span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">ddscxxHelloworldSubscriber</span><span class="w"> </span><span class="s">ddscxxHelloWorldData_lib</span><span class="w"> </span><span class="s">CycloneDDS</span><span class="w"> </span><span class="s">CXX::ddscxx</span><span class="p">)</span>

<span class="nb">set_property</span><span class="p">(</span><span class="s">TARGET</span><span class="w"> </span><span class="s">ddscxxHelloworldPublisher</span><span class="w"> </span><span class="s">PROPERTY</span><span class="w"> </span><span class="s">CXX_STANDARD</span><span class="w"> </span><span class="s">11</span><span class="p">)</span>
<span class="nb">set_property</span><span class="p">(</span><span class="s">TARGET</span><span class="w"> </span><span class="s">ddscxxHelloworldSubscriber</span><span class="w"> </span><span class="s">PROPERTY</span><span class="w"> </span><span class="s">CXX_STANDARD</span><span class="w"> </span><span class="s">11</span><span class="p">)</span>
</pre></div>
</div>
<p>To build a Cyclone DDS CXX based application with CMake, you must link
your application business code with:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Cyclone</span> <span class="pre">DDS</span> <span class="pre">CXX</span></code> libraries that contain the DDS CXX API your
application needs.</p></li>
<li><p>The wrapper classes and structures that represent your datatypes and
the customized-data writers and readers that can handle these data
types. These classes are generated by the CMake statement
<code class="docutils literal notranslate"><span class="pre">idlcxx_generate()</span></code> that incepts the IDL file, invokes the
IDL compiler and packages the datatype wrapper classes in a library
(e.g. <code class="docutils literal notranslate"><span class="pre">ddscxxHelloWorldData_lib</span></code>).</p></li>
</ul>
<p>This process is depicted as follows:</p>
<img alt="_images/6.1.1-1.png" class="align-center" src="_images/6.1.1-1.png" />
<p>Setting the property for the applications in the CMake
<code class="docutils literal notranslate"><span class="pre">set_property()</span></code> statement, compiles the application against the
<code class="docutils literal notranslate"><span class="pre">C++</span> <span class="pre">11</span></code> standard.</p>
<p>The application executable (<code class="docutils literal notranslate"><span class="pre">ddscxxHellowordPublisher</span></code>) is built with
the CMake <code class="docutils literal notranslate"><span class="pre">target_link_libraries()</span></code> statement which links the ddscxx
lib, the datatype wrapper classes lib (e.g <code class="docutils literal notranslate"><span class="pre">ddscxxHelloWorldData_lib</span></code>)
and the application code lib.</p>
<p>The CMake tries to find the <code class="docutils literal notranslate"><span class="pre">CycloneDDS</span></code> and <code class="docutils literal notranslate"><span class="pre">CycloneDDSCXX</span></code>
CMake packages, the details regarding how to locate those packages are
described in the next section. When the packages are found, every path
and dependencies are automatically set.</p>
</section>
<section id="build-the-dds-cxx-hello-world-example">
<h4>Build the DDS CXX Hello World Example<a class="headerlink" href="#build-the-dds-cxx-hello-world-example" title="Permalink to this headline">¶</a></h4>
<p>To build the example, navigate to the example’s directory and create a
build folder.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir build
<span class="nb">cd</span> build
</pre></div>
</div>
<section id="building-the-dds-cxx-hello-world-example-on-linux-and-macos">
<h5>Building the DDS CXX Hello World example on Linux and macOS<a class="headerlink" href="#building-the-dds-cxx-hello-world-example-on-linux-and-macos" title="Permalink to this headline">¶</a></h5>
<p>To build the <em>DDS CXX Hello World</em> example, the <code class="docutils literal notranslate"><span class="pre">PREFIX_PATH</span></code> must be
specified, the command is:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir build
<span class="nb">cd</span> build
cmake -DCMAKE_PREFIX_PATH<span class="o">=</span><span class="s2">&quot;&lt;cyclone-install-location&gt;;&lt;cyclonedds-cxx-install-location&gt;&quot;</span> ..
cmake --build .
</pre></div>
</div>
<p>The <em>DDS CXX Hello World</em> example application can now be found in the
<code class="docutils literal notranslate"><span class="pre">helloworld/build</span></code> directory, use the method in <a class="reference external" href="#test-your-cxx-installation-for-native-installation">Test your CXX
installation</a>
to check if the application runs successfully.</p>
</section>
<section id="building-the-dds-cxx-hello-world-example-on-windows">
<h5>Building the DDS CXX Hello World example on Windows<a class="headerlink" href="#building-the-dds-cxx-hello-world-example-on-windows" title="Permalink to this headline">¶</a></h5>
<p>To build the <em>DDS CXX Hello World</em> example in Windows, it’s likely that
you have to specify the generator for CMake. For example, to generate a
Visual Studio 2017 project, use the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir build
<span class="nb">cd</span> build
cmake -G “Visual Studio <span class="m">15</span> <span class="m">2017</span> Win64” -DCMAKE_PREFIX_PATH<span class="o">=</span>”&lt;cyclone-install-location&gt;<span class="p">;</span>&lt;cyclonedds-cxx-install-location&gt;” ..
</pre></div>
</div>
<p>CMake uses the CMakeLists.txt in the helloworld directory to create
makefiles that fit the native platform.</p>
<p>Subsequently, build the example. We recommend you provide the config of
Visual Studio:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake --build . --config <span class="s2">&quot;Release&quot;</span>
</pre></div>
</div>
<p>The <em>DDS CXX Hello World</em> example application can now be found in the
<code class="docutils literal notranslate"><span class="pre">helloworld\build\Release</span></code> directory, use the method in <a class="reference external" href="#test-your-cxx-installation-for-native-installation">Test your CXX
installation</a>
to check if the application runs successfully.</p>
<p><strong>Note:</strong> If the <em>DDS CXX Hello World</em> application fails, please check
the <a class="reference external" href="#test-your-cxx-installation-for-native-installation">environment variable</a> is set up correctly.</p>
</section>
</section>
</section>
</section>
<section id="dds-cxx-hello-world-code-anatomy">
<h2>DDS CXX Hello World Code anatomy<a class="headerlink" href="#dds-cxx-hello-world-code-anatomy" title="Permalink to this headline">¶</a></h2>
<p>The previous chapter described the installation process that built
implicitly or explicitly the C++ <em>Hello World!</em> Example. The key concept
of DDS was introduced in Chapter 3. This chapter introduces the
structural code of a simple system made by an application that publishes
keyed messages and another one that subscribes and reads such data. Each
message represents a data object that is uniquely identified with a key
and a payload.</p>
<section id="keys-steps-to-build-the-hello-world-application-in-cxx">
<span id="key-steps-helloworld-cpp"></span><h3>Keys steps to build the Hello World! application in CXX<a class="headerlink" href="#keys-steps-to-build-the-hello-world-application-in-cxx" title="Permalink to this headline">¶</a></h3>
<p>The <em>Hello World!</em> example has a very simple ‘data layer’ with a data
model made of one data type <code class="docutils literal notranslate"><span class="pre">Msg</span></code> who represents keyed messages (c,f
next subsection).</p>
<p>To exchange data, applications’ business logic with Cyclone DDS must:</p>
<ol class="arabic simple">
<li><p>Declare its subscription and involvement into a <strong>DDS domain</strong>. A
DDS domain is an administrative boundary that defines, scopes and
gathers all the DDS applications, data, and infrastructure that needs
to interconnect and share the same data space. Each DDS domain has a
unique identifier. Applications declare their participation within a
DDS domain by creating a <strong>Domain Participant entity</strong>.</p></li>
<li><p>Create a <strong>Data topic</strong> that has the data type described in the data
model. The data types define the structure of the Topic. The Topic is
therefore an association between the topic name and datatype. QoSs
can be optionally added to this association. A Topic therefore
categories the data in logical classes and streams.</p></li>
<li><p>Create at least a <strong>Publisher</strong> , a <strong>Subscriber</strong>, and <strong>Data
Readers</strong> and <strong>Writers</strong> objects that are specific to the topic
created earlier. Applications may want to change the default QoSs at
this stage. In the Hello world! example, the <code class="docutils literal notranslate"><span class="pre">ReliabilityQoS</span></code> is
changed from its default value (Best-effort) to Reliable.</p></li>
<li><p>Once the previous DDS computational object s are in place, the
application logic can start writing or reading the data.</p></li>
</ol>
<p>At the application level, readers and writers do not need to be aware of
each other. The reading application, hereby designated as application
Subscriber polls the data reader periodically, until a writing
application, hereby called application Publisher, provides the required
data into the shared topic, namely <code class="docutils literal notranslate"><span class="pre">HelloWorldData_Msg</span></code>.</p>
<p>The data type is described using the OMG <a class="reference external" href="http://www.omg.org/gettingstarted/omg_idl.htm">IDL
Language</a> located in
<code class="docutils literal notranslate"><span class="pre">HelloWorldData.idl</span></code> file. This IDL file is considered the Data Model
of our example.</p>
<p>This data model is preprocessed and compiled by Cyclone-DDS CXX
IDL-Compiler to generate a CXX representation of the data as described
in Chapter 6. These generated source and header files are used by the
<code class="docutils literal notranslate"><span class="pre">HelloworldSubscriber.cpp</span></code> and <code class="docutils literal notranslate"><span class="pre">HelloworldPublisher.cpp</span></code>
applicationprograms to share the <em>Hello World!</em> Message instance and
sample.</p>
<section id="helloworld-idl">
<h4>HelloWorld IDL<a class="headerlink" href="#helloworld-idl" title="Permalink to this headline">¶</a></h4>
<p>As explained in chapter 3, the benefits of using IDL language to define
data is to have a data model that is independent from the programming
languages. The <code class="docutils literal notranslate"><span class="pre">HelloWorld.idl</span></code> IDL file used in chapter 3 can
therefore be reused, it is compiled to be used within C++ DDS based
applications.</p>
<p>The HelloWorld data type is described in a language independent way and
stored in the HelloWorldData.idl file (same as in chapter 3).</p>
<div class="highlight-omg-idl notranslate"><div class="highlight"><pre><span></span><span class="kn">module</span><span class="w"> </span><span class="nn">HelloWorldData</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">Msg</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nd">@key</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">userID</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kt">string</span><span class="w"> </span><span class="n">message</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">};</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<p>A subset of the OMG Interface Definition Language (IDL) is used as DDS
data definition language. In our simple example, the HelloWorld data
model is made of one module <code class="docutils literal notranslate"><span class="pre">HelloWorldData</span></code>. A module can be seen as
namespace where data with interrelated semantic is represented together
in the same logical set.</p>
<p>The struct Msg is the actual data structure that shapes the data used to
build the Topics. As already mentioned, a topic is basically an
association between a data type and a string name. The topic name is not
defined in the IDL file, but it is defined by the application business
logic, at runtime.</p>
<p>In our case, the data type <code class="docutils literal notranslate"><span class="pre">Msg</span></code> contains two fields: <code class="docutils literal notranslate"><span class="pre">userID</span></code> and
<code class="docutils literal notranslate"><span class="pre">message</span></code> payload. The <code class="docutils literal notranslate"><span class="pre">userID</span></code> is used as a unique identification
of each message instance. This is done using the
<code class="docutils literal notranslate"><span class="pre">&#64;key</span></code> annotation.</p>
<p>The Cyclone DDS CXX IDL compiler translates the module name into
namespaces and structure name into classes.</p>
<p>It also generates code for public accessor functions for all fields
mentioned in the IDL struct, separate public constructors, and a
destructor:</p>
<ul class="simple">
<li><p>A default (empty) constructor that recursively invokes the
constructors of all fields</p></li>
<li><p>A copy-constructor that performs a deep-copy from the existing class</p></li>
<li><p>A move-constructor that moves all arguments to its members</p></li>
</ul>
<p>The destructor recursively releases all fields. It also generates code
for assignment operators that recursively construct all fields based on
the parameter class (copy and move versions). The following code snippet is
provided without warrenty: the internal format can change, but it API it provides
to your application code is stable.</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="k">namespace</span><span class="w"> </span><span class="nn">HelloWorldData</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">class</span><span class="w"> </span><span class="nc">Msg</span><span class="w"> </span><span class="n">OSPL_DDS_FINAL</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="o">:</span><span class="w"></span>
<span class="w">        </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">userID_</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">message_</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="k">public</span><span class="o">:</span><span class="w"></span>
<span class="w">        </span><span class="n">Msg</span><span class="p">()</span><span class="w"> </span><span class="o">:</span><span class="w"></span>
<span class="w">                </span><span class="n">userID_</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>

<span class="w">        </span><span class="k">explicit</span><span class="w"> </span><span class="n">Msg</span><span class="p">(</span><span class="w"></span>
<span class="w">            </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">userID</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">message</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"></span>
<span class="w">                </span><span class="n">userID_</span><span class="p">(</span><span class="n">userID</span><span class="p">),</span><span class="w"></span>
<span class="w">                </span><span class="n">message_</span><span class="p">(</span><span class="n">message</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>

<span class="w">        </span><span class="n">Msg</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Msg</span><span class="w"> </span><span class="o">&amp;</span><span class="n">_other</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"></span>
<span class="w">                </span><span class="n">userID_</span><span class="p">(</span><span class="n">_other</span><span class="p">.</span><span class="n">userID_</span><span class="p">),</span><span class="w"></span>
<span class="w">                </span><span class="n">message_</span><span class="p">(</span><span class="n">_other</span><span class="p">.</span><span class="n">message_</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>

<span class="cp">#ifdef OSPL_DDS_CXX11</span>
<span class="w">        </span><span class="n">Msg</span><span class="p">(</span><span class="n">Msg</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="n">_other</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"></span>
<span class="w">                </span><span class="n">userID_</span><span class="p">(</span><span class="o">::</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">_other</span><span class="p">.</span><span class="n">userID_</span><span class="p">)),</span><span class="w"></span>
<span class="w">                </span><span class="n">message_</span><span class="p">(</span><span class="o">::</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">_other</span><span class="p">.</span><span class="n">message_</span><span class="p">))</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">        </span><span class="n">Msg</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">Msg</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="n">_other</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">_other</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="n">userID_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">::</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">_other</span><span class="p">.</span><span class="n">userID_</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="n">message_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">::</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">_other</span><span class="p">.</span><span class="n">message_</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="o">*</span><span class="k">this</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="cp">#endif</span>
<span class="w">        </span><span class="n">Msg</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Msg</span><span class="w"> </span><span class="o">&amp;</span><span class="n">_other</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">_other</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="n">userID_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_other</span><span class="p">.</span><span class="n">userID_</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">message_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_other</span><span class="p">.</span><span class="n">message_</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="o">*</span><span class="k">this</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="kt">bool</span><span class="w"> </span><span class="k">operator</span><span class="o">==</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Msg</span><span class="o">&amp;</span><span class="w"> </span><span class="n">_other</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">userID_</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">_other</span><span class="p">.</span><span class="n">userID_</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"></span>
<span class="w">                </span><span class="n">message_</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">_other</span><span class="p">.</span><span class="n">message_</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="kt">bool</span><span class="w"> </span><span class="k">operator</span><span class="o">!=</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Msg</span><span class="o">&amp;</span><span class="w"> </span><span class="n">_other</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="o">!</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">_other</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">userID</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">userID_</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="kt">int32_t</span><span class="o">&amp;</span><span class="w"> </span><span class="n">userID</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">userID_</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="n">userID</span><span class="p">(</span><span class="kt">int32_t</span><span class="w"> </span><span class="n">_val_</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">userID_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_val_</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">message</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">message_</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">message</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">message_</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="n">message</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">_val_</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">message_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_val_</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="cp">#ifdef OSPL_DDS_CXX11</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="n">message</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">_val_</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">message_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_val_</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="cp">#endif</span>
<span class="w">    </span><span class="p">};</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Note:</strong> When translated into a different programming language, the
data has a different representation that is specific to the target
language. For instance, as shown in chapter 3, in C the Helloworld data
type is represented by a C structure. This is the advantage of using a
neutral language like IDL to describe the data model. It can be
translated into different languages that can be shared between different
applications written in different programming languages.</p>
</section>
<section id="the-idl-compiler-generated-files">
<h4>The IDL compiler generated files<a class="headerlink" href="#the-idl-compiler-generated-files" title="Permalink to this headline">¶</a></h4>
<p>The IDL compiler is a bison-based parser written in pure C and should be
fast and portable. It loads dynamic libraries to support different output
languages, but this is almost never relevant to you as a user. You can use
<code class="docutils literal notranslate"><span class="pre">CMake</span></code> recipes as described above or invoke directly:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>idlc -l cxx HelloWorldData.idl
</pre></div>
</div>
<p>This results in the following new files that need to be compiled and
their associated object file linked with the Hello <em>World!</em> publisher
and subscriber application business logic:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">HelloWorldData.hpp</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HelloWorldData.cpp</span></code></p></li>
</ul>
<p>When using CMake to build the application, this step is hidden, and is
done automatically. For building with CMake, refer to <a class="reference external" href="#build-the-dds-cxx-hello-world-example">building the
Hello World example.</a></p>
<p><code class="docutils literal notranslate"><span class="pre">HelloWorldData.hpp</span></code> and <code class="docutils literal notranslate"><span class="pre">HelloWorldData.cpp</span></code> files contain the data
type of the messages that are shared.</p>
</section>
</section>
<section id="dds-cxx-hello-world-business-logic">
<h3>DDS CXX Hello World Business Logic<a class="headerlink" href="#dds-cxx-hello-world-business-logic" title="Permalink to this headline">¶</a></h3>
<p>As well as from the <code class="docutils literal notranslate"><span class="pre">HelloWorldData</span></code> data type files that the <em>DDS CXX
Hello World</em> example uses to send messages, the <em>DDS CXX Hello World!</em>
example also contains two application-level source files
(<code class="docutils literal notranslate"><span class="pre">subscriber.cpp</span></code> and <code class="docutils literal notranslate"><span class="pre">publisher.cpp</span></code>), containing the business
logic.</p>
<section id="dds-cxx-hello-world-subscriber-source-code">
<h4>DDS CXX <em>Hello World</em> Subscriber Source Code<a class="headerlink" href="#dds-cxx-hello-world-subscriber-source-code" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">Subscriber.cpp</span></code> file mainly contains the statements to wait for a
<em>Hello World</em> message and reads it when it receives it.</p>
<p><strong>Note:</strong> The read sematic keeps the data sample in the Data Reader
cache. The Subscriber application implements the steps defined in
<a class="reference internal" href="#key-steps-helloworld-cpp"><span class="std std-ref">Key Steps to build helloworld for C++</span></a>.</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;cstdlib&gt;</span><span class="cp"></span>
<span class="linenos"> 2</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="linenos"> 3</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;chrono&gt;</span><span class="cp"></span>
<span class="linenos"> 4</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;thread&gt;</span><span class="cp"></span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="cm">/* Include the C++ DDS API. */</span><span class="w"></span>
<span class="linenos"> 7</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;dds/dds.hpp&quot;</span><span class="cp"></span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="cm">/* Include data type and specific traits to be used with the C++ DDS API. */</span><span class="w"></span>
<span class="linenos">10</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;HelloWorldData.hpp&quot;</span><span class="cp"></span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">org</span><span class="o">::</span><span class="nn">eclipse</span><span class="o">::</span><span class="nn">cyclonedds</span><span class="p">;</span><span class="w"></span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">15</span><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">16</span><span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;=== [Subscriber] Create reader.&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="w">        </span><span class="cm">/* First, a domain participant is needed.</span>
<span class="linenos">19</span><span class="cm">         * Create one on the default domain. */</span><span class="w"></span>
<span class="linenos">20</span><span class="w">        </span><span class="n">dds</span><span class="o">::</span><span class="n">domain</span><span class="o">::</span><span class="n">DomainParticipant</span><span class="w"> </span><span class="n">participant</span><span class="p">(</span><span class="n">domain</span><span class="o">::</span><span class="n">default_id</span><span class="p">());</span><span class="w"></span>
<span class="linenos">21</span>
<span class="linenos">22</span><span class="w">        </span><span class="cm">/* To subscribe to something, a topic is needed. */</span><span class="w"></span>
<span class="linenos">23</span><span class="w">        </span><span class="n">dds</span><span class="o">::</span><span class="n">topic</span><span class="o">::</span><span class="n">Topic</span><span class="o">&lt;</span><span class="n">HelloWorldData</span><span class="o">::</span><span class="n">Msg</span><span class="o">&gt;</span><span class="w"> </span><span class="n">topic</span><span class="p">(</span><span class="n">participant</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ddscxx_helloworld_example&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">24</span>
<span class="linenos">25</span><span class="w">        </span><span class="cm">/* A reader also needs a subscriber. */</span><span class="w"></span>
<span class="linenos">26</span><span class="w">        </span><span class="n">dds</span><span class="o">::</span><span class="n">sub</span><span class="o">::</span><span class="n">Subscriber</span><span class="w"> </span><span class="n">subscriber</span><span class="p">(</span><span class="n">participant</span><span class="p">);</span><span class="w"></span>
<span class="linenos">27</span>
<span class="linenos">28</span><span class="w">        </span><span class="cm">/* Now, the reader can be created to subscribe to a HelloWorld message. */</span><span class="w"></span>
<span class="linenos">29</span><span class="w">        </span><span class="n">dds</span><span class="o">::</span><span class="n">sub</span><span class="o">::</span><span class="n">DataReader</span><span class="o">&lt;</span><span class="n">HelloWorldData</span><span class="o">::</span><span class="n">Msg</span><span class="o">&gt;</span><span class="w"> </span><span class="n">reader</span><span class="p">(</span><span class="n">subscriber</span><span class="p">,</span><span class="w"> </span><span class="n">topic</span><span class="p">);</span><span class="w"></span>
<span class="linenos">30</span>
<span class="linenos">31</span><span class="w">        </span><span class="cm">/* Poll until a message has been read.</span>
<span class="linenos">32</span><span class="cm">         * It isn&#39;t really recommended to do this kind wait in a polling loop.</span>
<span class="linenos">33</span><span class="cm">         * It&#39;s done here just to illustrate the easiest way to get data.</span>
<span class="linenos">34</span><span class="cm">         * Please take a look at Listeners and WaitSets for much better</span>
<span class="linenos">35</span><span class="cm">         * solutions, albeit somewhat more elaborate ones. */</span><span class="w"></span>
<span class="linenos">36</span><span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;=== [Subscriber] Wait for message.&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">37</span><span class="w">        </span><span class="kt">bool</span><span class="w"> </span><span class="n">poll</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"></span>
<span class="linenos">38</span>
<span class="linenos">39</span><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">poll</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">40</span><span class="w">            </span><span class="cm">/* For this example, the reader will return a set of messages (aka</span>
<span class="linenos">41</span><span class="cm">             * Samples). There are other ways of getting samples from reader.</span>
<span class="linenos">42</span><span class="cm">             * See the various read() and take() functions that are present. */</span><span class="w"></span>
<span class="linenos">43</span><span class="w">            </span><span class="n">dds</span><span class="o">::</span><span class="n">sub</span><span class="o">::</span><span class="n">LoanedSamples</span><span class="o">&lt;</span><span class="n">HelloWorldData</span><span class="o">::</span><span class="n">Msg</span><span class="o">&gt;</span><span class="w"> </span><span class="n">samples</span><span class="p">;</span><span class="w"></span>
<span class="linenos">44</span>
<span class="linenos">45</span><span class="w">            </span><span class="cm">/* Try taking samples from the reader. */</span><span class="w"></span>
<span class="linenos">46</span><span class="w">            </span><span class="n">samples</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reader</span><span class="p">.</span><span class="n">take</span><span class="p">();</span><span class="w"></span>
<span class="linenos">47</span>
<span class="linenos">48</span><span class="w">            </span><span class="cm">/* Are samples read? */</span><span class="w"></span>
<span class="linenos">49</span><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">samples</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">50</span><span class="w">                </span><span class="cm">/* Use an iterator to run over the set of samples. */</span><span class="w"></span>
<span class="linenos">51</span><span class="w">                </span><span class="n">dds</span><span class="o">::</span><span class="n">sub</span><span class="o">::</span><span class="n">LoanedSamples</span><span class="o">&lt;</span><span class="n">HelloWorldData</span><span class="o">::</span><span class="n">Msg</span><span class="o">&gt;::</span><span class="n">const_iterator</span><span class="w"> </span><span class="n">sample_iter</span><span class="p">;</span><span class="w"></span>
<span class="linenos">52</span><span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">sample_iter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">samples</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span><span class="w"></span>
<span class="linenos">53</span><span class="w">                     </span><span class="n">sample_iter</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">samples</span><span class="p">.</span><span class="n">end</span><span class="p">();</span><span class="w"></span>
<span class="linenos">54</span><span class="w">                     </span><span class="o">++</span><span class="n">sample_iter</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">55</span><span class="w">                    </span><span class="cm">/* Get the message and sample information. */</span><span class="w"></span>
<span class="linenos">56</span><span class="w">                    </span><span class="k">const</span><span class="w"> </span><span class="n">HelloWorldData</span><span class="o">::</span><span class="n">Msg</span><span class="o">&amp;</span><span class="w"> </span><span class="n">msg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sample_iter</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">();</span><span class="w"></span>
<span class="linenos">57</span><span class="w">                    </span><span class="k">const</span><span class="w"> </span><span class="n">dds</span><span class="o">::</span><span class="n">sub</span><span class="o">::</span><span class="n">SampleInfo</span><span class="o">&amp;</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sample_iter</span><span class="o">-&gt;</span><span class="n">info</span><span class="p">();</span><span class="w"></span>
<span class="linenos">58</span>
<span class="linenos">59</span><span class="w">                    </span><span class="cm">/* Sometimes a sample is read, only to indicate a data</span>
<span class="linenos">60</span><span class="cm">                     * state change (which can be found in the info). If</span>
<span class="linenos">61</span><span class="cm">                     * that&#39;s the case, only the key value of the sample</span>
<span class="linenos">62</span><span class="cm">                     * is set. The other data parts are not.</span>
<span class="linenos">63</span><span class="cm">                     * Check if this sample has valid data. */</span><span class="w"></span>
<span class="linenos">64</span><span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">info</span><span class="p">.</span><span class="n">valid</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">65</span><span class="w">                        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;=== [Subscriber] Message received:&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">66</span><span class="w">                        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;    userID  : &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">msg</span><span class="p">.</span><span class="n">userID</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">67</span><span class="w">                        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;    Message : </span><span class="se">\&quot;</span><span class="s">&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">msg</span><span class="p">.</span><span class="n">message</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\&quot;</span><span class="s">&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">68</span>
<span class="linenos">69</span><span class="w">                        </span><span class="cm">/* Only 1 message is expected in this example. */</span><span class="w"></span>
<span class="linenos">70</span><span class="w">                        </span><span class="n">poll</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="linenos">71</span><span class="w">                    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">72</span><span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="linenos">73</span><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">74</span><span class="w">                </span><span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">milliseconds</span><span class="p">(</span><span class="mi">20</span><span class="p">));</span><span class="w"></span>
<span class="linenos">75</span><span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="linenos">76</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos">77</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">78</span><span class="w">    </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">dds</span><span class="o">::</span><span class="n">core</span><span class="o">::</span><span class="n">Exception</span><span class="o">&amp;</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">79</span><span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cerr</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;=== [Subscriber] Exception: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">what</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">80</span><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">EXIT_FAILURE</span><span class="p">;</span><span class="w"></span>
<span class="linenos">81</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">82</span>
<span class="linenos">83</span><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;=== [Subscriber] Done.&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">84</span>
<span class="linenos">85</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">EXIT_SUCCESS</span><span class="p">;</span><span class="w"></span>
<span class="linenos">86</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>Within the subscriber code, we mainly use the DDS ISOCPP API and the
<code class="docutils literal notranslate"><span class="pre">HelloWorldData::Msg</span></code> type. Therefore, the following header files must
be included:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">dds.hpp</span></code> file give access to the DDS APIs,</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">HelloWorldData.hpp</span></code> is specific to the data type defined
in the IDL.</p></li>
</ul>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;dds/dds.hpp&quot;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;HelloWorldData.hpp&quot;</span><span class="cp"></span>
</pre></div>
</div>
<p>At least four DDS entities are needed, the domain participant, the topic
, the subscriber and the reader.</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="n">dds</span><span class="o">::</span><span class="n">domain</span><span class="o">::</span><span class="n">DomainParticipant</span><span class="w"> </span><span class="nf">participant</span><span class="p">(</span><span class="n">domain</span><span class="o">::</span><span class="n">default_id</span><span class="p">());</span><span class="w"></span>
<span class="n">dds</span><span class="o">::</span><span class="n">topic</span><span class="o">::</span><span class="n">Topic</span><span class="o">&lt;</span><span class="n">HelloWorldData</span><span class="o">::</span><span class="n">Msg</span><span class="o">&gt;</span><span class="w"> </span><span class="n">topic</span><span class="p">(</span><span class="n">participant</span><span class="p">,</span><span class="s">&quot;ddscxx_helloworld_example&quot;</span><span class="p">);</span><span class="w"></span>
<span class="n">dds</span><span class="o">::</span><span class="n">sub</span><span class="o">::</span><span class="n">Subscriber</span><span class="w"> </span><span class="nf">subscriber</span><span class="p">(</span><span class="n">participant</span><span class="p">);</span><span class="w"></span>
<span class="n">dds</span><span class="o">::</span><span class="n">sub</span><span class="o">::</span><span class="n">DataReader</span><span class="o">&lt;</span><span class="n">HelloWorldData</span><span class="o">::</span><span class="n">Msg</span><span class="o">&gt;</span><span class="w"> </span><span class="n">reader</span><span class="p">(</span><span class="n">subscriber</span><span class="p">,</span><span class="n">topic</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>The Cyclone DDS CXX API simplifies and extends how data can be read or
taken. To handle the data some <code class="docutils literal notranslate"><span class="pre">LoanedSamples</span></code> are declared and
created which loans samples from the Service pool. Return of the loan is
implicit and managed by scoping:</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="n">dds</span><span class="o">::</span><span class="n">sub</span><span class="o">::</span><span class="n">LoanedSamples</span><span class="o">&lt;</span><span class="n">HelloWorldData</span><span class="o">::</span><span class="n">Msg</span><span class="o">&gt;</span><span class="w"> </span><span class="n">samples</span><span class="p">;</span><span class="w"></span>
<span class="n">dds</span><span class="o">::</span><span class="n">sub</span><span class="o">::</span><span class="n">LoanedSamples</span><span class="o">&lt;</span><span class="n">HelloWorldData</span><span class="o">::</span><span class="n">Msg</span><span class="o">&gt;::</span><span class="n">const_iterator</span><span class="w"> </span><span class="n">sample_iter</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>As the <code class="docutils literal notranslate"><span class="pre">read(</span> <span class="pre">)/take()</span></code> operation may return more the one data sample
(in the event that several publishing applications are started
simultaneously to write different message instances), an iterator is
used.</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="k">const</span><span class="o">::</span><span class="n">HelloWorldData</span><span class="o">::</span><span class="n">Msg</span><span class="o">&amp;</span><span class="w"> </span><span class="n">msg</span><span class="p">;</span><span class="w"></span>
<span class="k">const</span><span class="w"> </span><span class="n">dds</span><span class="o">::</span><span class="n">sub</span><span class="o">::</span><span class="n">SampleInfo</span><span class="o">&amp;</span><span class="w"> </span><span class="n">info</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>In DDS data and metadata are propagated together. The samples are a set
of the data-samples ( i.e user defined data) and metadata describing the
sample state, validity etc ,,, (<code class="docutils literal notranslate"><span class="pre">info</span></code>). To get the data and its
metadata from each of the samples, we can use iterators.</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span><span class="w"></span>
<span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">dds</span><span class="o">::</span><span class="n">core</span><span class="o">::</span><span class="n">Exception</span><span class="o">&amp;</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cerr</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;=== [Subscriber] Exception: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">what</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">EXIT_FAILURE</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>It is good practice to surround every key verbs of the DDS APIs with
<code class="docutils literal notranslate"><span class="pre">try/catch</span></code> block to precisely locate issues when they occur. In this
example one block is used to facilitate the programming model of the
applications and improve their source code readability.</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="n">dds</span><span class="o">::</span><span class="n">domain</span><span class="o">::</span><span class="n">DomainParticipant</span><span class="w"> </span><span class="nf">participant</span><span class="p">(</span><span class="n">domain</span><span class="o">::</span><span class="n">default_id</span><span class="p">());</span><span class="w"></span>
</pre></div>
</div>
<p>The DDS participant is always attached to a specific DDS domain. In the
Hello World! example, it is part of the Default_Domain, the one
specified in the xml deployment file that you potentially be created
(i.e. the one pointing to <code class="docutils literal notranslate"><span class="pre">$CYCLONEDDS_URI</span></code>), please refer to
<a class="reference internal" href="#test-your-installation"><span class="std std-ref">testing your installation</span></a> for further details.</p>
<p>Subsequently, create a subscriber attached to your participant.</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="n">dds</span><span class="o">::</span><span class="n">sub</span><span class="o">::</span><span class="n">Subscriber</span><span class="w"> </span><span class="nf">subscriber</span><span class="p">(</span><span class="n">participant</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>The next step is to create the topic with a given
name(<code class="docutils literal notranslate"><span class="pre">ddscxx_helloworld_example</span></code>)and the predefined data
type(<code class="docutils literal notranslate"><span class="pre">HelloWorldData::Msg</span></code>). Topics with the same data type
description and with different names are considered different topics.
This means that readers or writers created for a given topic do not
interfere with readers or writers created with another topic even if
they are the same data type.</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="n">dds</span><span class="o">::</span><span class="n">topic</span><span class="o">::</span><span class="n">Topic</span><span class="o">&lt;</span><span class="n">HelloWorldData</span><span class="o">::</span><span class="n">Msg</span><span class="o">&gt;</span><span class="w"> </span><span class="n">topic</span><span class="p">(</span><span class="n">participant</span><span class="p">,</span><span class="s">&quot;ddscxx_helloworld_example&quot;</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Once the topic is created, we can create and associate to it a data
reader.</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="n">dds</span><span class="o">::</span><span class="n">sub</span><span class="o">::</span><span class="n">DataReader</span><span class="o">&lt;</span><span class="n">HelloWorldData</span><span class="o">::</span><span class="n">Msg</span><span class="o">&gt;</span><span class="w"> </span><span class="n">reader</span><span class="p">(</span><span class="n">subscriber</span><span class="p">,</span><span class="w"> </span><span class="n">topic</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>To modify the Data Reader Default Reliability Qos to Reliable:</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="n">dds</span><span class="o">::</span><span class="n">sub</span><span class="o">::</span><span class="n">qos</span><span class="o">::</span><span class="n">DataReaderQos</span><span class="w"> </span><span class="n">drqos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">topic</span><span class="p">.</span><span class="n">qos</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">dds</span><span class="o">::</span><span class="n">core</span><span class="o">::</span><span class="n">policy</span><span class="o">::</span><span class="n">Reliability</span><span class="o">::</span><span class="n">Reliable</span><span class="p">();</span><span class="w"></span>
<span class="n">dds</span><span class="o">::</span><span class="n">sub</span><span class="o">::</span><span class="n">DataReader</span><span class="o">&lt;</span><span class="n">HelloWorldData</span><span class="o">::</span><span class="n">Msg</span><span class="o">&gt;</span><span class="w"> </span><span class="n">dr</span><span class="p">(</span><span class="n">subscriber</span><span class="p">,</span><span class="w"> </span><span class="n">topic</span><span class="p">,</span><span class="w"> </span><span class="n">drqos</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>To retrieve data in your application code from the data reader’s cache
you can either use pre-allocated a buffer to store the data or loaned it
from the middleware.</p>
<p>If you decide to use a pre-allocated buffer, you create an array/vector
like container. If you use the loaned buffer option, you need to be
aware that these buffers are actually ‘owned’ by the middleware,
precisely by the DataReader. The Cyclone DDS CXX API allows you to
return the loans implicitly through scoping.</p>
<p>In our example we are using the loan samples mode (<code class="docutils literal notranslate"><span class="pre">LoanedSamples</span></code>).
<code class="docutils literal notranslate"><span class="pre">Samples</span></code> are an unbounded sequence of samples; the length of the
sequence depends on the amount of data available in the data reader’s
cache.</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="n">dds</span><span class="o">::</span><span class="n">sub</span><span class="o">::</span><span class="n">LoanedSamples</span><span class="o">&lt;</span><span class="n">HelloWorldData</span><span class="o">::</span><span class="n">Msg</span><span class="o">&gt;</span><span class="w"> </span><span class="n">samples</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>At this stage, we can attempt to read data by going into a polling loop
that regularly scrutinizes and examines the arrival of a message.
Samples are removed from the reader’s cache when taken with the
<code class="docutils literal notranslate"><span class="pre">take()</span></code>.</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="n">samples</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reader</span><span class="p">.</span><span class="n">take</span><span class="p">();</span><span class="w"></span>
</pre></div>
</div>
<p>If you choose to read the samples with <code class="docutils literal notranslate"><span class="pre">read()</span></code>, data remains in the
data reader cache. A length() of samples greater than zero indicates
that the data reader cache was not empty.</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">samples</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>As sequences are NOT pre-allocated by the user, buffers are ‘loaned’ to
him by the DataReader.</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="n">dds</span><span class="o">::</span><span class="n">sub</span><span class="o">::</span><span class="n">LoanedSamples</span><span class="o">&lt;</span><span class="n">HelloWorldData</span><span class="o">::</span><span class="n">Msg</span><span class="o">&gt;::</span><span class="n">const_iterator</span><span class="w"> </span><span class="n">sample_iter</span><span class="p">;</span><span class="w"></span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">sample_iter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">samples</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span><span class="w"></span>
<span class="w">     </span><span class="n">sample_iter</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">samples</span><span class="p">.</span><span class="n">end</span><span class="p">();</span><span class="w"></span>
<span class="w">     </span><span class="o">++</span><span class="n">sample_iter</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>For each individual sample, cast and extract its user defined data
(<code class="docutils literal notranslate"><span class="pre">Msg</span></code>) and metadate (<code class="docutils literal notranslate"><span class="pre">info</span></code>).</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="k">const</span><span class="w"> </span><span class="n">HelloWorldData</span><span class="o">::</span><span class="n">Msg</span><span class="o">&amp;</span><span class="w"> </span><span class="n">msg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sample_iter</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">();</span><span class="w"></span>
<span class="k">const</span><span class="w"> </span><span class="n">dds</span><span class="o">::</span><span class="n">sub</span><span class="o">::</span><span class="n">SampleInfo</span><span class="o">&amp;</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sample_iter</span><span class="o">-&gt;</span><span class="n">info</span><span class="p">();</span><span class="w"></span>
</pre></div>
</div>
<p>The SampleInfo (<code class="docutils literal notranslate"><span class="pre">info</span></code>) tells us whether the data we are taking is
<em>Valid</em> or <em>Invalid</em>. Valid data means that it contains the payload
provided by the publishing application. Invalid data means, that we are
reading the DDS state of data Instance. The state of a data instance can
be <code class="docutils literal notranslate"><span class="pre">DISPOSED</span></code> by the writer or it is <code class="docutils literal notranslate"><span class="pre">NOT_ALIVE</span></code> anymore, which
could happen if the publisher application terminates while the
subscriber is still active. In this case the sample is not considered
Valid, and its sample <code class="docutils literal notranslate"><span class="pre">info.valid()</span></code> field is False.</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">info</span><span class="p">.</span><span class="n">valid</span><span class="p">())</span><span class="w"></span>
</pre></div>
</div>
<p>As the sample contains valid data, we can safely display its content.</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;=== [Subscriber] Message received:&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;    userID  : &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">msg</span><span class="p">.</span><span class="n">userID</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;    Message : </span><span class="se">\&quot;</span><span class="s">&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">msg</span><span class="p">.</span><span class="n">message</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\&quot;</span><span class="s">&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>As we are using the Poll data reading mode, we repeat the above steps
every 20 milliseconds.</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">milliseconds</span><span class="p">(</span><span class="mi">20</span><span class="p">));</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>This example uses the polling mode to read or take data. Cyclone DDS
offers <em>waitSet</em> and <em>Listener</em> mechanism to notify the application that
data is available in their cache, which avoids polling the cache at a
regular intervals. The discretion of these mechanisms is beyond the
scope of this document.</p>
<p>All the entities that are created under the participant, such as the
Data Reader Subscriber and Topic, are automatically deleted by
middleware through the scoping mechanism.</p>
</section>
<section id="dds-cxx-hello-world-publisher-source-code">
<h4>DDS CXX <em>Hello World</em> Publisher Source Code<a class="headerlink" href="#dds-cxx-hello-world-publisher-source-code" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">Publisher.cpp</span></code> contains the source that writes a <em>Hello World</em>
message. From the DDS perspective, the publisher application code is
almost symmetrical to the subscriber one, except that you need to create
a Publisher and Data Writer respectively, instead of a Subscriber and
Data Reader. To ensure data is only written when Cyclone DDS discovers
at least a matching reader, a synchronization statement is added to the
main thread. Synchronizing the main thread until a reader is discovered
assures we can start the publisher or subscriber program in any order.</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;cstdlib&gt;</span><span class="cp"></span>
<span class="linenos"> 2</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="linenos"> 3</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;chrono&gt;</span><span class="cp"></span>
<span class="linenos"> 4</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;thread&gt;</span><span class="cp"></span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="cm">/* Include the C++ DDS API. */</span><span class="w"></span>
<span class="linenos"> 7</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;dds/dds.hpp&quot;</span><span class="cp"></span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="cm">/* Include data type and specific traits to be used with the C++ DDS API. */</span><span class="w"></span>
<span class="linenos">10</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;HelloWorldData.hpp&quot;</span><span class="cp"></span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">org</span><span class="o">::</span><span class="nn">eclipse</span><span class="o">::</span><span class="nn">cyclonedds</span><span class="p">;</span><span class="w"></span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">15</span><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">16</span><span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;=== [Publisher] Create writer.&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="w">        </span><span class="cm">/* First, a domain participant is needed.</span>
<span class="linenos">19</span><span class="cm">         * Create one on the default domain. */</span><span class="w"></span>
<span class="linenos">20</span><span class="w">        </span><span class="n">dds</span><span class="o">::</span><span class="n">domain</span><span class="o">::</span><span class="n">DomainParticipant</span><span class="w"> </span><span class="n">participant</span><span class="p">(</span><span class="n">domain</span><span class="o">::</span><span class="n">default_id</span><span class="p">());</span><span class="w"></span>
<span class="linenos">21</span>
<span class="linenos">22</span><span class="w">        </span><span class="cm">/* To publish something, a topic is needed. */</span><span class="w"></span>
<span class="linenos">23</span><span class="w">        </span><span class="n">dds</span><span class="o">::</span><span class="n">topic</span><span class="o">::</span><span class="n">Topic</span><span class="o">&lt;</span><span class="n">HelloWorldData</span><span class="o">::</span><span class="n">Msg</span><span class="o">&gt;</span><span class="w"> </span><span class="n">topic</span><span class="p">(</span><span class="n">participant</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ddscxx_helloworld_example&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">24</span>
<span class="linenos">25</span><span class="w">        </span><span class="cm">/* A writer also needs a publisher. */</span><span class="w"></span>
<span class="linenos">26</span><span class="w">        </span><span class="n">dds</span><span class="o">::</span><span class="n">pub</span><span class="o">::</span><span class="n">Publisher</span><span class="w"> </span><span class="n">publisher</span><span class="p">(</span><span class="n">participant</span><span class="p">);</span><span class="w"></span>
<span class="linenos">27</span>
<span class="linenos">28</span><span class="w">        </span><span class="cm">/* Now, the writer can be created to publish a HelloWorld message. */</span><span class="w"></span>
<span class="linenos">29</span><span class="w">        </span><span class="n">dds</span><span class="o">::</span><span class="n">pub</span><span class="o">::</span><span class="n">DataWriter</span><span class="o">&lt;</span><span class="n">HelloWorldData</span><span class="o">::</span><span class="n">Msg</span><span class="o">&gt;</span><span class="w"> </span><span class="n">writer</span><span class="p">(</span><span class="n">publisher</span><span class="p">,</span><span class="w"> </span><span class="n">topic</span><span class="p">);</span><span class="w"></span>
<span class="linenos">30</span>
<span class="linenos">31</span><span class="w">        </span><span class="cm">/* For this example, we&#39;d like to have a subscriber to actually read</span>
<span class="linenos">32</span><span class="cm">         * our message. This is not always necessary. Also, the way it is</span>
<span class="linenos">33</span><span class="cm">         * done here is just to illustrate the easiest way to do so. It isn&#39;t</span>
<span class="linenos">34</span><span class="cm">         * really recommended to do a wait in a polling loop, however.</span>
<span class="linenos">35</span><span class="cm">         * Please take a look at Listeners and WaitSets for much better</span>
<span class="linenos">36</span><span class="cm">         * solutions, albeit somewhat more elaborate ones. */</span><span class="w"></span>
<span class="linenos">37</span><span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;=== [Publisher] Waiting for subscriber.&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">38</span><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">writer</span><span class="p">.</span><span class="n">publication_matched_status</span><span class="p">().</span><span class="n">current_count</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">39</span><span class="w">            </span><span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">milliseconds</span><span class="p">(</span><span class="mi">20</span><span class="p">));</span><span class="w"></span>
<span class="linenos">40</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos">41</span>
<span class="linenos">42</span><span class="w">        </span><span class="cm">/* Create a message to write. */</span><span class="w"></span>
<span class="linenos">43</span><span class="w">        </span><span class="n">HelloWorldData</span><span class="o">::</span><span class="n">Msg</span><span class="w"> </span><span class="n">msg</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello World&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">44</span>
<span class="linenos">45</span><span class="w">        </span><span class="cm">/* Write the message. */</span><span class="w"></span>
<span class="linenos">46</span><span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;=== [Publisher] Write sample.&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">47</span><span class="w">        </span><span class="n">writer</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">msg</span><span class="p">);</span><span class="w"></span>
<span class="linenos">48</span>
<span class="linenos">49</span><span class="w">        </span><span class="cm">/* With a normal configuration (see dds::pub::qos::DataWriterQos</span>
<span class="linenos">50</span><span class="cm">         * for various different writer configurations), deleting a writer will</span>
<span class="linenos">51</span><span class="cm">         * dispose all its related message.</span>
<span class="linenos">52</span><span class="cm">         * Wait for the subscriber to have stopped to be sure it received the</span>
<span class="linenos">53</span><span class="cm">         * message. Again, not normally necessary and not recommended to do</span>
<span class="linenos">54</span><span class="cm">         * this in a polling loop. */</span><span class="w"></span>
<span class="linenos">55</span><span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;=== [Publisher] Waiting for sample to be accepted.&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">56</span><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">writer</span><span class="p">.</span><span class="n">publication_matched_status</span><span class="p">().</span><span class="n">current_count</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">57</span><span class="w">            </span><span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">milliseconds</span><span class="p">(</span><span class="mi">50</span><span class="p">));</span><span class="w"></span>
<span class="linenos">58</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos">59</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">60</span><span class="w">    </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">dds</span><span class="o">::</span><span class="n">core</span><span class="o">::</span><span class="n">Exception</span><span class="o">&amp;</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">61</span><span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cerr</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;=== [Publisher] Exception: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">what</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">62</span><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">EXIT_FAILURE</span><span class="p">;</span><span class="w"></span>
<span class="linenos">63</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">64</span>
<span class="linenos">65</span><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;=== [Publisher] Done.&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="linenos">66</span>
<span class="linenos">67</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">EXIT_SUCCESS</span><span class="p">;</span><span class="w"></span>
<span class="linenos">68</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>We are using the ISOCPP DDS API and the HelloWorldData to receive data.
For that, we need to include the appropriate header files.</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;dds/dds.hpp&quot;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;HelloWorldData.hpp&quot;</span><span class="cp"></span>
</pre></div>
</div>
<p>An exception handling mechanism <code class="docutils literal notranslate"><span class="pre">try/catch</span></code> block is used.</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// …</span>
<span class="p">}</span><span class="w"></span>
<span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">dds</span><span class="o">::</span><span class="n">core</span><span class="o">::</span><span class="n">Exception</span><span class="o">&amp;</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cerr</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;=== [Subscriber] Exception: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">what</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">EXIT_FAILURE</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>AS with the reader in <code class="docutils literal notranslate"><span class="pre">subscriber.cpp</span></code>, we need a participant, a
topic, and a publisher to be able to create a writer. We also need to
use the same topic name as the one specified in the <code class="docutils literal notranslate"><span class="pre">subscriber.cpp</span></code>.</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="n">dds</span><span class="o">::</span><span class="n">domain</span><span class="o">::</span><span class="n">DomainParticipant</span><span class="w"> </span><span class="nf">participant</span><span class="p">(</span><span class="n">domain</span><span class="o">::</span><span class="n">default_id</span><span class="p">());</span><span class="w"></span>
<span class="n">dds</span><span class="o">::</span><span class="n">topic</span><span class="o">::</span><span class="n">Topic</span><span class="o">&lt;</span><span class="n">HelloWorldData</span><span class="o">::</span><span class="n">Msg</span><span class="o">&gt;</span><span class="w"> </span><span class="n">topic</span><span class="p">(</span><span class="n">participant</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ddscxx_helloworld_example&quot;</span><span class="p">);</span><span class="w"></span>
<span class="n">dds</span><span class="o">::</span><span class="n">pub</span><span class="o">::</span><span class="n">Publisher</span><span class="w"> </span><span class="nf">publisher</span><span class="p">(</span><span class="n">participant</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>With these entities ready, the writer can now be created. The writer is
created for a specific topic <code class="docutils literal notranslate"><span class="pre">“ddscxx_helloworld_example”</span></code> in the
default DDS domain.</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="n">dds</span><span class="o">::</span><span class="n">pub</span><span class="o">::</span><span class="n">DataWriter</span><span class="o">&lt;</span><span class="n">HelloWorldData</span><span class="o">::</span><span class="n">Msg</span><span class="o">&gt;</span><span class="w"> </span><span class="n">writer</span><span class="p">(</span><span class="n">publisher</span><span class="p">,</span><span class="w"> </span><span class="n">topic</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>To modify the Data Writer Default Reliability Qos to Reliable:</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="n">dds</span><span class="o">::</span><span class="n">pub</span><span class="o">::</span><span class="n">qos</span><span class="o">::</span><span class="n">DataReaderQos</span><span class="w"> </span><span class="n">dwqos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">topic</span><span class="p">.</span><span class="n">qos</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">dds</span><span class="o">::</span><span class="n">core</span><span class="o">::</span><span class="n">policy</span><span class="o">::</span><span class="n">Reliability</span><span class="o">::</span><span class="n">Reliable</span><span class="p">();</span><span class="w"></span>
<span class="n">dds</span><span class="o">::</span><span class="n">sub</span><span class="o">::</span><span class="n">DataWriter</span><span class="o">&lt;</span><span class="n">HelloWorldData</span><span class="o">::</span><span class="n">Msg</span><span class="o">&gt;</span><span class="w"> </span><span class="n">dr</span><span class="p">(</span><span class="n">publisher</span><span class="p">,</span><span class="w"> </span><span class="n">topic</span><span class="p">,</span><span class="w"> </span><span class="n">dwqos</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>When Cyclone DDS discovers readers and writers sharing the same data
type and topic name, it connects them without the application
involvement. In order to write data only when a data reader appears, a
rendez-vous pattern is required. Such pattern can be implemented by
either:</p>
<ol class="arabic simple">
<li><p>Wait for the publication/subscription matched events, where the
Publisher waits and blocks the writing-thread until the appropriate
publication matched event is raised, or</p></li>
<li><p>Regularly, poll the publication matching status. This is the
preferred option used in this example.The following line of code
instructs Cyclone DDS to listen on the
<code class="docutils literal notranslate"><span class="pre">writer.publication_matched_status()</span></code></p></li>
</ol>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="n">dds</span><span class="o">::</span><span class="n">pub</span><span class="o">::</span><span class="n">DataWriter</span><span class="o">&lt;</span><span class="n">HelloWorldData</span><span class="o">::</span><span class="n">Msg</span><span class="o">&gt;</span><span class="w"> </span><span class="n">writer</span><span class="p">(</span><span class="n">publisher</span><span class="p">,</span><span class="w"> </span><span class="n">topic</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>At regular intervals, we get the status change and for a matching
publication. In between, the writing thread sleeps for 20 milliseconds.</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">writer</span><span class="p">.</span><span class="n">publication_matched_status</span><span class="p">().</span><span class="n">current_count</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">milliseconds</span><span class="p">(</span><span class="mi">20</span><span class="p">));</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>After this loop, we are certain that a matching reader has been
discovered. Now, we can commence the writing of the data instance.
First, the data must be created and initialized</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="n">HelloWorldData</span><span class="o">::</span><span class="n">Msg</span><span class="w"> </span><span class="nf">msg</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello World&quot;</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Send the data instance of the keyed message.</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="n">writer</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">msg</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>After writing the data to the writer, the <em>DDS CXX Hello World</em> example
checks if there is still a matching subscriber(s) available. If there is
a matching subscriber(s), the example waits for 50ms and start
publishing the data again. If no matching subscriber is found, then the
publisher program is ended.</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="k">return</span><span class="w"> </span><span class="n">EXIT_SUCCESS</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>Through scoping, all the entities such as topic, writer … etc are
deleted automatically.</p>
</section>
</section>
</section>
<section id="contributing-to-eclipse-cyclone-dds">
<h2>Contributing to Eclipse Cyclone DDS<a class="headerlink" href="#contributing-to-eclipse-cyclone-dds" title="Permalink to this headline">¶</a></h2>
<p>We welcome all contributions to the project, including questions,
examples, bug fixes, enhancements or improvements to the documentation,
etc.</p>
<p>If you want to contribute code, it is useful to know that build
configurations for Azure DevOps Pipelines are present in the repositories
and there is a test suite using CTest and CUnit that can be built
locally. The following sections explain how to do this for the different
operating systems.</p>
<section id="id17">
<h3>Linux and macOS<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<p>Set the CMake variable <code class="docutils literal notranslate"><span class="pre">BUILD_TESTING</span></code> to <code class="docutils literal notranslate"><span class="pre">ON</span></code> when configuring, e.g.:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> build
cmake -DCMAKE_BUILD_TYPE<span class="o">=</span>Debug -DBUILD_TESTING<span class="o">=</span>ON ..
cmake --build .
ctest
</pre></div>
</div>
<p><strong>Note:</strong> To install the Cyclone DDS package:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake -DCMAKE_INSTALL_PREFIX<span class="o">=</span>&lt;install-location&gt; ..
cmake --build . --target install
</pre></div>
</div>
<p>This build requires <a class="reference external" href="http://cunit.sourceforge.net/">CUnit</a>. You can
install this yourself, or you can choose to instead rely on the
<a class="reference external" href="https://conan.io/">Conan</a> packaging system that the CI build
infrastructure also uses. In that case, install Conan in the build
directory prior to running CMake:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conan install .. --build missing
</pre></div>
</div>
</section>
<section id="id18">
<h3>Windows<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
<p>Set the CMake variable <code class="docutils literal notranslate"><span class="pre">BUILD_TESTING</span></code> to <code class="docutils literal notranslate"><span class="pre">ON</span></code> when configuring, e.g.:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> build
cmake -DCMAKE_BUILD_TYPE<span class="o">=</span>Debug -DBUILD_TESTING<span class="o">=</span>ON ..
cmake --build .
ctest
</pre></div>
</div>
<p><strong>Note:</strong> To install the Cyclone DDS package:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake -DCMAKE_INSTALL_PREFIX<span class="o">=</span>&lt;install-location&gt; ..
cmake --build . --target install
</pre></div>
</div>
<p>This build requires <a class="reference external" href="http://cunit.sourceforge.net/">CUnit</a>. You can
install this yourself, or you can choose to instead rely on the
<a class="reference external" href="https://conan.io/">Conan</a> packaging system that the CI build
infrastructure also uses. In that case, install Conan in the build
directory prior to running CMake:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conan install .. --build missing
</pre></div>
</div>
<p><strong>Note:</strong> depending on the generator, you may also need to add switches
to select the architecture and build type, e.g.:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conan install -s <span class="nv">arch</span><span class="o">=</span>x86_64 -s <span class="nv">build_type</span><span class="o">=</span>Debug ..
</pre></div>
</div>
<dl class="simple">
<dt>This automatically downloads and/or builds CUnit</dt><dd><p>(and currently OpenSSL for transport security).</p>
</dd>
</dl>
</section>
</section>
<section id="contributing-to-eclipse-cyclone-dds-cxx">
<h2>Contributing to Eclipse Cyclone DDS CXX<a class="headerlink" href="#contributing-to-eclipse-cyclone-dds-cxx" title="Permalink to this headline">¶</a></h2>
<section id="id19">
<h3>Linux and macOS<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h3>
<p>Set the CMake variable <code class="docutils literal notranslate"><span class="pre">BUILD_TESTING</span></code> to <code class="docutils literal notranslate"><span class="pre">ON</span></code> when configuring.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> build
cmake -DCMAKE_BUILD_TYPE<span class="o">=</span>Debug -DBUILD_TESTING<span class="o">=</span>ON ..
cmake --build .
ctest
</pre></div>
</div>
<p><strong>Note:</strong> If CMake can not locate the Cyclone DDS:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake -DCMAKE_BUILD_TYPE<span class="o">=</span>Debug -DCMAKE_INSTALL_PREFIX<span class="o">=</span>&lt;install-location&gt; -DCMAKE_PREFIX_PATH<span class="o">=</span><span class="s2">&quot;&lt;cyclonedds-install-location&gt;&quot;</span> -DBUILD_TESTING<span class="o">=</span>ON ..
</pre></div>
</div>
<p>To install the package:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake --build . --target install
</pre></div>
</div>
<p>This build requires <a class="reference external" href="https://github.com/google/googletest">Google
Test</a>. You can install this
yourself, or you can choose to instead rely on the
<a class="reference external" href="https://conan.io/">Conan</a> package manager that the CI build
infrastructure also uses. In that case, install Conan in the build
directory prior to running CMake:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conan install .. --build missing
</pre></div>
</div>
<p>This automatically downloads and/or builds Google Test.</p>
</section>
<section id="id20">
<h3>Windows<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h3>
<p>Set the CMake variable <code class="docutils literal notranslate"><span class="pre">BUILD_TESTING</span></code> to on when configuring.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> build
cmake -DCMAKE_BUILD_TYPE<span class="o">=</span>Debug -DBUILD_TESTING<span class="o">=</span>ON ..
cmake --build .
ctest
</pre></div>
</div>
<p><strong>Note:</strong> If CMake can not locate the Cyclone DDS or IDL package:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake -DCMAKE_BUILD_TYPE<span class="o">=</span>Debug -DCMAKE_INSTALL_PREFIX<span class="o">=</span>&lt;install-location&gt; -DCMAKE_PREFIX_PATH<span class="o">=</span><span class="s2">&quot;&lt;cyclonedds-install-location&gt;&quot;</span> -DBUILD_TESTING<span class="o">=</span>ON ..
</pre></div>
</div>
<p>To install the package:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake --build . --target install
</pre></div>
</div>
<p>This build requires <a class="reference external" href="https://github.com/google/googletest">Google
Test</a>. You can install this
yourself, or you can choose to instead rely on the
<a class="reference external" href="https://conan.io/">Conan</a> package manager that the CI build
infrastructure also uses. In that case, install Conan in the build
directory prior to running CMake:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conan install .. --build missing
</pre></div>
</div>
<p>This automatically downloads and/or builds Google Test.</p>
<p><strong>Note:</strong> Depending on the generator, you may also need to add switches
to select the architecture and build type, e.g.:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conan install -s <span class="nv">arch</span><span class="o">=</span>x86_64 -s <span class="nv">build_type</span><span class="o">=</span>Debug ..
</pre></div>
</div>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
    
        <div id="show_right_sidebar">
            <p><a class="toggle_right_sidebar" href="#"><span class="icon"><</span><span>Page contents<span></a></p>
        </div>

        <div id="right_sidebar">
            <p><a class="toggle_right_sidebar" href="#"><span class="icon">></span><span>Page contents:<span></a></p>
            <div class="page_toc">
                <ul>
<li><a class="reference internal" href="#">Getting Started</a><ul>
<li><a class="reference internal" href="#installing-eclipse-cyclone-dds">Installing Eclipse Cyclone DDS</a><ul>
<li><a class="reference internal" href="#system-requirements">System requirements</a></li>
<li><a class="reference internal" href="#native-installation-for-linux-and-macos">Native Installation for Linux and macOS</a><ul>
<li><a class="reference internal" href="#for-application-developers">For Application Developers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#installation-with-product-installer-for-linux-and-macos">Installation with product installer for Linux and macOS</a></li>
<li><a class="reference internal" href="#native-installation-for-windows">Native Installation for Windows</a><ul>
<li><a class="reference internal" href="#id1">For Application Developers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#installation-with-product-installer-for-windows">Installation with product installer for Windows</a></li>
<li><a class="reference internal" href="#test-your-installation">Test your Installation</a><ul>
<li><a class="reference internal" href="#environnement-variable-updates">Environnement variable updates</a></li>
<li><a class="reference internal" href="#running-the-pre-built-example">Running the pre-built example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#want-to-know-more-about-dds">Want to know more about DDS?</a></li>
<li><a class="reference internal" href="#uninstalling-cyclone-dds">Uninstalling Cyclone DDS</a><ul>
<li><a class="reference internal" href="#uninstallation-for-native-installation">Uninstallation for Native Installation</a></li>
<li><a class="reference internal" href="#uninstallation-for-the-product-installer">Uninstallation for the product installer</a><ul>
<li><a class="reference internal" href="#windows">Windows</a></li>
<li><a class="reference internal" href="#linux-and-macos">Linux and macOS</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#building-cyclone-dds-applications">Building Cyclone DDS applications</a><ul>
<li><a class="reference internal" href="#building-your-first-example">Building Your First Example</a></li>
<li><a class="reference internal" href="#building-the-helloworld-application-with-cmake">Building the <em>HelloWorld!</em> application with CMake</a><ul>
<li><a class="reference internal" href="#building-the-hello-world-example">Building the Hello World! Example</a><ul>
<li><a class="reference internal" href="#on-linux">On Linux</a></li>
<li><a class="reference internal" href="#on-windows">on Windows</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#hello-world-code-anatomy">Hello World!, Code anatomy</a><ul>
<li><a class="reference internal" href="#data-centric-architecture">Data-Centric Architecture</a></li>
<li><a class="reference internal" href="#keys-steps-to-build-the-hello-world-application">Keys steps to build the Hello World! application</a><ul>
<li><a class="reference internal" href="#hello-world-idl">Hello World! IDL</a></li>
<li><a class="reference internal" href="#generated-files-with-the-idl-compiler">Generated files with the IDL compiler</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-hello-world-business-logic">The Hello World! Business Logic</a><ul>
<li><a class="reference internal" href="#hello-world-subscriber-source-code"><em>Hello</em> <em>World!</em> Subscriber Source Code</a></li>
<li><a class="reference internal" href="#hello-world-publisher-source-code"><em>Hello</em> <em>World!</em> Publisher Source Code</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#benchmarking-tools-for-cyclone">Benchmarking Tools for Cyclone</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#testing-your-network-configuration">Testing your network configuration</a></li>
<li><a class="reference internal" href="#measuring-latency">Measuring Latency</a></li>
<li><a class="reference internal" href="#measuring-throughput">Measuring Throughput</a></li>
<li><a class="reference internal" href="#measuring-throughput-and-latency-in-a-mixed-scenario">Measuring Throughput and Latency in a mixed scenario</a></li>
<li><a class="reference internal" href="#additional-options">Additional options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#installing-eclipse-cyclone-dds-cxx">Installing Eclipse Cyclone DDS CXX</a><ul>
<li><a class="reference internal" href="#id3">System requirements</a></li>
<li><a class="reference internal" href="#id4">Native Installation for Linux and macOS</a><ul>
<li><a class="reference internal" href="#install-eclipse-cyclone-dds-cxx">Install Eclipse Cyclone DDS CXX</a><ul>
<li><a class="reference internal" href="#building">Building</a></li>
<li><a class="reference internal" href="#id5">For Application Developers</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id6">Installation with product installer for Linux and macOS</a></li>
<li><a class="reference internal" href="#id7">Native Installation for Windows</a><ul>
<li><a class="reference internal" href="#id8">Install Eclipse Cyclone DDS CXX</a><ul>
<li><a class="reference internal" href="#id9">Building</a></li>
<li><a class="reference internal" href="#id10">For Application Developers</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id11">Installation with product installer for Windows</a></li>
<li><a class="reference internal" href="#test-your-cxx-installation-for-native-installation">Test your CXX Installation for Native Installation</a><ul>
<li><a class="reference internal" href="#id12">Environnement variable updates</a></li>
<li><a class="reference internal" href="#id13">Running the pre-built example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#uninstalling-cyclone-dds-cxx">Uninstalling Cyclone DDS CXX</a><ul>
<li><a class="reference internal" href="#id14">Uninstallation for Native Installation</a></li>
<li><a class="reference internal" href="#uninstallation-for-product-installer">Uninstallation for product installer</a><ul>
<li><a class="reference internal" href="#id15">Windows</a></li>
<li><a class="reference internal" href="#id16">Linux and macOS</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#building-eclipse-cyclone-dds-cxx-applications">Building Eclipse Cyclone DDS CXX applications</a><ul>
<li><a class="reference internal" href="#building-your-first-cyclone-dds-cxx-example">Building Your First Cyclone DDS CXX example</a><ul>
<li><a class="reference internal" href="#building-a-cyclone-dds-cxx-application-with-cmake">Building a Cyclone DDS CXX application with CMake</a></li>
<li><a class="reference internal" href="#build-the-dds-cxx-hello-world-example">Build the DDS CXX Hello World Example</a><ul>
<li><a class="reference internal" href="#building-the-dds-cxx-hello-world-example-on-linux-and-macos">Building the DDS CXX Hello World example on Linux and macOS</a></li>
<li><a class="reference internal" href="#building-the-dds-cxx-hello-world-example-on-windows">Building the DDS CXX Hello World example on Windows</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#dds-cxx-hello-world-code-anatomy">DDS CXX Hello World Code anatomy</a><ul>
<li><a class="reference internal" href="#keys-steps-to-build-the-hello-world-application-in-cxx">Keys steps to build the Hello World! application in CXX</a><ul>
<li><a class="reference internal" href="#helloworld-idl">HelloWorld IDL</a></li>
<li><a class="reference internal" href="#the-idl-compiler-generated-files">The IDL compiler generated files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dds-cxx-hello-world-business-logic">DDS CXX Hello World Business Logic</a><ul>
<li><a class="reference internal" href="#dds-cxx-hello-world-subscriber-source-code">DDS CXX <em>Hello World</em> Subscriber Source Code</a></li>
<li><a class="reference internal" href="#dds-cxx-hello-world-publisher-source-code">DDS CXX <em>Hello World</em> Publisher Source Code</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#contributing-to-eclipse-cyclone-dds">Contributing to Eclipse Cyclone DDS</a><ul>
<li><a class="reference internal" href="#id17">Linux and macOS</a></li>
<li><a class="reference internal" href="#id18">Windows</a></li>
</ul>
</li>
<li><a class="reference internal" href="#contributing-to-eclipse-cyclone-dds-cxx">Contributing to Eclipse Cyclone DDS CXX</a><ul>
<li><a class="reference internal" href="#id19">Linux and macOS</a></li>
<li><a class="reference internal" href="#id20">Windows</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </div>
        </div>
    

      <div class="clearer"></div>
    </div>
    <div class="button_nav_wrapper">
        <div class="button_nav">
            <div class="left">
                
                <a href="index.html">
                    <span class="icon"><</span><span>Welcome to Eclipse Cyclone DDS’s documentation!</span></a>
                
            </div>

            <div class="right">
                
                    <a href="config.html"><span>Eclipse Cyclone DDS Configuration Options</span><span class="icon">></span></a>
                
            </div>
        </div>
    </div>


    <div class="footer" role="contentinfo">
        &#169; Copyright 2022, Eclipse Cyclone DDS committers.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
    </div>

<p id="theme_credit">Styled using the <a href="https://github.com/piccolo-orm/piccolo_theme">Piccolo Theme</a></p>
  </body>
</html>